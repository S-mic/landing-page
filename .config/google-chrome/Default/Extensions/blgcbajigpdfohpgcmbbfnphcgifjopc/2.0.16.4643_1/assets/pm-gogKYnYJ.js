var Ga=Object.defineProperty;var za=(t,e,a)=>e in t?Ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Ke=(t,e,a)=>(za(t,typeof e!="symbol"?e+"":e,a),a);import"./modulepreload-polyfill-xVUEmHkd.js";import{_ as ae,w as It,a as Ya,d as Za}from"./_plugin-vue_export-helper-DbWluJVK.js";import{u as we,b as X,c as me,h as ha,i as Xa,j as va,v as Qa,k as es,m as ts,n as as,o as ss,a as rs,f as os}from"./unhandledErrorHandler-Bxfeq5I8.js";import{i as ns}from"./i18n-DOZcdwWT.js";import{o as is,b as wa,v as ls,a as fa,r as cs,g as ps}from"./nativeFunctions-B799UMhD.js";import{M as ue,c as Nt,u as ds,H as oe,i as us,A as Ut,b as _s}from"./StorageMigrationHelper-DHvwzE_w.js";import{U as W,V as D,a0 as R,a9 as ne,ag as ve,W as v,a4 as I,a5 as S,Y as n,Z as s,$ as x,aa as le,ab as ce,_ as h,a1 as He,X as P,ak as Ie,av as ms,aw as gs,ax as Ot,ay as Be,am as ya,az as ba,aA as yt,a2 as E,a3 as We,ai as Q,a8 as F,a6 as Z,aB as hs,aC as rt,aD as vs,B as ka,q as ws,ao as Sa,a7 as pe,ac as fs,aE as ys,aF as bs}from"./Settings-Bqkr9m9-.js";import{B as te}from"./Button-BiW9ff6I.js";import{S as Ca,P as ks,_ as Ss}from"./PasswordStrengthFeedback.vue_vue_type_script_setup_true_lang-Cngq_PAD.js";import{P as Pt,T as xa}from"./TextInput-BKjIqiTR.js";import{W as Ea}from"./WebsiteIcon-DpK2IMEY.js";import{T as Ta}from"./Tabs-BUnkJjvo.js";const Cs=["innerHTML"],xs={"data-test":"not_activated_text_p1"},Es=(t=>(le("data-v-a6a16ab6"),t=t(),ce(),t))(()=>n("span",{class:He("code-inline")},h("expressvpn activate"),-1)),Ts=["innerHTML"],Ms=ae(W({__name:"ActivateAppModal",setup(t){const{addAnchor:e,sendTelemetry:a}=X(),o=we(),{t:r}=D(),i=R(()=>o.os),p=R(()=>o.currentInfo.isNewProtocol),l=R(()=>{const u={primary:{label:r("modal_password_page_app_not_activated_btn_primary.message"),action:d,id:"get_activation_code"},secondary:{label:r("modal_password_page_app_not_activated_btn_secondary.message"),action:c,id:"open_app_button"}};return(i.value==="Linux"||i.value==="Windows"&&p.value)&&delete u.secondary,u}),c=()=>{is()},d=()=>{chrome.tabs.create({url:o.getLocalizedUrl("/subscriptions?utm_campaign=keys_desktop_not_installed&utm_medium=apps&utm_source=keys_extension&utm_content=app_not_installed_sign_in_button")})};return ne(async()=>{a("pwm_app_not_activated_seen"),await o.setBrowserInfo()}),(u,m)=>{const _=ve("i18n-t");return v(),I(ue,{id:"not_activated_modal","data-test":"not_activated_modal",title:s(r)("modal_password_page_app_not_activated_title.message"),showCloseButton:!1,reverseButtonOrder:!0,buttons:s(l)},{default:S(()=>[n("p",{innerHTML:s(r)(`modal_password_page_app_not_activated_${s(i)}_text.message`),"data-test":"not_activated_text"},null,8,Cs),n("p",xs,[x(_,{keypath:`modal_password_page_app_not_activated_${s(i)}_text_p1.message`,scope:"global"},{ACTIVATE_COMMAND:S(()=>[Es]),_:1},8,["keypath"])]),n("p",{id:"contactSupport",innerHTML:s(e)("modal_password_page_app_not_activated_text_p2.message",s(o).getLocalizedUrl("support?utm_campaign=keys_desktop_not_activated&utm_medium=apps&utm_source=keys_extension&utm_content=app_not_activated_contact_support_button")),"data-test":"not_activated_text_p2"},null,8,Ts)]),_:1},8,["title","buttons"])}}}),[["__scopeId","data-v-a6a16ab6"]]),Ps={class:"app-not-installed container text-center"},As=(t=>(le("data-v-58a06475"),t=t(),ce(),t))(()=>n("div",{class:"logo mb-30"},null,-1)),Ls={class:"mb-10"},Rs={class:"row mt-40 content"},Is={class:"col"},Os={class:"col-content"},$s={"data-test":"os-dependent-p1"},Hs={class:"col-content"},Ws=["src"],Ns={class:"col"},Us={class:"col-content"},Ds={class:"col-content"},Ks=["src"],Js=ae(W({__name:"AppNotInstalled",props:{os:{}},setup(t){const{t:e}=D(),{sendTelemetry:a}=X(),o=we(),r=()=>{a("pwm_app_not_installed_sign_in_click"),chrome.tabs.create({url:"https://www.exp8links8.net/subscriptions?utm_campaign=keys_desktop_not_installed&utm_medium=apps&utm_source=keys_extension&utm_content=app_not_installed_sign_in_button"})},i=()=>{a("pwm_app_not_installed_get_xv_click"),chrome.tabs.create({url:"https://www.exp8links8.net/order?utm_campaign=keys_desktop_not_installed&utm_medium=apps&utm_source=keys_extension&utm_content=get_expressvpn_button"})};return ne(async()=>{a("pwm_app_not_installed_seen"),await o.setBrowserInfo()}),(p,l)=>(v(),P("div",Ps,[As,n("h3",Ls,h(s(e)("app_not_installed_header.message")),1),n("p",null,h(s(e)("app_not_installed_subheader.message")),1),n("div",Rs,[n("div",Is,[n("div",Os,[n("h5",null,h(s(e)("app_not_installed_have_expressvpn_header.message")),1),n("p",$s,h(s(e)(`app_not_installed_have_expressvpn_${p.os}_p1.message`)),1)]),n("div",Hs,[n("img",{class:"mb-20",src:s("data:image/svg+xml,%3csvg%20width='180'%20height='180'%20viewBox='0%200%20180%20180'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='90'%20cy='90'%20r='71.4375'%20fill='%23B6D1D0'/%3e%3crect%20x='16.875'%20y='49.5'%20width='146.25'%20height='99'%20rx='5.625'%20fill='%23F0EACF'/%3e%3crect%20x='25.3125'%20y='66.375'%20width='55.6875'%20height='8.4375'%20rx='3.375'%20fill='white'/%3e%3crect%20x='25.3125'%20y='86.0625'%20width='25.3125'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='25.3125'%20y='120.375'%20width='25.3125'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='55.6875'%20y='86.0625'%20width='25.3125'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='55.6875'%20y='120.375'%20width='25.3125'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='25.3125'%20y='97.3125'%20width='55.6875'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='25.875'%20y='109.125'%20width='37.125'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='68.0625'%20y='109.125'%20width='12.9375'%20height='3.9375'%20rx='1.96875'%20fill='white'/%3e%3crect%20x='97.3125'%20y='31.5'%20width='57.375'%20height='99'%20rx='5.625'%20fill='%23001D2F'/%3e%3cmask%20id='mask0_1277_2725'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='97'%20y='31'%20width='58'%20height='100'%3e%3crect%20x='97.3125'%20y='31.5'%20width='57.375'%20height='99'%20rx='5.625'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1277_2725)'%3e%3crect%20x='97.3125'%20y='31.5'%20width='57.375'%20height='47.8125'%20fill='url(%23paint0_linear_1277_2725)'/%3e%3cpath%20d='M115.102%20112.208C115.102%20114.009%20116.534%20115.481%20118.342%20115.588L118.552%20115.594H134.01C135.846%20115.594%20137.346%20114.188%20137.455%20112.415L137.461%20112.208V107.875C137.461%20107.202%20136.905%20106.656%20136.219%20106.656C135.582%20106.656%20135.057%20107.127%20134.985%20107.733L134.977%20107.875V112.208C134.977%20112.688%20134.613%20113.085%20134.142%20113.148L134.01%20113.156H118.552C118.063%20113.156%20117.659%20112.8%20117.595%20112.337L117.586%20112.208V107.875C117.586%20107.202%20117.03%20106.656%20116.344%20106.656C115.707%20106.656%20115.182%20107.127%20115.11%20107.733L115.102%20107.875V112.208Z'%20fill='white'/%3e%3cpath%20d='M132.68%20101.597C133.128%20102.036%20133.163%20102.727%20132.784%20103.205L132.68%20103.32L127.16%20108.737C126.712%20109.176%20126.007%20109.21%20125.52%20108.838L125.403%20108.737L119.882%20103.32C119.397%20102.844%20119.397%20102.073%20119.882%20101.597C120.33%20101.157%20121.034%20101.124%20121.522%20101.495L121.639%20101.597L126.281%20106.151L130.924%20101.597C131.371%20101.157%20132.076%20101.124%20132.563%20101.495L132.68%20101.597Z'%20fill='white'/%3e%3cpath%20d='M125.039%2094.875C125.039%2094.2019%20125.595%2093.6563%20126.281%2093.6563C126.918%2093.6563%20127.443%2094.1267%20127.515%2094.7329L127.523%2094.875V107.875C127.523%20108.548%20126.967%20109.094%20126.281%20109.094C125.644%20109.094%20125.119%20108.623%20125.047%20108.017L125.039%20107.875V94.875Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_1277_2725'%20x1='147.584'%20y1='103.219'%20x2='190.661'%20y2='12.6341'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23B6D1D0'/%3e%3cstop%20offset='0.999781'%20stop-color='%23F0EACF'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")},null,8,Ws),x(te,{class:"btn",label:s(e)("app_not_installed_have_expressvpn_button_label.message"),fitContent:!0,onClick:r,id:"signIn","data-test":"signIn"},null,8,["label"])])]),n("div",Ns,[n("div",Us,[n("h5",null,h(s(e)("app_not_installed_no_account_header.message")),1),n("p",null,h(s(e)("app_not_installed_no_account_p1.message")),1)]),n("div",Ds,[n("img",{class:"mb-20",src:s("/assets/integration-tsKr9NmX.svg")},null,8,Ks),x(te,{class:"btn",label:s(e)("app_not_installed_no_account_button_label.message"),fitContent:!0,onClick:i,id:"getExpresssVPN","data-test":"getExpresssVPN"},null,8,["label"])])])])]))}}),[["__scopeId","data-v-58a06475"]]),js={class:"page-wrapper container"},Vs={class:"row"},Bs={class:"col"},qs=(t=>(le("data-v-b0370be1"),t=t(),ce(),t))(()=>n("div",{class:"logo mb-30"},null,-1)),Fs={class:"row"},Gs={class:"col left"},zs={class:"col right"},Y=ae({},[["render",function(t,e){return v(),P("div",js,[n("div",Vs,[n("div",Bs,[qs,Ie(t.$slots,"step",{},void 0,!0)])]),n("div",Fs,[n("div",Gs,[Ie(t.$slots,"leftColumn",{},void 0,!0)]),n("div",zs,[Ie(t.$slots,"rightColumn",{},void 0,!0)])]),Ie(t.$slots,"default",{},void 0,!0),Ie(t.$slots,"modals",{},void 0,!0)])}],["__scopeId","data-v-b0370be1"]]),Ys={class:"spinner-wrapper"},Zs={class:"mt-20"},Xs=W({__name:"Loading",setup(t){const{t:e}=D();return(a,o)=>(v(),I(Y,null,{default:S(()=>[n("div",Ys,[x(Ca,{size:"48"}),n("p",Zs,h(s(e)("onboarding_loading_please_wait_p.message")),1)])]),_:1}))}}),je=typeof document<"u",V=Object.assign;function bt(t,e){const a={};for(const o in e){const r=e[o];a[o]=_e(r)?r.map(t):t(r)}return a}const tt=()=>{},_e=Array.isArray,Ma=/#/g,Qs=/&/g,er=/\//g,tr=/=/g,ar=/\?/g,Pa=/\+/g,sr=/%5B/g,rr=/%5D/g,Aa=/%5E/g,or=/%60/g,La=/%7B/g,nr=/%7C/g,Ra=/%7D/g,ir=/%20/g;function $t(t){return encodeURI(""+t).replace(nr,"|").replace(sr,"[").replace(rr,"]")}function kt(t){return $t(t).replace(Pa,"%2B").replace(ir,"+").replace(Ma,"%23").replace(Qs,"%26").replace(or,"`").replace(La,"{").replace(Ra,"}").replace(Aa,"^")}function lr(t){return t==null?"":function(e){return $t(e).replace(Ma,"%23").replace(ar,"%3F")}(t).replace(er,"%2F")}function ot(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cr=/\/$/,pr=t=>t.replace(cr,"");function St(t,e,a="/"){let o,r={},i="",p="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(o=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),r=t(i)),l>-1&&(o=o||e.slice(0,l),p=e.slice(l,e.length)),o=function(d,u){if(d.startsWith("/"))return d;if(!d)return u;const m=u.split("/"),_=d.split("/"),g=_[_.length-1];g!==".."&&g!=="."||_.push("");let w,y,k=m.length-1;for(w=0;w<_.length;w++)if(y=_[w],y!=="."){if(y!=="..")break;k>1&&k--}return m.slice(0,k).join("/")+"/"+_.slice(w).join("/")}(o??e,a),{fullPath:o+(i&&"?")+i+p,path:o,query:r,hash:ot(p)}}function Dt(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Ve(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ia(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const a in t)if(!dr(t[a],e[a]))return!1;return!0}function dr(t,e){return _e(t)?Kt(t,e):_e(e)?Kt(e,t):t===e}function Kt(t,e){return _e(e)?t.length===e.length&&t.every((a,o)=>a===e[o]):t.length===1&&t[0]===e}var nt,Jt,at,Ct;(Jt=nt||(nt={})).pop="pop",Jt.push="push",(Ct=at||(at={})).back="back",Ct.forward="forward",Ct.unknown="";const ur=/^[^#]+#/;function _r(t,e){return t.replace(ur,"#")+e}const _t=()=>({left:window.scrollX,top:window.scrollY});function mr(t){let e;if("el"in t){const a=t.el,o=typeof a=="string"&&a.startsWith("#"),r=typeof a=="string"?o?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!r)return;e=function(i,p){const l=document.documentElement.getBoundingClientRect(),c=i.getBoundingClientRect();return{behavior:p.behavior,left:c.left-l.left-(p.left||0),top:c.top-l.top-(p.top||0)}}(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function jt(t,e){return(history.state?history.state.position-e:-1)+t}const xt=new Map;let gr=()=>location.protocol+"//"+location.host;function Vt(t,e){const{pathname:a,search:o,hash:r}=e,i=t.indexOf("#");if(i>-1){let p=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(p);return l[0]!=="/"&&(l="/"+l),Dt(l,"")}return Dt(a,t)+o+r}function Bt(t,e,a,o=!1,r=!1){return{back:t,current:e,forward:a,replaced:o,position:window.history.length,scroll:r?_t():null}}function hr(t){const e=function(r){const{history:i,location:p}=window,l={value:Vt(r,p)},c={value:i.state};function d(u,m,_){const g=r.indexOf("#"),w=g>-1?(p.host&&document.querySelector("base")?r:r.slice(g))+u:gr()+r+u;try{i[_?"replaceState":"pushState"](m,"",w),c.value=m}catch{p[_?"replace":"assign"](w)}}return c.value||d(l.value,{back:null,current:l.value,forward:null,position:i.length-1,replaced:!0,scroll:null},!0),{location:l,state:c,push:function(u,m){const _=V({},c.value,i.state,{forward:u,scroll:_t()});d(_.current,_,!0),d(u,V({},Bt(l.value,u,null),{position:_.position+1},m),!1),l.value=u},replace:function(u,m){d(u,V({},i.state,Bt(c.value.back,u,c.value.forward,!0),m,{position:c.value.position}),!0),l.value=u}}}(t=function(r){if(!r)if(je){const i=document.querySelector("base");r=(r=i&&i.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),pr(r)}(t)),a=function(r,i,p,l){let c=[],d=[],u=null;const m=({state:g})=>{const w=Vt(r,location),y=p.value,k=i.value;let b=0;if(g){if(p.value=w,i.value=g,u&&u===y)return void(u=null);b=k?g.position-k.position:0}else l(w);c.forEach(T=>{T(p.value,y,{delta:b,type:nt.pop,direction:b?b>0?at.forward:at.back:at.unknown})})};function _(){const{history:g}=window;g.state&&g.replaceState(V({},g.state,{scroll:_t()}),"")}return window.addEventListener("popstate",m),window.addEventListener("beforeunload",_,{passive:!0}),{pauseListeners:function(){u=p.value},listen:function(g){c.push(g);const w=()=>{const y=c.indexOf(g);y>-1&&c.splice(y,1)};return d.push(w),w},destroy:function(){for(const g of d)g();d=[],window.removeEventListener("popstate",m),window.removeEventListener("beforeunload",_)}}}(t,e.state,e.location,e.replace),o=V({location:"",base:t,go:function(r,i=!0){i||a.pauseListeners(),history.go(r)},createHref:_r.bind(null,t)},e,a);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function Oa(t){return typeof t=="string"||typeof t=="symbol"}const Me={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$a=Symbol("");var qt,Je;function qe(t,e){return V(new Error,{type:t,[$a]:!0},e)}function ke(t,e){return t instanceof Error&&$a in t&&(e==null||!!(t.type&e))}(Je=qt||(qt={}))[Je.aborted=4]="aborted",Je[Je.cancelled=8]="cancelled",Je[Je.duplicated=16]="duplicated";const Ft="[^/]+?",vr={sensitive:!1,strict:!1,start:!0,end:!0},wr=/[.+*?^${}()[\]/\\]/g;function fr(t,e){let a=0;for(;a<t.length&&a<e.length;){const o=e[a]-t[a];if(o)return o;a++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function yr(t,e){let a=0;const o=t.score,r=e.score;for(;a<o.length&&a<r.length;){const i=fr(o[a],r[a]);if(i)return i;a++}if(Math.abs(r.length-o.length)===1){if(Gt(o))return 1;if(Gt(r))return-1}return r.length-o.length}function Gt(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const br={type:0,value:""},kr=/[a-zA-Z0-9_]/;function Sr(t,e,a){const o=function(i,p){const l=V({},vr,p),c=[];let d=l.start?"^":"";const u=[];for(const _ of i){const g=_.length?[]:[90];l.strict&&!_.length&&(d+="/");for(let w=0;w<_.length;w++){const y=_[w];let k=40+(l.sensitive?.25:0);if(y.type===0)w||(d+="/"),d+=y.value.replace(wr,"\\$&"),k+=40;else if(y.type===1){const{value:b,repeatable:T,optional:O,regexp:L}=y;u.push({name:b,repeatable:T,optional:O});const K=L||Ft;if(K!==Ft){k+=10;try{new RegExp(`(${K})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${b}" (${K}): `+H.message)}}let $=T?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;w||($=O&&_.length<2?`(?:/${$})`:"/"+$),O&&($+="?"),d+=$,k+=20,O&&(k+=-8),T&&(k+=-20),K===".*"&&(k+=-50)}g.push(k)}c.push(g)}if(l.strict&&l.end){const _=c.length-1;c[_][c[_].length-1]+=.7000000000000001}l.strict||(d+="/?"),l.end?d+="$":l.strict&&(d+="(?:/|$)");const m=new RegExp(d,l.sensitive?"":"i");return{re:m,score:c,keys:u,parse:function(_){const g=_.match(m),w={};if(!g)return null;for(let y=1;y<g.length;y++){const k=g[y]||"",b=u[y-1];w[b.name]=k&&b.repeatable?k.split("/"):k}return w},stringify:function(_){let g="",w=!1;for(const y of i){w&&g.endsWith("/")||(g+="/"),w=!1;for(const k of y)if(k.type===0)g+=k.value;else if(k.type===1){const{value:b,repeatable:T,optional:O}=k,L=b in _?_[b]:"";if(_e(L)&&!T)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const K=_e(L)?L.join("/"):L;if(!K){if(!O)throw new Error(`Missing required param "${b}"`);y.length<2&&(g.endsWith("/")?g=g.slice(0,-1):w=!0)}g+=K}}return g||"/"}}}(function(i){if(!i)return[[]];if(i==="/")return[[br]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function p(T){throw new Error(`ERR (${l})/"${w}": ${T}`)}let l=0,c=l;const d=[];let u;function m(){u&&d.push(u),u=[]}let _,g=0,w="",y="";function k(){w&&(l===0?u.push({type:0,value:w}):l===1||l===2||l===3?(u.length>1&&(_==="*"||_==="+")&&p(`A repeatable param (${w}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:w,regexp:y,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):p("Invalid state to consume buffer"),w="")}function b(){w+=_}for(;g<i.length;)if(_=i[g++],_!=="\\"||l===2)switch(l){case 0:_==="/"?(w&&k(),m()):_===":"?(k(),l=1):b();break;case 4:b(),l=c;break;case 1:_==="("?l=2:kr.test(_)?b():(k(),l=0,_!=="*"&&_!=="?"&&_!=="+"&&g--);break;case 2:_===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+_:l=3:y+=_;break;case 3:k(),l=0,_!=="*"&&_!=="?"&&_!=="+"&&g--,y="";break;default:p("Unknown state")}else c=l,l=4;return l===2&&p(`Unfinished custom RegExp for param "${w}"`),k(),m(),d}(t.path),a),r=V(o,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Cr(t,e){const a=[],o=new Map;function r(l,c,d){const u=!d,m=function(k){return{path:k.path,redirect:k.redirect,name:k.name,meta:k.meta||{},aliasOf:void 0,beforeEnter:k.beforeEnter,props:xr(k),children:k.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in k?k.components||null:k.component&&{default:k.component}}}(l);m.aliasOf=d&&d.record;const _=Zt(e,l),g=[m];if("alias"in l){const k=typeof l.alias=="string"?[l.alias]:l.alias;for(const b of k)g.push(V({},m,{components:d?d.record.components:m.components,path:b,aliasOf:d?d.record:m}))}let w,y;for(const k of g){const{path:b}=k;if(c&&b[0]!=="/"){const T=c.record.path,O=T[T.length-1]==="/"?"":"/";k.path=c.record.path+(b&&O+b)}if(w=Sr(k,c,_),d?d.alias.push(w):(y=y||w,y!==w&&y.alias.push(w),u&&l.name&&!Yt(w)&&i(l.name)),m.children){const T=m.children;for(let O=0;O<T.length;O++)r(T[O],w,d&&d.children[O])}d=d||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&p(w)}return y?()=>{i(y)}:tt}function i(l){if(Oa(l)){const c=o.get(l);c&&(o.delete(l),a.splice(a.indexOf(c),1),c.children.forEach(i),c.alias.forEach(i))}else{const c=a.indexOf(l);c>-1&&(a.splice(c,1),l.record.name&&o.delete(l.record.name),l.children.forEach(i),l.alias.forEach(i))}}function p(l){let c=0;for(;c<a.length&&yr(l,a[c])>=0&&(l.record.path!==a[c].record.path||!Ha(l,a[c]));)c++;a.splice(c,0,l),l.record.name&&!Yt(l)&&o.set(l.record.name,l)}return e=Zt({strict:!1,end:!0,sensitive:!1},e),t.forEach(l=>r(l)),{addRoute:r,resolve:function(l,c){let d,u,m,_={};if("name"in l&&l.name){if(d=o.get(l.name),!d)throw qe(1,{location:l});m=d.record.name,_=V(zt(c.params,d.keys.filter(y=>!y.optional).concat(d.parent?d.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),l.params&&zt(l.params,d.keys.map(y=>y.name))),u=d.stringify(_)}else if(l.path!=null)u=l.path,d=a.find(y=>y.re.test(u)),d&&(_=d.parse(u),m=d.record.name);else{if(d=c.name?o.get(c.name):a.find(y=>y.re.test(c.path)),!d)throw qe(1,{location:l,currentLocation:c});m=d.record.name,_=V({},c.params,l.params),u=d.stringify(_)}const g=[];let w=d;for(;w;)g.unshift(w.record),w=w.parent;return{name:m,path:u,params:_,matched:g,meta:Er(g)}},removeRoute:i,getRoutes:function(){return a},getRecordMatcher:function(l){return o.get(l)}}}function zt(t,e){const a={};for(const o of e)o in t&&(a[o]=t[o]);return a}function xr(t){const e={},a=t.props||!1;if("component"in t)e.default=a;else for(const o in t.components)e[o]=typeof a=="object"?a[o]:a;return e}function Yt(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Er(t){return t.reduce((e,a)=>V(e,a.meta),{})}function Zt(t,e){const a={};for(const o in t)a[o]=o in e?e[o]:t[o];return a}function Ha(t,e){return e.children.some(a=>a===t||Ha(t,a))}function Tr(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<a.length;++o){const r=a[o].replace(Pa," "),i=r.indexOf("="),p=ot(i<0?r:r.slice(0,i)),l=i<0?null:ot(r.slice(i+1));if(p in e){let c=e[p];_e(c)||(c=e[p]=[c]),c.push(l)}else e[p]=l}return e}function Xt(t){let e="";for(let a in t){const o=t[a];if(a=kt(a).replace(tr,"%3D"),o==null){o!==void 0&&(e+=(e.length?"&":"")+a);continue}(_e(o)?o.map(r=>r&&kt(r)):[o&&kt(o)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+a,r!=null&&(e+="="+r))})}return e}function Mr(t){const e={};for(const a in t){const o=t[a];o!==void 0&&(e[a]=_e(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return e}const Pr=Symbol(""),Qt=Symbol(""),Ht=Symbol(""),Wt=Symbol(""),At=Symbol("");function et(){let t=[];return{add:function(e){return t.push(e),()=>{const a=t.indexOf(e);a>-1&&t.splice(a,1)}},list:()=>t.slice(),reset:function(){t=[]}}}function Ae(t,e,a,o,r,i=p=>p()){const p=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const d=_=>{var g;_===!1?c(qe(4,{from:a,to:e})):_ instanceof Error?c(_):typeof(g=_)=="string"||g&&typeof g=="object"?c(qe(2,{from:e,to:_})):(p&&o.enterCallbacks[r]===p&&typeof _=="function"&&p.push(_),l())},u=i(()=>t.call(o&&o.instances[r],e,a,d));let m=Promise.resolve(u);t.length<3&&(m=m.then(d)),m.catch(_=>c(_))})}function Et(t,e,a,o,r=i=>i()){const i=[];for(const l of t)for(const c in l.components){let d=l.components[c];if(e==="beforeRouteEnter"||l.instances[c])if(typeof(p=d)=="object"||"displayName"in p||"props"in p||"__vccOpts"in p){const u=(d.__vccOpts||d)[e];u&&i.push(Ae(u,a,o,l,c,r))}else{let u=d();i.push(()=>u.then(m=>{if(!m)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${l.path}"`));const _=(g=m).__esModule||g[Symbol.toStringTag]==="Module"?m.default:m;var g;l.components[c]=_;const w=(_.__vccOpts||_)[e];return w&&Ae(w,a,o,l,c,r)()}))}}var p;return i}function ea(t){const e=Be(Ht),a=Be(Wt),o=R(()=>e.resolve(s(t.to))),r=R(()=>{const{matched:l}=o.value,{length:c}=l,d=l[c-1],u=a.matched;if(!d||!u.length)return-1;const m=u.findIndex(Ve.bind(null,d));if(m>-1)return m;const _=ta(l[c-2]);return c>1&&ta(d)===_&&u[u.length-1].path!==_?u.findIndex(Ve.bind(null,l[c-2])):m}),i=R(()=>r.value>-1&&function(l,c){for(const d in c){const u=c[d],m=l[d];if(typeof u=="string"){if(u!==m)return!1}else if(!_e(m)||m.length!==u.length||u.some((_,g)=>_!==m[g]))return!1}return!0}(a.params,o.value.params)),p=R(()=>r.value>-1&&r.value===a.matched.length-1&&Ia(a.params,o.value.params));return{route:o,href:R(()=>o.value.href),isActive:i,isExactActive:p,navigate:function(l={}){return function(c){if(!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)&&!c.defaultPrevented&&!(c.button!==void 0&&c.button!==0)){if(c.currentTarget&&c.currentTarget.getAttribute){const d=c.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(d))return}return c.preventDefault&&c.preventDefault(),!0}}(l)?e[s(t.replace)?"replace":"push"](s(t.to)).catch(tt):Promise.resolve()}}}const Ar=W({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ea,setup(t,{slots:e}){const a=ya(ea(t)),{options:o}=Be(Ht),r=R(()=>({[aa(t.activeClass,o.linkActiveClass,"router-link-active")]:a.isActive,[aa(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const i=e.default&&e.default(a);return t.custom?i:ba("a",{"aria-current":a.isExactActive?t.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:r.value},i)}}});function ta(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const aa=(t,e,a)=>t??e??a;function sa(t,e){if(!t)return null;const a=t(e);return a.length===1?a[0]:a}const Lr=W({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:a}){const o=Be(At),r=R(()=>t.route||o.value),i=Be(Qt,0),p=R(()=>{let d=s(i);const{matched:u}=r.value;let m;for(;(m=u[d])&&!m.components;)d++;return d}),l=R(()=>r.value.matched[p.value]);yt(Qt,R(()=>p.value+1)),yt(Pr,l),yt(At,r);const c=E();return We(()=>[c.value,l.value,t.name],([d,u,m],[_,g,w])=>{u&&(u.instances[m]=d,g&&g!==u&&d&&d===_&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),!d||!u||g&&Ve(u,g)&&_||(u.enterCallbacks[m]||[]).forEach(y=>y(d))},{flush:"post"}),()=>{const d=r.value,u=t.name,m=l.value,_=m&&m.components[u];if(!_)return sa(a.default,{Component:_,route:d});const g=m.props[u],w=g?g===!0?d.params:typeof g=="function"?g(d):g:null,y=ba(_,V({},w,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(m.instances[u]=null)},ref:c}));return sa(a.default,{Component:y,route:d})||y}}});function gt(){return Be(Wt)}const Rr={class:"row text-center"},Ir={class:"scene-wrapper"},Or=["src"],$r=["innerHTML"],Hr={class:"dots mt-20"},Wr={class:"row mt-20"},Nr={key:0,class:"buttons-wrapper"},Ur={class:"mt-10"},Dr=W({__name:"KeySellingPoints",setup(t){const e=me(),{addAnchor:a,sendTelemetry:o}=X(),{t:r}=D(),i=we(),p=E(1),l=[{id:1,link:"/keys/get-started",image:"/assets/browser-vault-CglgBR5a.svg"},{id:2,link:"/keys/get-started#no-limits",image:"/assets/browser-add-logins-CrVgWQKF.svg"},{id:3,link:"/keys/get-started#keep-logins-safe",image:"/assets/browser-secure-C1ji6BK_.svg"},{id:4,link:"/support/troubleshooting/password-manager-import-existing-logins/",image:"/assets/browser-import-logins-UMYTlwUe.svg"},{id:5,link:"/keys/get-started",image:"/assets/browser-sync-devices-Chx8j93u.svg"}],c=i.currentInfo.website_url,d=R(()=>e.hasPwm),u=R(()=>e.isDeviceVerified),m=R(()=>{const O=l[p.value-1];return{id:O.id,title:r(`ksp_item_title_${p.value}.message`),text:a(`ksp_item_text_${p.value}.message`,O.link,c),image:O.image}}),_=()=>{o(`pwm_ksp_click_next_scene${p.value}_v2`),T()},g=()=>{o(`pwm_ksp_click_skip_scene${p.value}_v2`),p.value=l.length},w=()=>{o("pwm_ksp_click_cta_scene5_v2"),d.value?u.value?J.push("/account-verified"):J.push({path:"/verify-account",query:{mfaStepOnly:!0}}):J.push("/set-primary-password")},y=()=>{o(`pwm_ksp_tap_link_scene${p.value}_v2`)},k=O=>{O.key==="ArrowLeft"?b():O.key==="ArrowRight"&&T()},b=()=>{p.value>1&&(p.value-=1)},T=()=>{p.value<l.length&&(p.value+=1)};return We(p,()=>{i.currentInfo.state&&!["NOT_INSTALLED","not_activated"].includes(i.currentInfo.state)&&o(`pwm_ksp_seen_scene${p.value}_v2`)},{immediate:!0}),ne(()=>{document.addEventListener("keydown",k)}),(O,L)=>(v(),I(Y,{class:"key-selling-points"},{default:S(()=>[n("div",Rr,[n("div",Ir,[n("img",{src:s(m).image},null,8,Or),n("h3",null,h(s(m).title),1),n("p",{innerHTML:s(m).text,onClick:y},null,8,$r),n("div",Hr,[n("div",{class:He(["chevron chevron-left mr-10",[s(p)<=1?"hidden":""]]),"data-test":"left-arrow",onClick:b},null,2),(v(!0),P(F,null,Q(l.length,K=>(v(),P("div",{class:He(["dot",[s(p)===K?"active":""]]),key:K},null,2))),128)),n("div",{class:He(["chevron chevron-right",[s(p)>=l.length?"hidden":""]]),"data-test":"right-arrow",onClick:T},null,2)])])]),n("div",Wr,[s(p)!=l.length?(v(),P("div",Nr,[x(te,{label:s(r)("ksp_next_button.message"),onClick:_,id:"next"},null,8,["label"]),n("p",Ur,[n("a",{id:"skip",onClick:g},h(s(r)("ksp_skip_button.message")),1)])])):(v(),I(te,{key:1,label:s(r)("ksp_set_up_button.message"),onClick:w,fitContent:!0,id:"setup"},null,8,["label"]))])]),_:1}))}}),Kr=ae(Dr,[["__scopeId","data-v-6356ed04"]]),ra={"Use a few words, avoid common phrases.":"password_suggestion_use_uncommon_words","No need for symbols, digits, or uppercase letters.":"password_suggestion_no_need_for_extra_chars","Add another word or two. Uncommon words are better.":"password_suggestion_add_another_word_or_two","Capitalization doesn't help very much.":"password_suggestion_capitalization_does_not_help","All-uppercase is almost as easy to guess as all-lowercase.":"password_suggestion_uppercase_does_not_help","Reversed words aren't much harder to guess.":"password_suggestion_reversed_word_does_not_help","Predictable substitutions like '@' instead of 'a' don't help very much.":"password_suggestion_substitution_does_not_help","Use a longer keyboard pattern with more turns.":"password_suggestion_avoid_obvious_patterns","Avoid repeated words and characters.":"password_suggestion_avoid_repeats","Avoid sequences.":"password_suggestion_avoid_sequences","Avoid recent years.":"password_suggestion_avoid_recent_years","Avoid years that are associated with you.":"password_suggestion_avoid_years","Avoid dates and years that are associated with you.":"password_suggestion_avoid_dates"},oa={"Straight rows of keys are easy to guess.":"password_warning_straight_rows_are_easy_to_guess","Keyboard patterns are not secure.":"password_warning_short_patterns_are_easy_to_guess",'Repeats like "aaa" are easy to guess.':"password_warning_repeats_are_easy_to_guess",'Repeats like "abcabcabc" are easy to guess.':"password_warning_repeats_are_slightly_harder_to_guess","This is a top-10 common password.":"password_warning_top_10_common_password","This is a top-100 common password.":"password_warning_top_100_common_password","This is a very common password.":"password_warning_very_common_password","Too similar to a commonly used password.":"password_warning_simmilar_to_common_password",'Sequences like "6543" are easy to guess.':"password_warning_sequences_are_easy_to_guess","Recent years are easy to guess.":"password_warning_years_are_easy_to_guess","A word by itself is easy to guess.":"password_warning_word_is_easy_to_guess","Dates are often easy to guess.":"password_warning_dates_are_easy_to_guess","Names by themselves are easy to guess.":"password_warning_names_are_easy_to_guess","Don't use common names or surnames.":"password_warning_common_names_are_easy_to_guess"},Jr={class:"tooltip"},jr={class:"caption warning"},Vr={class:"caption suggestion"},Br=(t=>(le("data-v-cac2cceb"),t=t(),ce(),t))(()=>n("div",{class:"triangle"},null,-1)),qr=W({__name:"PasswordStrengthSuggestionTooltip",props:{suggestions:{default:()=>[]},warning:{default:""}},setup(t,{expose:e}){const{t:a}=D(),o=t,r=E(null),i=R(()=>o.suggestions.map(l=>ra[l]?a(`${ra[l]}.message`):void 0).filter(l=>!!l)),p=R(()=>oa[o.warning]?a(`${oa[o.warning]}.message`):void 0);return e({PasswordStrengthSuggestionTooltipRef:r}),(l,c)=>s(p)||s(i).length>0?(v(),P("div",{key:0,class:"password-strength-tooltip",ref_key:"PasswordStrengthSuggestionTooltipRef",ref:r},[n("div",Jr,[n("p",jr,h(s(p)),1),(v(!0),P(F,null,Q(s(i),d=>(v(),P("p",Vr,h(d),1))),256))]),Br],512)):Z("",!0)}}),Fr=ae(qr,[["__scopeId","data-v-cac2cceb"]]),Gr={class:"set-password-form"},zr={class:"card"},Yr={class:"inner-card-wrapper"},Zr={class:"learn_more"},Xr=["innerHTML"],Qr=W({__name:"SetPasswordForm",props:{isSaving:{type:Boolean,default:!1},learnMoreLabel:{},feedbackEmptyLabel:{}},emits:["set-password"],setup(t,{emit:e}){const{t:a}=D(),o=we(),r=me(),{sendTelemetry:i}=X(),p=e,l=E(void 0),c=E(!1),d=E({}),u=E(null),m=ya({primaryPassword:"",primaryPassword2:""}),_={primaryPassword:{passwordStrenght:Nt.withAsync(async $=>{var H;return l.value=await r.checkPasswordStrength($),w(),$&&(((H=l.value)==null?void 0:H.score)??0)>=3})},primaryPassword2:{passwordsMatch:Nt.withMessage(a("pwm_primary_pw_set_form_pw_error_match.message"),$=>!!$&&$===m.primaryPassword)}},g=ds(_,m),w=async()=>{var H,z,ee;await((H=u.value)==null?void 0:H.$nextTick());const $=(ee=(z=u.value)==null?void 0:z.PasswordStrengthSuggestionTooltipRef)==null?void 0:ee.clientHeight;d.value=$?{marginTop:`-${$}px !important`}:{}},y=async($,H)=>{g.value.$reset();const z=H.target.value;m[$]=z},k=async()=>{var H;await g.value.primaryPassword.$validate();const $=!((H=g.value.primaryPassword)!=null&&H.$error);c.value=!$,$||(i("pwm_onboard_prim_pwd_err_retype_v1"),i("pwm_onboard_prim_pwd_reqs_not_matched_v1"))},b=async()=>{i("pwm_onboard_prim_pwd_continue_v1");const $=await g.value.$validate();c.value=!!g.value.primaryPassword.$error,$?p("set-password",m.primaryPassword):(g.value.primaryPassword2&&g.value.primaryPassword2.$error&&i("pwm_onboard_prim_pwd_pass_mismatched_v1"),i("pwm_onboard_prim_pwd_reqs_not_matched_v1"))},T=()=>{var $;c.value=!1,($=document.querySelector("#primary-password input"))==null||$.focus()},O=()=>{chrome.tabs.create({url:o.getLocalizedUrl("/support/troubleshooting/password-manager-create-strong-primary-password")})},L=()=>{i("pwm_onboard_prim_pwd_learn_more_under_v1"),O()},K={primary:{label:a("pwm_primary_pw_set_security_modal_edit_password.message"),id:"editPassword",action:T},secondary:{label:a("pwm_primary_pw_set_security_modal_read_tips.message"),id:"readTips",action:()=>{i("pwm_onboard_prim_pwd_learn_more_error_v1"),T(),O()}}};return ne(()=>{i("pwm_onboard_prim_pwd_seen_v1")}),($,H)=>{var z,ee,ye;return v(),P("div",Gr,[x(Fr,{ref_key:"tooltip",ref:u,warning:(z=s(l))==null?void 0:z.warning,suggestions:(ee=s(l))==null?void 0:ee.suggestions,style:hs(s(d))},null,8,["warning","suggestions","style"]),n("div",zr,[x(ks,{type:"primary",score:(ye=s(l))==null?void 0:ye.score},null,8,["score"]),n("div",Yr,[x(Pt,{id:"primary-password","data-test":"primary-password",label:s(a)("pwm_primary_pw_set_form_pw_label.message"),value:m.primaryPassword,errorMessage:s(g).primaryPassword.$errors.map(ie=>ie.$message).join(", "),disabled:$.isSaving,invalid:s(g).primaryPassword.$error,wiggle:s(g).primaryPassword.$error,onInput:H[0]||(H[0]=ie=>y("primaryPassword",ie)),"fixed-dots":10,"show-eye":!0,showEyeWhenEmpty:!0},null,8,["label","value","errorMessage","disabled","invalid","wiggle"]),x(Ss,{class:"password-requirements","data-test":"password-strength-feedback",type:"primary",passwordStrength:s(l),keypathEmptyLabel:$.feedbackEmptyLabel},null,8,["passwordStrength","keypathEmptyLabel"]),n("p",Zr,[n("a",{onClick:L,"data-test":"learn-more",innerHTML:s(a)($.learnMoreLabel)},null,8,Xr)]),x(Pt,{id:"re-primary-password","data-test":"re-primary-password",label:s(a)("pwm_primary_pw_set_form_pw_reenter.message"),value:m.primaryPassword2,errorMessage:s(g).primaryPassword2.$errors.map(ie=>ie.$message).join(", "),disabled:$.isSaving,invalid:s(g).primaryPassword2.$error,wiggle:s(g).primaryPassword2.$error,onKeyup:It(b,["enter","native"]),onInput:H[1]||(H[1]=ie=>y("primaryPassword2",ie)),onInputFocusin:k,"fixed-dots":10,"show-eye":!0,showEyeWhenEmpty:!0},null,8,["label","value","errorMessage","disabled","invalid","wiggle"]),x(te,{class:"mt-15",label:s(a)("pwm_primary_pw_set_form_submit.message"),loading:$.isSaving,disabled:$.isSaving,id:"submitBtn","data-test":"submitBtn",onClick:b},null,8,["label","loading","disabled"])]),s(c)?(v(),I(ue,{key:0,"data-test":"password-security-modal",buttons:K,title:s(a)("pwm_primary_pw_set_security_modal_title.message"),onClose:T},{default:S(()=>[n("p",null,h(s(a)("pwm_primary_pw_set_security_modal_p1.message")),1),n("p",null,h(s(a)("pwm_primary_pw_set_security_modal_p2.message")),1)]),_:1},8,["title"])):Z("",!0)])])}}}),Wa=ae(Qr,[["__scopeId","data-v-2672e1e9"]]);function it(){return{getCurrentStep:t=>{if((t=t??me().isDeviceVerified)===void 0)return"";const e=J.currentRoute.value.path,a={"/set-primary-password":[[1,3],[1,4]],"/recovery-code":[[2,3],[2,4]],"/verify-account-code":[void 0,[3,4]],"/help-improve":[[3,3],[4,4]]}[e],o=t?a==null?void 0:a[0]:a==null?void 0:a[1];if(o===void 0)throw new Error(`Steps for route ${e} and device verified=${t} not defined`);const{t:r}=D();return r("step_X_of_Y.message",{STEP:o[0],TOTAL:o[1]})},getImportLoginSubStep:(t,e)=>{let a=0;for(let o=0;o<e.length;o++)e[o].index===t&&(a=e[o].total);return a}}}const eo={class:"current-step"},to={"data-test":"change-pwd-instructions"},ao=W({__name:"SetPrimaryPassword",setup(t){const{openGeneralSupportPage:e}=X(),{getCurrentStep:a}=it(),{t:o}=D(),{sendTelemetry:r}=X(),i=me(),p=E(!1),l=E(!1),c=R(()=>a()),d=R(()=>({primary:{label:o("pwm_primary_pw_modal_generic_error_btn_primary.message"),action:u,id:"try_again_button"},secondary:{label:o("pwm_contact_us_label.message"),action:e,id:"contact_us_button"}}));ne(()=>{r("pwm_onboard_prim_pwd_seen")});const u=()=>{p.value=!1},m=async _=>{l.value=!0,i.tempPrimaryPassword=_;try{const g=await ha();if(!g)throw new Error("Recovery key is undefined");i.recoveryKey=g,l.value=!1,J.push("/recovery-code")}catch{l.value=!1,p.value=!0}};return(_,g)=>(v(),I(Y,null,{step:S(()=>[n("p",eo,h(s(c)),1)]),leftColumn:S(()=>[n("h3",null,h(s(o)("pwm_primary_pw_set_header.message")),1),n("p",to,h(s(o)("pwm_primary_pw_set_text.message")),1)]),rightColumn:S(()=>[x(Wa,{"data-test":"set-password-form","learn-more-label":"pwm_primary_pw_set_learn.message","feedback-empty-label":"primary_password_strength_empty",isSaving:s(l),onSetPassword:m},null,8,["learn-more-label","isSaving"])]),modals:S(()=>[s(p)?(v(),I(ue,{key:0,title:s(o)("pwm_primary_pw_modal_generic_error_header.message"),buttons:s(d),id:"generic-error-modal","data-test":"generic-error-modal",onClose:u},{default:S(()=>[n("p",null,h(s(o)("pwm_primary_pw_modal_generic_error_text.message")),1)]),_:1},8,["title","buttons"])):Z("",!0)]),_:1}))}}),so=["data-hover","data-click"],Tt=ae(W({__name:"Copybar",props:{hoverTooltip:{},clickTooltip:{},content:{}},setup(t){const e=t,a=R(()=>!e.hoverTooltip),o=R(()=>!e.clickTooltip);return(r,i)=>(v(),P("button",{class:He(["copybar",{hideHoverTooltip:s(a),hideClickTooltip:s(o)}]),"data-hover":r.hoverTooltip,"data-click":r.clickTooltip},[Ie(r.$slots,"default",{},()=>[rt(h(r.content??""),1)],!0)],10,so))}}),[["__scopeId","data-v-6b88b409"]]),ro={class:"recovery-code"},oo={class:"card"},no={class:"card-row"},io={class:"card-row"},lo=["href","download","text"],co=(t=>(le("data-v-cb013226"),t=t(),ce(),t))(()=>n("div",{class:"divider"},null,-1)),po={class:"card-row"},Na=ae(W({__name:"RecoveryCode",props:{recoveryCode:{default:""},loading:{type:Boolean,default:!1}},emits:["copied","continue","continue-confirm","continue-warning","continue-warning-confirm","continue-warning-cancel","download"],setup(t,{emit:e}){const{t:a}=D(),o=t,r=e,i=E(),p=E(),l=E(),c=E(!1),d=E(),u=R(()=>d.value==="pwm_recovery_code_downloaded_hint.message"),m=R(()=>d.value==="pwm_recovery_code_copied_hint.message");ne(()=>{w()});const _=()=>{r("continue-confirm"),b()},g=()=>{r("continue"),m.value||u.value?_():(r("continue-warning"),c.value=!0)},w=async()=>{if(!o.recoveryCode)throw new Error("recovery code is empty");const O=chrome.i18n.getUILanguage(),L=new Date().toLocaleDateString(O,{year:"numeric",month:"short",day:"numeric"}),K=a("pwm_recovery_code_pdf_document_file_name.message",{TIME:L})+".pdf",$=await Xa({recoveryKey:o.recoveryCode,localizedStrings:{date_text:a("pwm_recovery_code_pdf_content_date_text.message",{TIME:L}),document_title:K,header_text:a("pwm_recovery_code_pdf_content_header_text.message"),instruction_text:a("pwm_recovery_code_pdf_content_instruction_text.message"),reset_instruction_text:a("pwm_recovery_code_pdf_content_reset_instruction_text.message"),title_text:a("pwm_recovery_code_pdf_content_title_text.message"),warning_text:a("pwm_recovery_code_pdf_content_warning_text.message")}}),H=vs(Uint8Array.from($));p.value=`data:application/pdf;base64,${H}`,l.value=K},y=O=>{O&&i.value.click(),d.value="pwm_recovery_code_downloaded_hint.message",r("download")},k=()=>{navigator.clipboard.writeText(o.recoveryCode??"").then(()=>{r("copied"),d.value="pwm_recovery_code_copied_hint.message"}).catch(()=>{})},b=()=>{c.value=!1},T={primary:{label:a("pwm_recovery_code_cancel.message"),action:()=>{r("continue-warning-cancel"),b()},id:"cancelModalBtn"},secondary:{label:a("pwm_recovery_code_continue.message"),action:()=>{r("continue-warning-confirm"),_()},id:"continueModalBtn"}};return(O,L)=>(v(),P("div",ro,[n("div",oo,[n("div",no,[x(Tt,{id:"recoveryCode",content:O.recoveryCode??"",onClick:k},null,8,["content"])]),n("div",io,[x(Tt,{id:"copyCode",content:s(a)("pwm_recovery_code_copy_code.message"),onClick:k},null,8,["content"]),x(Tt,{id:"downloadAsPdf",onClick:L[1]||(L[1]=K=>y(!0))},{default:S(()=>[n("a",{onClick:L[0]||(L[0]=Ya(K=>y(!1),["stop"])),ref_key:"aHref",ref:i,href:s(p),download:s(l),text:s(a)("pwm_recovery_code_download_pdf.message")},null,8,lo)]),_:1})]),co,n("div",po,[x(te,{id:"continueBtn",type:s(m)||s(u)?"primary":"secondary",loading:O.loading,label:s(a)("pwm_recovery_code_continue.message"),onClick:g},null,8,["type","loading","label"])])]),s(d)?(v(),I(oe,{key:0,class:"mt-30","data-test":"hasCopiedHint",type:"success",pwm_recovery_code_downloaded_hint:"",content:s(a)(s(d))},null,8,["content"])):Z("",!0),s(c)?(v(),I(ue,{key:1,slot:"modals",id:"warningModal","data-test":"warning-modal",title:s(a)("pwm_recovery_code_warning_modal_title.message"),buttons:T,reverseButtonOrder:!0,onClose:b},{default:S(()=>[n("p",null,h(s(a)("pwm_recovery_code_warning_modal_text_p1.message")),1),n("p",null,h(s(a)("pwm_recovery_code_warning_modal_text_p2.message")),1)]),_:1},8,["title"])):Z("",!0)]))}}),[["__scopeId","data-v-cb013226"]]),uo={class:"step-wrapper"},_o={class:"current-step"},mo=(t=>(le("data-v-53341024"),t=t(),ce(),t))(()=>n("span",{class:"divider"},"·",-1)),go={"data-test":"title"},ho=["innerHTML"],vo={"data-test":"error-modal-text"},wo=W({__name:"RecoveryCode",setup(t){const{openGeneralSupportPage:e}=X(),{getCurrentStep:a}=it(),{t:o}=D(),{sendTelemetry:r}=X(),i=me();let p;const l={networkError:{title:"pwm_create_account_error_modal_title.message",text:"pwm_network_error_modal_text.message"},generic:{title:"pwm_create_account_error_modal_title.message",text:"pwm_generic_error_modal_text.message"}},c=E(!1),d=E(!1),u=E(!1),m=E(!1),_=R(()=>u.value?"networkError":m.value?"generic":void 0),g=R(()=>a()),w=R(()=>i.recoveryKey);ne(()=>{r("pwm_onboard_recovery_code_seen"),i.isDeviceVerified?r("pwm_onboard_recovery_code_2fa_not_needed"):r("pwm_onboard_recovery_code_2fa_needed")});const y=($,H)=>{chrome.runtime.onMessage.removeListener(k),c.value=!1,clearTimeout(p),$&&!H?(r("pwm_onboard_device_validation_email_sent"),J.push("/verify-account-code")):H==="network error"?(u.value=!0,r("pwm_onboard_device_validation_email_err")):(m.value=!0,r("pwm_onboard_device_validation_email_err"))},k=$=>{switch($.action){case"requestMfaCode":y($.value.status,$.value.error_message);break;case"unknown":const H=$.value;y(H.data.success,H.data.error_message)}return!0},b=()=>{r("pwm_onboard_recovery_code_copy")},T=()=>{i.isDeviceVerified?(()=>{d.value=!0;const{tempPrimaryPassword:$,recoveryKey:H,clearOnboardingData:z}=i;va({master_password:$??"",recovery_password:H}).then(ee=>{ka(ee),r("pwm_onboard_no2fa_account_created"),z(),J.push({path:"/help-improve",query:{isDeviceVerified:i.isDeviceVerified?"1":"0"}})}).catch(ee=>{ws(ee,"error.api.network")?u.value=!0:m.value=!0}).finally(()=>{d.value=!1})})():(async()=>(c.value=!0,chrome.runtime.onMessage.addListener(k),await wa(),p=setTimeout(()=>{c.value=!1,u.value=!0,r("pwm_onboard_device_validation_email_err"),chrome.runtime.onMessage.removeListener(k)},3e4)))()},O=()=>{u.value=!1,m.value=!1},L=()=>{r("pwm_onboard_recovery_code_cancel_setup"),J.push("/welcome")},K={primary:{label:o("try_again_label.message"),action:O,id:"tryAgain"},secondary:{label:o("pwm_contact_us_label.message"),action:e,id:"contactUs"}};return($,H)=>(v(),I(Y,null,{step:S(()=>[n("p",uo,[n("span",_o,h(s(g)),1),mo,n("a",{id:"cancelSetup",onClick:L},h(s(o)("recovery_code_cancel_setup.message")),1)])]),leftColumn:S(()=>[n("h3",go,h(s(o)("pwm_recovery_code_header.message")),1),n("p",{"data-test":"message",innerHTML:s(o)("pwm_recovery_code_text.message")},null,8,ho)]),rightColumn:S(()=>{var z;return[x(Na,{recoveryCode:s(w),loading:s(d)||s(c),onCopied:b,onContinue:H[0]||(H[0]=ee=>s(r)("pwm_onboard_recovery_code_continue")),onContinueWarning:H[1]||(H[1]=ee=>s(r)("pwm_onboard_recovery_error")),onContinueWarningConfirm:H[2]||(H[2]=ee=>s(r)("pwm_onboard_recovery_error_continue")),onContinueWarningCancel:H[3]||(H[3]=ee=>s(r)("pwm_onboard_recovery_error_cancel")),onContinueConfirm:T,onDownload:H[4]||(H[4]=ee=>s(r)("pwm_onboard_recovery_code_save_pdf"))},null,8,["recoveryCode","loading"]),s(_)?(v(),I(ue,{key:0,slot:"modals",id:"errorModal","data-test":"error-modal",title:s(o)((z=l[s(_)])==null?void 0:z.title),buttons:K,onClose:O},{default:S(()=>{var ee;return[n("p",vo,h(s(o)((ee=l[s(_)])==null?void 0:ee.text)),1)]}),_:1},8,["title"])):Z("",!0)]}),_:1}))}}),fo=ae(wo,[["__scopeId","data-v-53341024"]]);let Lt,de;async function Ua(t,e){return de=t,chrome.runtime.onMessage.addListener(Da),await wa(),Lt=setTimeout(()=>{var a;(a=de==null?void 0:de.onTimeout)==null||a.call(de),ht()},1e3*e),Lt}function ht(){chrome.runtime.onMessage.removeListener(Da)}function Da(t){var o;let e,a=!1;switch(t.action){case"requestMfaCode":a=t.value.status,e=t.value.error_message;break;case"unknown":a=t.value.data.success,e=t.value.data.error_message}return ht(),(o=de==null?void 0:de.onResponse)==null||o.call(de,a,e),clearTimeout(Lt),!0}const yo={"data-test":"error-modal-text"},bo={key:0,class:"step-wrapper"},ko={class:"current-step"},So=n("span",{class:"divider"},"·",-1),Co={"data-test":"title"},xo={"data-test":"message_p1"},Eo={"data-test":"message_p2"},To={class:"card"},Mo={class:"resendCode"},Po=W({__name:"VerifyAccountCode",setup(t){const{sendTelemetry:e,openGeneralSupportPage:a}=X(),{getCurrentStep:o}=it(),{t:r}=D(),i=gt(),p=me(),l={networkError:{title:"pwm_validate_mfa_network_error_modal_title.message",text:"pwm_network_error_modal_text.message"},generic:{title:"pwm_create_account_error_modal_title.message",text:"pwm_generic_error_modal_text.message"},mfaGeneric:{title:"pwm_request_mfa_error_modal_title.message",text:"pwm_generic_error_modal_text.message"},mfaNetwork:{title:"pwm_request_mfa_error_modal_title.message",text:"pwm_network_error_modal_text.message"}},c=E(!1),d=E(!1),u=E(),m=E(0),_=E(),g=E(""),w=E(!1),y=E(!1),k=E(!1),b=E(!1),T=E(!1),O=E(!1),L=E(!1),K=E(!1),$=R(()=>o()),H=R(()=>i.query.mfaStepOnly),z=R(()=>H.value?"existing_verif":"device_validation"),ee=R(()=>({primary:{label:r("try_again_label.message"),action:Ne,id:"tryAgain"},secondary:{label:r("pwm_contact_us_label.message"),action:a,id:"contactUs"}})),ye=R(()=>({primary:{label:u.value===void 0?r("pwm_verify_account_code_resend_code_label.message"):r("pwm_verify_account_code_resend_code_please_wait_label.message",{SECONDS:30-m.value}),action:ze,disabled:u.value!==void 0,loading:d.value===!1&&c.value,id:"resendCode"},secondary:{label:r("pwm_verify_account_code_contact_support_label.message"),action:a,id:"contactUs"}})),ie=R(()=>b.value?"networkError":T.value?"generic":L.value?"mfaGeneric":O.value?"mfaNetwork":void 0),Ne=()=>{b.value=!1,T.value=!1,L.value=!1,O.value=!1},ze=async()=>{c.value=!0,u.value===void 0&&(m.value=0,u.value=setInterval(()=>{m.value=m.value+1,m.value>=30&&u.value!==void 0&&(clearInterval(u.value),u.value=void 0,d.value=!1,c.value=!1)},1e3*1),await Ua({onTimeout:()=>{O.value=!0,Ue(),e("pwm_onboard_device_validation_timeout")},onResponse:Ye},30))},Ye=(C,M)=>{Ue(),C&&!M?e("pwm_onboard_existing_verif_email_sent"):M==="network error"?(O.value=!0,e("pwm_onboard_existing_verif_email_err")):(L.value=!0,e("pwm_onboard_existing_verif_email_err"))},Ue=()=>{K.value=!1},Ze=()=>{K.value=!0,d.value=u.value!==void 0},Xe=()=>{e("pwm_onboard_device_validation_cancel_setup"),J.push("/welcome")},De=()=>{y.value=!0,w.value=!1,Ne(),chrome.runtime.onMessage.addListener(Qe),ls(g.value)},Qe=C=>{switch(C.action){case"validateMfaCode":be(C.value.status,C.value.error_message);break;case"unknown":be(C.value.data.success,C.value.data.error_message)}return!0},be=(C,M)=>{chrome.runtime.onMessage.removeListener(Qe),y.value=!1,C?(chrome.runtime.onMessage.addListener(f),e(`pwm_onboard_${z.value}_success`),fa()):M==="network error"?(e(`pwm_onboard_${z.value}_timeout`),b.value=!0):M==="sign in token expired"?(e(`pwm_onboard_${z.value}_expired`),w.value=!0):(e(`pwm_onboard_${z.value}_incorrect`),w.value=!0),Ot(()=>{_.value.focusInput()})},f=C=>(C.action==="setPwmAccessToken"&&(chrome.runtime.onMessage.removeListener(f),H.value?J.push("/account-verified"):A()),!0),A=()=>{k.value=!0;const{tempPrimaryPassword:C,recoveryKey:M,clearOnboardingData:q}=p;va({master_password:C||"",recovery_password:M||""}).then(j=>{ka(j),e("pwm_onboard_2fa_account_created"),q(),J.push({path:"/help-improve",query:{isDeviceVerified:p.isDeviceVerified?"1":"0"}})}).catch(j=>{T.value=!0}).finally(()=>{k.value=!1})};return ne(async()=>{e(`pwm_onboard_${z.value}_seen`)}),Sa(()=>{ht()}),(C,M)=>{var q;return v(),P(F,null,[s(ie)?(v(),I(ue,{key:0,id:"errorModal","data-test":"error-modal",title:s(r)((q=l[s(ie)])==null?void 0:q.title),buttons:s(ee),onClose:Ne},{default:S(()=>{var j;return[n("p",yo,h(s(r)((j=l[s(ie)])==null?void 0:j.text)),1)]}),_:1},8,["title","buttons"])):Z("",!0),K.value?(v(),I(ue,{key:1,id:"resendCodeModal","data-test":"resend-code-modal",reverseButtonOrder:!0,title:s(r)("pwm_verify_account_code_modal_title.message"),buttons:s(ye),onClose:Ue},{default:S(()=>[n("p",null,h(s(r)("pwm_verify_account_code_modal_text1.message")),1),n("p",null,h(s(r)("pwm_verify_account_code_modal_text2.message")),1)]),_:1},8,["title","buttons"])):Z("",!0),x(Y,null,{step:S(()=>[s(H)?Z("",!0):(v(),P("p",bo,[n("span",ko,h(s($)),1),So,n("a",{id:"cancelSetup",onClick:Xe},h(s(r)("recovery_code_cancel_setup.message")),1)]))]),leftColumn:S(()=>[n("h3",Co,h(s(r)("pwm_verify_account_header.message")),1),n("p",xo,h(s(r)("pwm_verify_account_code_text_p1.message")),1),n("p",Eo,h(s(r)("pwm_verify_account_code_text_p2.message")),1)]),rightColumn:S(()=>[n("div",To,[x(xa,{id:"mfaCodeInput",ref_key:"mfaCodeInput",ref:_,value:g.value,"onUpdate:value":M[0]||(M[0]=j=>g.value=j),label:s(r)("pwm_verify_account_code_input_label.message"),disabled:y.value,errorMessage:s(r)("pwm_verify_account_code_invalid_code.message"),wiggle:w.value,invalid:w.value,onInput:M[1]||(M[1]=j=>w.value=!1)},null,8,["value","label","disabled","errorMessage","wiggle","invalid"]),x(te,{class:"mt-15",id:"continueBtn",label:s(r)("pwm_verify_account_code_submit_button_label.message"),onClick:De,loading:y.value||k.value},null,8,["label","loading"]),n("p",Mo,[n("a",{onClick:Ze,"data-test":"resend-code"},h(s(r)("pwm_verify_account_code_help_link.message")),1)])])]),_:1})],64)}}}),Ao={class:"step-wrapper"},Lo={class:"current-step"},Ro={class:"button-group mt-15"},Io=["src"],Oo=W({__name:"HelpImprove",setup(t){const{sendTelemetry:e}=X(),{getCurrentStep:a}=it(),{t:o}=D(),r=we(),i=gt();if(!(i.query.isDeviceVerified in["1","0"]))throw new Error('"isDeviceVerified" query parameter must be provided');const p=R(()=>a(i.query.isDeviceVerified==="1")),l=async c=>{e("pwm_onboard_analytics_"+(c?"keep_on":"turn_off"),!c),await r.setSetting("helpImprove",c),J.push("/setup-completed")};return(c,d)=>(v(),I(Y,{class:"help-improve"},{step:S(()=>[n("p",Ao,[n("span",Lo,h(s(p)),1)])]),leftColumn:S(()=>[n("h3",null,h(s(o)("help_improve_onboarding_expressvpn_keys.message")),1),n("p",null,h(s(o)("help_improve_onboarding_share_crash.message")),1),n("div",Ro,[x(te,{class:"auto",id:"okBtn",label:s(o)("help_improve_onboarding_ok.message"),onClick:d[0]||(d[0]=u=>l(!0)),showRightArrow:!0},null,8,["label"]),x(te,{class:"auto",id:"noBtn",label:s(o)("help_improve_onboarding_no_thanks.message"),type:"secondary",onClick:d[1]||(d[1]=u=>l(!1))},null,8,["label"])])]),rightColumn:S(()=>[n("img",{src:s(us)},null,8,Io)]),_:1}))}}),$o={"data-test":"title"},Ho={"data-test":"message_p1"},Wo={"data-test":"message_p2"},No={class:"button-container"},Uo=["innerHTML"],Do=["src"],Ko=W({__name:"VerifyAccount",setup(t){const e=gt(),{addAnchor:a,sendTelemetry:o,openGeneralSupportPage:r}=X(),{t:i}=D(),p=E(!1),l=E(!1),c=E(!1),d=R(()=>({primary:{label:i("try_again_label.message"),action:m,id:"tryAgain"},secondary:{label:i("pwm_contact_us_label.message"),action:r,id:"contactUs"}})),u=R(()=>({primary:{label:i("try_again_label.message"),action:_,id:"tryAgain"},secondary:{label:i("pwm_contact_us_label.message"),action:r,id:"contactUs"}})),m=()=>l.value=!1,_=()=>c.value=!1,g=async()=>{p.value=!0,await Ua({onTimeout:()=>{p.value=!1,l.value=!0,o("pwm_onboard_device_validation_timeout")},onResponse:w},30)},w=(y,k)=>{p.value=!1,y&&!k?(o("pwm_onboard_existing_verif_email_sent"),J.push({path:"/verify-account-code",query:{...e==null?void 0:e.query}})):k==="network error"?(l.value=!0,o("pwm_onboard_existing_verif_email_err")):(c.value=!0,o("pwm_onboard_existing_verif_email_err"))};return ne(()=>{o("pwm_onboard_existing_verif_needed")}),Sa(()=>{ht()}),(y,k)=>(v(),P(F,null,[s(l)?(v(),I(ue,{key:0,slot:"modals",id:"errorModalNetwork",title:s(i)("pwm_request_mfa_error_modal_title.message"),buttons:s(d),onClose:m},{default:S(()=>[n("p",null,h(s(i)("pwm_network_error_modal_text.message")),1)]),_:1},8,["title","buttons"])):Z("",!0),s(c)?(v(),I(ue,{key:1,slot:"modals",id:"errorModalGeneric",title:s(i)("pwm_request_mfa_error_modal_title.message"),buttons:s(u),onClose:_},{default:S(()=>[n("p",null,h(s(i)("pwm_generic_error_modal_text.message")),1)]),_:1},8,["title","buttons"])):Z("",!0),x(Y,null,{leftColumn:S(()=>[n("h3",$o,h(s(i)("pwm_verify_account_header.message")),1),n("p",Ho,h(s(i)("pwm_verify_account_text_p1.message")),1),n("p",Wo,h(s(i)("pwm_verify_account_text_p2.message")),1),n("div",No,[x(te,{class:"mt-15",id:"sendEmail",label:s(i)("pwm_verify_account_send_email_button.message"),onClick:g,loading:s(p),showRightArrow:!0},null,8,["label","loading"])]),n("p",{class:"mt-40",innerHTML:s(a)("pwm_verify_account_need_help.message","support")},null,8,Uo)]),rightColumn:S(()=>[n("img",{src:s("/assets/account-not-verified-BN7fOWnw.svg")},null,8,Do)]),_:1})],64))}}),Jo=ae(Ko,[["__scopeId","data-v-e77a2296"]]),Fe="/assets/success-CF-2ZTvG.svg",jo={"data-test":"title"},Vo={"data-test":"message"},Bo={class:"import-available"},qo={class:"icons-wrapper"},Fo=["src"],Go={class:"actions-wrapper mt-30"},zo={class:"actions-wrapper mt-30"},Yo=["src"],Zo=ae(W({__name:"SetUpCompleted",setup(t){const{sendTelemetry:e}=X(),{t:a}=D(),o=()=>{e("pwm_onboard_all_set_import"),J.push("/import-logins")},r=()=>{e("pwm_onboard_all_set_add_man"),J.push("/add-logins")},i=[{id:1,image:"/assets/chrome-YJrje9YX.svg"},{id:2,image:"/assets/one-password-CFi3RULg.svg"},{id:3,image:"/assets/dashlane-SqpB_eAq.svg"},{id:4,image:"/assets/last-pass-CToasc2_.svg"},{id:5,image:"/assets/edge-P2yCxh5S.svg"},{id:6,image:"/assets/icloud-keychain-GAjslpt5.svg"},{id:7,image:"data:image/svg+xml,%3csvg%20height='46'%20viewBox='0%200%2046%2046'%20width='46'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3ccircle%20cx='23'%20cy='23'%20fill='%23175ddc'%20r='23'/%3e%3cpath%20d='m33.673772%2011.3212355c-.2140871-.2108108-.4791473-.3212355-.7747915-.3212355h-19.797961c-.2956442%200-.5607044.1104247-.7747915.3212355s-.326228.4718147-.326228.7629344v13c0%20.9737452.1936979%201.9274131.570899%202.8810811.3873957.9536679.8563485%201.7969112%201.4272474%202.5397683.570899.7428571%201.2437442%201.4555985%202.0287303%202.1583012s1.5088045%201.284942%202.1714551%201.7467181%201.3558851.9034749%202.0797034%201.3150579c.7238184.411583%201.2335496.6926641%201.5393883.8332047.3058388.1505791.5505098.2610038.734013.3413127.1325301.0702703.2854495.1003861.4485635.1003861s.3058387-.0301158.4485635-.1003861c.1835032-.0803089.4281742-.1907336.734013-.3413127.3058387-.1505792.8155699-.4216217%201.5393883-.8332047.7238183-.411583%201.4170528-.8532818%202.0797034-1.3150579s1.386469-1.0440154%202.1714551-1.7467181%201.4578313-1.4154441%202.0287303-2.1583012c.5708989-.7428571%201.0398517-1.5861004%201.4272474-2.5397683.3873958-.953668.570899-1.9173746.570899-2.8810811v-13c0-.2911197-.1121409-.542085-.326228-.7629344zm-2.5486562%2013.8833977c0%204.7081081-8.1149212%208.753668-8.1149212%208.753668v-20.1776062h8.1149212z'%20fill='%23fff'%20fill-rule='nonzero'/%3e%3c/g%3e%3c/svg%3e"}];return ne(()=>{e("pwm_onboard_all_set_seen")}),(p,l)=>{const c=ve("i18n-t");return v(),I(Y,null,{leftColumn:S(()=>[n("h3",jo,h(s(a)("pwm_setup_success_header.message")),1),n("p",Vo,h(s(a)("pwm_setup_success_text.message")),1),n("div",Bo,[n("div",qo,[(v(),P(F,null,Q(i,d=>n("img",{class:"icon",key:d.id,src:d.image},null,8,Fo)),64))])]),n("div",Go,[x(te,{class:"auto",id:"importLogins",label:s(a)("pwm_setup_success_import_logins.message"),onClick:o},null,8,["label"])]),x(c,{class:"mt-30",tag:"p",keypath:"pwm_setup_success_text_p4.message",scope:"global"},{pwm_setup_success_text_p4_login_bold:S(()=>[n("b",null,h(s(a)("pwm_setup_success_text_p4_login_bold.message")),1)]),pwm_setup_success_text_p4_secure_note_bold:S(()=>[n("b",null,h(s(a)("pwm_setup_success_text_p4_secure_note_bold.message")),1)]),pwm_setup_success_text_p4_credit_card_bold:S(()=>[n("b",null,h(s(a)("pwm_setup_success_text_p4_credit_card_bold.message")),1)]),_:1}),n("div",zo,[x(te,{class:"auto",id:"addLogins",label:s(a)("pwm_setup_success_add_logins.message"),type:"secondary",onClick:r},null,8,["label"])])]),rightColumn:S(()=>[n("img",{class:"mt-60",src:s(Fe)},null,8,Yo)]),_:1})}}}),[["__scopeId","data-v-c54384f3"]]),Xo={class:"mt-30","data-test":"message_p1"},Qo=["innerHTML"],en=["src"],tn=W({__name:"AccountVerified",setup(t){const{t:e}=D(),{addAnchor:a}=X();return(o,r)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("account_verified_header.message")),1),x(oe,{class:"mt-10",content:s(e)("account_verified_hint.message"),type:"success"},null,8,["content"]),n("p",Xo,h(s(e)("account_verified_text_p1.message")),1),n("p",{innerHTML:s(a)("account_verified_text_p2.message","support"),id:"contactSupport"},null,8,Qo)]),rightColumn:S(()=>[n("img",{class:"mt-60",src:s(Fe)},null,8,en)]),_:1}))}}),Ka=t=>(le("data-v-9c7f6962"),t=t(),ce(),t),an={"data-test":"message_p2_1"},sn={"data-test":"message_p2_3"},rn=["innerHTML"],on={class:"card"},nn={key:0,class:"choose-website"},ln=Ka(()=>n("hr",null,null,-1)),cn={class:"websites-wrapper"},pn=["onClick"],dn={class:"website-name"},un=Ka(()=>n("div",{class:"icon chevron-right"},null,-1)),_n={key:1,class:"add-login"},mn={class:"card-header"},gn={class:"step-icon"},hn=["innerHTML"],vn=ae(W({__name:"AddLogins",setup(t){const{t:e}=D(),a=E(null),o=[{title:"Google",domain:"https://www.google.com"},{title:"Amazon",domain:"https://www.amazon.com/"},{title:"Facebook",domain:"https://www.facebook.com/"},{title:"ExpressVPN",domain:"https://www.expressvpn.com/"},{title:"Netflix",domain:"https://www.netflix.com"},{title:"Microsoft",domain:"https://login.live.com"},{title:"PayPal",domain:"https://www.paypal.com"},{title:"LinkedIn",domain:"https://www.linkedin.com/"},{title:"Twitter",domain:"https://www.twitter.com"},{title:"Instagram",domain:"https://www.instagram.com/"},{title:"Apple",domain:"https://appleid.apple.com/"},{title:"Spotify",domain:"https://www.spotify.com"},{title:"Reddit",domain:"https://www.reddit.com"},{title:"Yahoo",domain:"https://www.yahoo.com"},{title:"Zoom",domain:"https://www.zoom.us"},{title:"Ebay",domain:"https://www.ebay.com"},{title:"Twitch",domain:"https://www.twitch.tv/"},{title:"Dropbox",domain:"https://www.dropbox.com"},{title:"Pinterest",domain:"https://www.pinterest.com/"},{title:"Hulu",domain:"https://www.hulu.com"},{title:"Airbnb",domain:"https://www.airbnb.com/"},{title:"Disney+",domain:"https://www.disneyplus.com"},{title:"HBO Max",domain:"https://www.hbomax.com/"},{title:"ESPN",domain:"https://www.espn.com/"}],r=R(()=>{var _;const m=((_=a.value)==null?void 0:_.domain)??"";return new URL(m).hostname.replace(/^www\./,"")}),i=R(()=>e("add_logins_back.message",{HOST:r.value.charAt(0).toUpperCase()+r.value.substring(1)})),p=R(()=>e("add_logins_open_website.message",{HOST:r.value})),l=()=>{a.value=null},c=()=>{J.push("/import-logins")},d=m=>e(`add_logins_step${m}.message`,{HOST:r.value}),u=()=>{a.value&&chrome.tabs.create({url:a.value.domain})};return(m,_)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("add_logins_header.message")),1),n("p",null,h(s(e)("add_logins_text_p1.message")),1),n("p",null,[n("span",an,h(s(e)("add_logins_text_p2_1.message")),1),rt(" "),n("a",{onClick:c,"data-test":"message_p2_2"},h(s(e)("add_logins_text_p2_2.message")),1),rt(" "),n("span",sn,h(s(e)("add_logins_text_p2_3.message")),1)]),n("p",{"data-test":"message_p3",innerHTML:s(e)("add_logins_text_p3.message")},null,8,rn)]),rightColumn:S(()=>[n("div",on,[s(a)?(v(),P("div",_n,[n("div",mn,[n("div",{class:"icon arrow-left",onClick:l}),n("p",null,h(s(i)),1)]),(v(),P(F,null,Q(4,g=>n("div",{class:"step",key:g},[n("div",gn,h(g),1),n("p",{innerHTML:d(g)},null,8,hn)])),64)),x(te,{class:"mt-30",label:s(p),onClick:u},null,8,["label"])])):(v(),P("div",nn,[n("h5",null,h(s(e)("add_logins_choose_website_header.message")),1),n("p",null,h(s(e)("add_logins_choose_website_text.message")),1),ln,n("div",cn,[(v(),P(F,null,Q(o,g=>n("div",{class:"website",key:g.title,onClick:w=>(y=>{a.value=y})(g)},[x(Ea,{domain:g.domain,title:g.title,size:"sm"},null,8,["domain","title"]),n("div",dn,h(g.title),1),un],8,pn)),64))])]))])]),_:1}))}}),[["__scopeId","data-v-9c7f6962"]]),wn={"data-test":"description"},fn={class:"card"},mt=W({__name:"VerifyPassword",props:{type:{type:String,required:!1,default:"importLogins"}},emits:["validation-success"],setup(t,{emit:e}){const{t:a}=D(),{openGeneralSupportPage:o}=X(),r=me(),i=t;E();const p=E(!1),l=E(!1),c=E(""),d=E(!1),u=E(0),m=R(()=>{let b="";return b=i.type==="importLogins"?"import_logins_verify_password_label.message":i.type==="changePassword"?"change_password_verify_text.message":i.type==="resetRecoveryCode"?"reset_recovery_code_verify_password_text.message":"export_data_verify_password_label.message",b}),_=R(()=>({secondary:{label:a("pwm_use_recovery_code_label.message"),action:()=>J.push("/change-primary-password-using-recovery-code"),id:"useRecoveryCode"},primary:{label:a("pwm_enter_password_again_code_label.message"),action:y,id:"enterPasswordAgain"}})),g=e,w=R(()=>{let b="";return p.value&&(b=a("pwm_unlock_vault_incorrect_pw_error.message")),b}),y=()=>{l.value=!l.value},k=()=>{d.value=!0,p.value=!1,r.verifyPrimaryPassword(c.value).then(b=>{if(!b)throw new Error("error.bad_password");r.checkVaultLockStatus(),p.value=!1}).then(()=>g("validation-success",c.value)).catch(b=>{p.value=!0,u.value+=1}).finally(()=>{d.value=!1})};return We(u,b=>{b===3&&(y(),u.value=0)}),(b,T)=>{const O=ve("i18n-t");return v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(a)("change_password_verify_header.message")),1),n("p",wn,h(s(a)(s(m))),1),n("p",null,[n("a",{onClick:y,"data-test":"forgot-primary-password-a"},h(s(a)("pwm_unlock_vault_forgot_primary_password_link.message")),1)])]),rightColumn:S(()=>[n("div",fn,[x(Pt,{class:"mt-10",id:"primary-password",label:s(a)("pwm_primary_pw_set_form_pw_label.message"),value:s(c),"onUpdate:value":T[1]||(T[1]=L=>pe(c)?c.value=L:null),disabled:s(d),errorMessage:s(w),wiggle:s(p),invalid:s(p),onInput:T[2]||(T[2]=L=>p.value=!1),onKeyup:It(k,["enter","native"]),showEye:"",focus:""},null,8,["label","value","disabled","errorMessage","wiggle","invalid"]),x(te,{class:"mt-15",label:s(a)("change_password_verify_button_label.message"),loading:s(d),disabled:s(d),id:"submitBtn",onClick:k},null,8,["label","loading","disabled"])])]),default:S(()=>[s(l)?(v(),I(ue,{key:0,"data-test":"verify-pw-help-modal",title:s(a)("pwm_unlock_vault_need_help_link.message"),buttons:s(_),onCancel:y},{default:S(()=>[x(O,{tag:"p",keypath:"pwm_verify_password_need_help_modal_text.message",scope:"global"},{pwm_contact_us_label:S(()=>[n("a",{onClick:T[0]||(T[0]=(...L)=>s(o)&&s(o)(...L)),"data-test":"contact-support"},h(s(a)("pwm_contact_us_label.message").toLowerCase()),1)]),_:1})]),_:1},8,["title","buttons"])):Z("",!0)]),_:1})}}}),yn={class:"accordion"},bn={class:"accordion-item"},kn={class:"accordion-content-box"},Oe=ae(W({__name:"Accordion",props:{title:{type:String,required:!0},value:{type:Boolean,required:!0}},emits:["update:value"],setup(t,{emit:e}){const a=e,o=t,r=E(o.value),i=()=>{r.value=!r.value,a("update:value",r.value)};return We(()=>o.value,p=>{r.value=p}),(p,l)=>(v(),P("div",yn,[n("div",bn,[n("div",{class:He(["accordion-header",s(r)&&"active"]),onClick:i},h(t.title),3),n("div",{class:He(["accordion-content",!s(r)&&"collapsed"])},[n("div",kn,[Ie(p.$slots,"accordion-desc",{},void 0,!0)])],2)])]))}}),[["__scopeId","data-v-844e4911"]]),Sn={class:"file-upload"},Cn={key:0,class:"file-uploading file-icon mb-10"},xn={key:1,class:"file-upload-success"},En=[(t=>(le("data-v-a89655d6"),t=t(),ce(),t))(()=>n("span",{class:"sr-only"},"Delete",-1))],Tn={class:"file-upload-error file-icon"},Mn={class:"error-message"},Pn=["name","accept"],An=ae(W({__name:"FileUpload",props:{name:{type:String,default:"file"},label:{type:String,default:""},buttonLabel:{type:String,default:"Choose File"},accept:{type:String,default:""},value:{type:[File,Object],default:null},uploading:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},errorMesage:{type:String,default:"Invalid file. Upload again."}},emits:["update:modelValue"],setup(t,{emit:e}){var m;const a=t,o=(m=fs())==null?void 0:m.uid.toString(),r=e,i=E(null),p=E(),l=()=>{const _=p.value.files[0];_&&_.type===a.accept?([i.value]=p.value.files,r("update:modelValue",i.value)):c()},c=()=>{i.value=null,r("update:modelValue",null)},d=()=>{var _;o&&((_=document.getElementById(o))==null||_.focus())},u=()=>{var _;o&&((_=document.getElementById(o))==null||_.blur())};return(_,g)=>(v(),P("div",Sn,[n("label",null,h(t.label),1),t.uploading?(v(),P("div",Cn,[rt(h(s(i).name),1),x(Ca,{class:"spinner",size:"15"})])):s(i)&&!t.invalid?(v(),P("div",xn,[rt(h(s(i).name),1),n("button",{onClick:c},En)])):s(i)&&t.invalid?(v(),P(F,{key:2},[n("div",Tn,h(s(i).name),1),n("p",Mn,h(t.errorMesage),1)],64)):Z("",!0),!s(i)||t.invalid?(v(),P("div",{key:3,class:"file-input",onMouseover:d,onMouseleave:u},[x(te,{label:t.buttonLabel,type:"secondary",id:s(o),size:"sm"},null,8,["label","id"]),n("input",{class:"upload",type:"file",onChange:l,id:"fileInput",name:t.name,accept:t.accept,ref_key:"theFile",ref:p},null,40,Pn)],32)):Z("",!0)]))}}),[["__scopeId","data-v-a89655d6"]]),$e=W({__name:"UploadLoginsFile",props:{platform:{type:String,default:"chrome"}},setup(t){const{t:e}=D(),a=t,o=E(null),r=E(!1),i=E(!1),p=()=>{o.value&&((c,d)=>{const u=new FileReader;u.onload=m=>{d(m.target.result)},u.readAsText(c)})(o.value,c=>{c&&l(c)})},l=c=>{let d=a.platform==="other_apps"||a.platform==="edge"?"chrome":a.platform;a.platform==="dashlane"&&(d="dashlanelogin"),r.value=!0,ys([c,d]).then(u=>{const m=u.length;u.filter(_=>_.error&&_.error!=="error.imported_document_already_exists").length>0?J.push({name:"ImportError",state:{logins:u,platform:a.platform}}):(J.push({path:"/import-success",query:{totalImports:m,platform:a.platform}}),i.value=!1)}).catch(()=>{i.value=!0}).finally(()=>{r.value=!1})};return(c,d)=>(v(),I(An,{id:"loginsUpload",modelValue:s(o),"onUpdate:modelValue":[d[0]||(d[0]=u=>pe(o)?o.value=u:null),p],label:s(e)("import_password_file.message"),buttonLabel:s(e)("import_logins_choose_file.message"),errorMesage:s(e)("import_password_error.message"),invalid:s(i),uploading:s(r),accept:"text/csv"},null,8,["modelValue","label","buttonLabel","errorMesage","invalid","uploading"]))}}),Ln={class:"import-express-vpn"},Rn=["innerHTML"],In={class:"step-icon"},On=["innerHTML"],$n=(t=>(le("data-v-de55c22e"),t=t(),ce(),t))(()=>n("hr",{class:"mt-30"},null,-1)),Hn={class:"card-footer mt-30"},Wn={class:"step-icon"},Nn=["innerHTML"],Un=ae(W({__name:"ImportExpressVpn",setup(t){const{t:e}=D(),a=E(!0),o=E(!1);return We([a,o],([r,i],[p,l])=>{r&&!p?o.value=!1:i&&!l&&(a.value=!1)}),(r,i)=>(v(),P("div",Ln,[n("p",null,h(s(e)("import_expressvpn_header.message")),1),n("p",{innerHTML:s(e)("import_expressvpn_important_header.message")},null,8,Rn),x(Oe,{value:s(a),"onUpdate:value":i[0]||(i[0]=p=>pe(a)?a.value=p:null),title:s(e)("import_expressvpn_exported_title.message"),"data-test":"export-data-accordion-one"},{"accordion-desc":S(()=>[x(oe,{class:"mb-20",content:s(e)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(),P(F,null,Q(3,p=>n("div",{class:"step",key:p},[n("div",In,h(p),1),n("p",{innerHTML:s(e)(`import_expressvpn_exported_step${p}.message`)},null,8,On)])),64)),$n,n("div",Hn,[x($e,{platform:"expressvpnkeys"})])]),_:1},8,["value","title"]),x(Oe,{value:s(o),"onUpdate:value":i[1]||(i[1]=p=>pe(o)?o.value=p:null),title:s(e)("import_expressvpn_need_to_export_title.message"),"data-test":"export-data-accordion-two"},{"accordion-desc":S(()=>[(v(),P(F,null,Q(9,p=>n("div",{class:"step",key:p},[n("div",Wn,h(p),1),n("p",{innerHTML:s(e)(`import_expressvpn_need_to_export_step${p}.message`)},null,8,Nn)])),64))]),_:1},8,["value","title"])]))}}),[["__scopeId","data-v-de55c22e"]]),Dn={class:"step-icon"},Kn=["innerHTML"],Jn={key:0,class:"sub mt-20"},jn={class:"sub-step"},Vn=(t=>(le("data-v-fba0454a"),t=t(),ce(),t))(()=>n("hr",{class:"mt-30 mb-30"},null,-1)),Bn={class:"card-footer"},qn={class:"step-icon"},Fn=["innerHTML","id"],Gn={class:"mt-30"},zn={class:"step-icon"},Yn=["innerHTML"],Zn=ae(W({__name:"ImportSafari",props:{passwordManager:{type:Object,required:!0}},setup(t){const{t:e}=D(),a=we(),o=E("macContainer"),r=E(!1),i=[{id:"macContainer",title:"Mac"},{id:"windowsContainer",title:"Windows"}],p=()=>{o.value="macContainer"},l=()=>{r.value=!0,Ot(()=>{const d=document.querySelector("#import_logins_safari_old_mac_step8");d==null||d.scrollIntoView({behavior:"smooth"})})},c=()=>window.open("https://support.apple.com/en-hk/HT201541","_blank");return ne(()=>{a.os!=="Mac"&&(o.value="windowsContainer")}),(d,u)=>{const m=ve("i18n-t");return v(),I(Ta,{value:s(o),"onUpdate:value":u[1]||(u[1]=_=>pe(o)?o.value=_:null),allTabs:i},{macContainer:S(()=>[s(r)?Z("",!0):(v(),I(oe,{key:0,class:"mt-30",content:s(e)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"])),(v(!0),P(F,null,Q(t.passwordManager.steps,_=>(v(),P("div",{class:"step",key:_},[n("div",Dn,h(_),1),n("div",null,[n("p",{innerHTML:s(e)(`import_logins_safari_mac_step${_}.message`)},null,8,Kn),_===4?(v(),P("ul",Jn,[n("li",jn,[x(m,{tag:"p",keypath:"import_logins_safari_mac_step4_extra.message",scope:"global"},{import_logins_update_safari_mac_text:S(()=>[n("a",{onClick:c},h(s(e)("import_logins_update_safari_mac_text.message")),1)]),import_logins_here:S(()=>[n("a",{onClick:l},h(s(e)("import_logins_here.message")),1)]),_:1})])])):Z("",!0)])]))),128)),Vn,n("div",Bn,[x($e,{platform:"safari"})]),x(Oe,{title:s(e)("import_logins_manual_instructions_for_macos.message"),value:s(r),"onUpdate:value":u[0]||(u[0]=_=>pe(r)?r.value=_:null)},{"accordion-desc":S(()=>[n("p",null,h(s(e)("import_logins_safari_you_are_running_an_old_version.message")),1),(v(!0),P(F,null,Q(t.passwordManager.steps+2,_=>(v(),P("div",{class:"step",key:_},[n("div",qn,h(_),1),n("p",{innerHTML:s(e)(`import_logins_safari_old_mac_step${_}.message`),id:`import_logins_safari_old_mac_step${_}`},null,8,Fn)]))),128))]),_:1},8,["title","value"])]),windowsContainer:S(()=>[n("p",Gn,h(s(e)("import_logins_icloud_for_windows.message")),1),n("ul",null,[n("li",null,[x(m,{tag:"p",keypath:"import_logins_if_you_have_a_mac.message",scope:"global"},{import_logins_if_you_have_a_mac_text:S(()=>[n("a",{onClick:p},h(s(e)("import_logins_if_you_have_a_mac_text.message")),1)]),_:1})]),n("li",null,h(s(e)("import_logins_if_you_do_not_have_a_mac.message")),1)]),(v(!0),P(F,null,Q(t.passwordManager.steps,_=>(v(),P("div",{class:"step",key:_},[n("div",zn,h(_),1),n("p",{innerHTML:s(e)(`import_logins_safari_windows_step${_}.message`)},null,8,Yn)]))),128))]),_:1},8,["value"])}}}),[["__scopeId","data-v-fba0454a"]]),Xn={class:"import-other-apps"},Qn=["innerHTML"],ei=(t=>(le("data-v-4133f39f"),t=t(),ce(),t))(()=>n("hr",null,null,-1)),ti={class:"mt-20"},ai=["innerHTML"],si={class:"step-icon"},ri=["innerHTML"],oi={key:0,class:"sub mt-20"},ni=ae(W({__name:"ImportOtherApps",props:{passwordManager:{type:Object,required:!0}},setup(t){const{t:e}=D(),{addAnchor:a}=X(),{getImportLoginSubStep:o}=it(),r=t,i=p=>o(p,r.passwordManager.subSteps);return(p,l)=>(v(),P("div",Xn,[x(oe,{class:"mt-30",content:s(e)("import_logins_other_apps_instructions_hint.message"),type:"warning"},null,8,["content"]),n("p",{class:"mt-30",innerHTML:s(a)("import_logins_other_apps_instructions_let_us_know_text.message","https://expressv.typeform.com/to/E3gAIsYS")},null,8,Qn),ei,n("h5",ti,h(s(e)("import_logins_other_apps_instructions_advanced_users_text.message")),1),n("p",{innerHTML:s(e)("import_logins_other_apps_instructions_advanced_users_p1.message")},null,8,ai),n("p",null,h(s(e)("import_logins_other_apps_instructions_advanced_users_p2.message")),1),(v(!0),P(F,null,Q(t.passwordManager.steps,c=>(v(),P("div",{class:"step",key:c},[n("div",si,h(c),1),n("div",null,[n("p",{innerHTML:s(e)(`import_logins_other_apps_instructions_step${c}.message`)},null,8,ri),i(c)?(v(),P("ul",oi,[(v(!0),P(F,null,Q(i(c),d=>(v(),P("li",{class:"sub-step",key:`${c}-${d}`},h(s(e)(`import_logins_other_apps_instructions_step${c}_sub${d}.message`)),1))),128))])):Z("",!0)])]))),128))]))}}),[["__scopeId","data-v-4133f39f"]]),vt=t=>(le("data-v-65a7d314"),t=t(),ce(),t),ii=["innerHTML"],li={class:"step-icon"},ci=["innerHTML"],pi=vt(()=>n("hr",{class:"mt-30"},null,-1)),di={class:"card-footer mt-30"},ui=["innerHTML"],_i={class:"step-icon"},mi=["innerHTML"],gi=vt(()=>n("hr",{class:"mt-30"},null,-1)),hi={class:"card-footer mt-30"},vi=["innerHTML"],wi={class:"step-icon"},fi=["innerHTML"],yi=vt(()=>n("hr",{class:"mt-30"},null,-1)),bi={class:"card-footer mt-30"},ki=["innerHTML"],Si={class:"step-icon"},Ci=["innerHTML"],xi=vt(()=>n("hr",{class:"mt-30"},null,-1)),Ei={class:"card-footer mt-30"},Ti=ae(W({__name:"ImportOnePassword",setup(t){const e=we(),{t:a}=D(),o=E("macContainer"),r=[{id:"macContainer",title:"Mac"},{id:"windowsContainer",title:"Windows"}],i=E(!1),p=E(!0),l=E(!1),c=E(!0);return ne(()=>{e.os==="Windows"&&(o.value="windowsContainer")}),We([i,p],([d,u],[m,_])=>{d&&!m?p.value=!1:u&&!_&&(i.value=!1)}),We([l,c],([d,u],[m,_])=>{d&&!m?c.value=!1:u&&!_&&(l.value=!1)}),(d,u)=>(v(),I(Ta,{value:s(o),"onUpdate:value":u[4]||(u[4]=m=>pe(o)?o.value=m:null),allTabs:r},{macContainer:S(()=>[x(Oe,{value:s(i),"onUpdate:value":u[0]||(u[0]=m=>pe(i)?i.value=m:null),title:s(a)("import_logins_1password_1pw7_header.message")},{"accordion-desc":S(()=>[n("p",{innerHTML:s(a)("import_logins_1password_import_limitation_header.message")},null,8,ii),x(oe,{class:"mt-20 mb-20",content:s(a)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(),P(F,null,Q(8,m=>n("div",{class:"step",key:m},[n("div",li,h(m),1),n("p",{innerHTML:s(a)(`import_logins_1password_1pw7_mac_step${m}.message`)},null,8,ci)])),64)),pi,n("div",di,[x($e,{platform:"safari"})])]),_:1},8,["value","title"]),x(Oe,{value:s(p),"onUpdate:value":u[1]||(u[1]=m=>pe(p)?p.value=m:null),title:s(a)("import_logins_1password_1pw8_header.message")},{"accordion-desc":S(()=>[n("p",{innerHTML:s(a)("import_logins_1password_import_limitation_header.message")},null,8,ui),x(oe,{class:"mt-20 mb-20",content:s(a)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(),P(F,null,Q(7,m=>n("div",{class:"step",key:m},[n("div",_i,h(m),1),n("p",{innerHTML:s(a)(`import_logins_1password_1pw8_mac_step${m}.message`)},null,8,mi)])),64)),gi,n("div",hi,[x($e,{platform:"OnePassword8"})])]),_:1},8,["value","title"])]),windowsContainer:S(()=>[x(Oe,{value:s(l),"onUpdate:value":u[2]||(u[2]=m=>pe(l)?l.value=m:null),title:s(a)("import_logins_1password_1pw7_header.message")},{"accordion-desc":S(()=>[n("p",{innerHTML:s(a)("import_logins_1password_import_limitation_header.message")},null,8,vi),x(oe,{class:"mt-20 mb-20",content:s(a)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(),P(F,null,Q(7,m=>n("div",{class:"step",key:m},[n("div",wi,h(m),1),n("p",{innerHTML:s(a)(`import_logins_1password_1pw7_win_step${m}.message`)},null,8,fi)])),64)),yi,n("div",bi,[x($e,{platform:"OnePassword7Windows"})])]),_:1},8,["value","title"]),x(Oe,{value:s(c),"onUpdate:value":u[3]||(u[3]=m=>pe(c)?c.value=m:null),title:s(a)("import_logins_1password_1pw8_header.message")},{"accordion-desc":S(()=>[n("p",{innerHTML:s(a)("import_logins_1password_import_limitation_header.message")},null,8,ki),x(oe,{class:"mt-20 mb-20",content:s(a)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(),P(F,null,Q(7,m=>n("div",{class:"step",key:m},[n("div",Si,h(m),1),n("p",{innerHTML:s(a)(`import_logins_1password_1pw8_win_step${m}.message`)},null,8,Ci)])),64)),xi,n("div",Ei,[x($e,{platform:"OnePassword8"})])]),_:1},8,["value","title"])]),_:1},8,["value"]))}}),[["__scopeId","data-v-65a7d314"]]),Mi={class:"import-generic"},Pi=["innerHTML"],Ai={class:"step-icon"},Li=["innerHTML"],Ri=ae(W({__name:"ImportGeneric",props:{passwordManager:{type:Object,required:!0}},setup(t){const{t:e}=D(),{detectBrowser:a}=X(),o=a(),r=t,i=R(()=>!["chrome","edge","bitwarden"].includes(r.passwordManager.id)),p=c=>{var d;c.target&&c.target.id==="open-pw-tab"&&chrome.tabs.create({url:`${(d=r.passwordManager)==null?void 0:d.id}://settings/passwords`})},l=c=>{var m,_;let d=`<a id='open-pw-tab'>${e(`import_${(m=r.passwordManager)==null?void 0:m.id}_password_settings.message`)}</a>`;["chrome","edge"].includes(r.passwordManager.id)&&r.passwordManager.id!==o&&(d=e(`import_${(_=r.passwordManager)==null?void 0:_.id}_password_settings.message`));let u=`import_logins_step${c}`;return["dashlane","lastpass","bitwarden"].includes(r.passwordManager.id)&&(u+=`_${r.passwordManager.id}`),e(`${u}.message`,{PASSWORD_SETTINGS:d,ICON:`<img
            class="icon text-wrapped-icon"
            src="${r.passwordManager.id==="edge"?"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23001D2F'%20fill-rule='evenodd'%20d='M12,10%20C13.1045695,10%2014,10.8954305%2014,12%20C14,13.1045695%2013.1045695,14%2012,14%20C10.8954305,14%2010,13.1045695%2010,12%20C10,10.8954305%2010.8954305,10%2012,10%20Z%20M19,10%20C20.1045695,10%2021,10.8954305%2021,12%20C21,13.1045695%2020.1045695,14%2019,14%20C17.8954305,14%2017,13.1045695%2017,12%20C17,10.8954305%2017.8954305,10%2019,10%20Z%20M5,10%20C6.1045695,10%207,10.8954305%207,12%20C7,13.1045695%206.1045695,14%205,14%20C3.8954305,14%203,13.1045695%203,12%20C3,10.8954305%203.8954305,10%205,10%20Z'/%3e%3c/svg%3e":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23001D2F'%20fill-rule='evenodd'%20d='M12,10%20C13.1045695,10%2014,10.8954305%2014,12%20C14,13.1045695%2013.1045695,14%2012,14%20C10.8954305,14%2010,13.1045695%2010,12%20C10,10.8954305%2010.8954305,10%2012,10%20Z%20M19,10%20C20.1045695,10%2021,10.8954305%2021,12%20C21,13.1045695%2020.1045695,14%2019,14%20C17.8954305,14%2017,13.1045695%2017,12%20C17,10.8954305%2017.8954305,10%2019,10%20Z%20M5,10%20C6.1045695,10%207,10.8954305%207,12%20C7,13.1045695%206.1045695,14%205,14%20C3.8954305,14%203,13.1045695%203,12%20C3,10.8954305%203.8954305,10%205,10%20Z'%20transform='rotate(-90%2012%2012)'/%3e%3c/svg%3e"}"
            viewbox="0 0 24 24"
            width="24"
            height="24"
            />`,HOST:r.passwordManager.text})};return(c,d)=>(v(),P("div",Mi,[s(i)?(v(),P("p",{key:0,innerHTML:s(e)(`import_logins_instructions_header_${t.passwordManager.id}.message`)},null,8,Pi)):Z("",!0),x(oe,{class:"mt-30",content:s(e)("import_logins_estimated_time.message"),type:"info",className:"info-estimated-time"},null,8,["content"]),(v(!0),P(F,null,Q(t.passwordManager.steps,u=>(v(),P("div",{class:"step",key:u},[n("div",Ai,h(u),1),n("p",{innerHTML:l(u),onClick:p},null,8,Li)]))),128))]))}}),[["__scopeId","data-v-31305efa"]]),Ii={class:"import-instructions"},Oi={class:"card-header"},$i={"data-test":"import-instructions-test-title"},Hi=n("hr",{class:"mt-30 mb-30"},null,-1),Wi={class:"card-footer"},Ni=W({__name:"ImportInstructions",props:{passwordManager:{type:Object,required:!0}},emits:["back"],setup(t,{emit:e}){const{t:a}=D(),o=e,r=t,i=R(()=>{let l=a("import_logins_back.message",{HOST:r.passwordManager.text});return r.passwordManager.id==="other_apps"&&(l=a("import_logins_other_apps.message")),l}),p=l=>{o("back",l)};return(l,c)=>(v(),P("div",Ii,[n("div",Oi,[n("div",{class:"icon arrow-left",onClick:p}),n("p",$i,h(s(i)),1)]),t.passwordManager.id==="icloud_keychain"?(v(),I(Zn,{key:0,passwordManager:t.passwordManager},null,8,["passwordManager"])):t.passwordManager.id==="one-password"?(v(),I(Ti,{key:1})):t.passwordManager.id==="expressvpn"?(v(),I(Un,{key:2})):(v(),P(F,{key:3},[t.passwordManager.id==="other_apps"?(v(),I(ni,{key:0,passwordManager:t.passwordManager},null,8,["passwordManager"])):["chrome","edge","lastpass","dashlane","bitwarden"].includes(t.passwordManager.id)?(v(),I(Ri,{key:1,passwordManager:t.passwordManager},null,8,["passwordManager"])):Z("",!0),Hi,n("div",Wi,[x($e,{platform:t.passwordManager.id},null,8,["platform"])])],64))]))}}),Ja=t=>(le("data-v-42cf1eaa"),t=t(),ce(),t),Ui=Ja(()=>n("br",null,null,-1)),Di={class:"card"},Ki={key:0,id:"choosePasswordManager"},Ji={class:"import-login-items"},ji=["onClick"],Vi={"data-test":"icon-name"},Bi=Ja(()=>n("div",{class:"icon chevron-right"},null,-1)),qi=W({__name:"ImportLogins",setup(t){const{t:e}=D(),{openGeneralSupportPage:a}=X(),o=me(),r=[{id:"chrome",text:"Chrome",domain:"chrome.com",steps:7},{id:"one-password",text:"1Password",domain:"1password.com"},{id:"dashlane",text:"Dashlane",domain:"dashlane.com",steps:9},{id:"lastpass",text:"LastPass",domain:"lastpass.com",steps:7},{id:"edge",text:"Edge",domain:"microsoft.com",steps:7},{id:"icloud_keychain",text:e("icloud_keychain.message"),domain:"apple.com",steps:6},{id:"bitwarden",text:"Bitwarden",domain:"bitwarden.com",steps:9},{id:"other_apps",text:e("import_logins_other.message"),domain:"misc",steps:8,subSteps:[{index:5,total:4},{index:6,total:4}]}],i=E(null),p=R(()=>o.isVaultUnlocked),l=()=>{i.value={id:"expressvpn",text:e("import_expressvpn.message"),domain:"expressvpn.com"}},c=()=>{J.push("/add-logins")},d=()=>{i.value=null};return ne(()=>{o.checkVaultLockStatus()}),(u,m)=>{const _=ve("i18n-t");return s(p)?(v(),I(Y,{key:1},{leftColumn:S(()=>[n("h3",null,h(s(e)("import_logins_header.message")),1),n("p",null,h(s(e)("import_logins_choose_a_password_manager_service.message")),1),x(_,{tag:"p",keypath:"imports_logins_you_can_also_choose_to.message",scope:"global"},{ROUTER_LINK:S(()=>[n("a",{onClick:c,"data-test":"add-logins"},h(s(e)("import_logins_add_your_password_link.message")),1)]),_:1}),x(_,{tag:"p",keypath:"import_logins_contact_support_text.message",scope:"global"},{import_logins_need_help:S(()=>[n("b",null,h(s(e)("import_logins_need_help.message")),1)]),import_logins_contact_support:S(()=>[Ui,n("a",{onClick:m[0]||(m[0]=(...g)=>s(a)&&s(a)(...g)),"data-test":"contact-support"},h(s(e)("import_logins_contact_support.message")),1)]),_:1})]),rightColumn:S(()=>[n("div",Di,[s(i)?(v(),I(Ni,{key:1,passwordManager:s(i),onBack:d},null,8,["passwordManager"])):(v(),P("div",Ki,[n("h5",null,h(s(e)("import_from_a_service.message")),1),n("div",Ji,[(v(),P(F,null,Q(r,g=>n("div",{class:"import-item",onClick:w=>{return y=g,void(i.value=y);var y}},[x(Ea,{domain:g.domain,title:g.id,size:"sm"},null,8,["domain","title"]),n("p",Vi,h(g.text),1),Bi],8,ji)),64))]),x(_,{tag:"p",keypath:"import_logins_from_another_express_account_text.message",scope:"global"},{import_logins_from_another_express_account_link:S(()=>[n("a",{onClick:l,"data-test":"import-expressvpn"},h(s(e)("import_logins_from_another_express_account_link.message")),1)]),_:1})]))])]),_:1})):(v(),I(mt,{key:0}))}}}),Fi=ae(qi,[["__scopeId","data-v-42cf1eaa"]]),Gi={class:"mt-30"},zi={class:"step-icon"},Yi={class:"mt-30"},Zi={class:"mt-30"},Xi=n("br",null,null,-1),Qi={class:"card"},el={class:"table table-info table-info-6-col failed-imports-table"},tl={scope:"col"},al={scope:"col"},sl={scope:"row"},rl={class:"th-heading"},ol={class:"td-text status"},nl={class:"status-failed"},il={key:0},ll={key:0,class:"mt-40 text-center"},cl={key:1,class:"successful-imports-table"},pl={class:"table table-info table-info-6-col"},dl={scope:"col"},ul={scope:"col"},_l={scope:"row"},ml={class:"th-heading"},gl={class:"td-text status"},hl={class:"status-success"},vl=W({__name:"ImportError",setup(t){const{t:e}=D(),{sendTelemetry:a,openGeneralSupportPage:o}=X(),r=E(!1),i=E([]),p=R(()=>i.value.filter(b=>!b.error||b.error==="error.imported_document_already_exists")),l=R(()=>p.value.length),c=R(()=>i.value.length??0),d=R(()=>i.value.filter(b=>b.error&&b.error!=="error.imported_document_already_exists")),u=R(()=>d.value.length),m=R(()=>u.value===c.value),_=R(()=>m.value?3:4),g=R(()=>m.value?"total_failure":"incomplete"),w=b=>e(b,{TOTAL_GOOD_LOGINS:l.value,TOTAL_LOGINS:c.value,TOTAL_BAD_LOGINS:u.value}),y=b=>{let T=b;switch(b){case"error.limit.max_login_domain_len":T=e("import_logins_error_table_domain_too_long.message");break;case"error.limit.max_login_username_len":T=e("import_logins_error_table_username_too_long.message");break;case"error.limit.max_title_len":T=e("import_logins_error_table_name_too_long.message");break;case"error.limit.max_login_password_len":T=e("import_logins_error_table_password_too_long.message");break;case"error.limit.max_login_note_len":T=e("import_logins_error_table_note_too_long.message")}return T},k=()=>{J.push("/import-logins")};return ne(()=>{history.state&&history.state.logins&&(i.value=history.state.logins,a(`pwm_onboard_import_result_${m.value?"all":"some"}_error_${history.state.platform}`))}),(b,T)=>{const O=ve("i18n-t");return v(),I(Y,{class:"import-error"},{leftColumn:S(()=>[n("h3",null,h(s(e)(`import_logins_error_${s(g)}_header.message`)),1),x(oe,{class:"mt-10",content:w("import_logins_error_number_of_failed_logins_hint.message"),type:s(m)?"danger":"warning"},null,8,["content","type"]),n("p",Gi,h(s(e)(`import_logins_error_${s(g)}_reimport_header.message`)),1),(v(!0),P(F,null,Q(s(_),L=>(v(),P("div",{class:"step",key:L},[n("div",zi,h(L),1),n("p",null,h(s(e)(`import_logins_error_${s(g)}_reimport_step_${L}.message`)),1)]))),128)),n("div",Yi,[x(te,{class:"auto",id:"importLoginsAgain",label:s(e)("import_logins_error_import_again_btn.message"),type:"secondary",onClick:k},null,8,["label"])]),n("div",Zi,[x(O,{tag:"p",keypath:"import_logins_contact_support_text.message",scope:"global"},{import_logins_need_help:S(()=>[n("b",null,h(s(e)("import_logins_need_help.message")),1)]),import_logins_contact_support:S(()=>[Xi,n("a",{onClick:T[0]||(T[0]=(...L)=>s(o)&&s(o)(...L)),"data-test":"contact-support"},h(s(e)("import_logins_contact_support.message")),1)]),_:1})])]),rightColumn:S(()=>[n("div",Qi,[n("h5",null,h(w("import_logins_error_failed_table_header.message")),1),n("table",el,[n("thead",null,[n("tr",null,[n("th",tl,h(s(e)("import_logins_error_table_login_column.message")),1),n("th",al,h(s(e)("import_logins_error_table_status_column.message")),1)])]),n("tbody",null,[(v(!0),P(F,null,Q(s(d),L=>(v(),P("tr",null,[n("th",sl,[n("p",rl,h(L.title?L.title:s(e)("import_logins_error_untitled.message")),1)]),n("td",null,[n("div",ol,[n("p",nl,h(s(e)("import_logins_error_table_failed_status.message")),1),L.error?(v(),P("p",il,h(y(L.error)),1)):Z("",!0)])])]))),256))])]),s(m)?Z("",!0):(v(),P("div",ll,[s(r)?(v(),P("div",cl,[n("h5",null,h(w("import_logins_error_success_table_header.message")),1),n("table",pl,[n("thead",null,[n("tr",null,[n("th",dl,h(s(e)("import_logins_error_table_login_column.message")),1),n("th",ul,h(s(e)("import_logins_error_table_status_column.message")),1)])]),n("tbody",null,[(v(!0),P(F,null,Q(s(p),L=>(v(),P("tr",null,[n("th",_l,[n("p",ml,h(L.title?L.title:s(e)("import_logins_error_untitled.message")),1)]),n("td",null,[n("div",gl,[n("p",hl,h(s(e)("import_logins_error_table_success_status.message")),1)])])]))),256))])])])):(v(),I(te,{key:0,class:"auto",id:"seeGoodImports",label:w("import_logins_error_table_see_success_logins_btn.message"),type:"secondary",onClick:T[1]||(T[1]=L=>r.value=!0)},null,8,["label"]))]))])]),_:1})}}}),wl={class:"mt-30","data-test":"import-success-p1"},fl={class:"actions-wrapper mt-30"},yl=["src"],bl=W({__name:"ImportSuccess",setup(t){const{t:e}=D(),a=gt(),{setImportedLoginPlatform:o}=we(),{sendTelemetry:r,openGeneralSupportPage:i}=X(),p=R(()=>a.query.totalImports),l=R(()=>a.query.platform),c=()=>{chrome.tabs.getCurrent(function(u){chrome.tabs.remove(u.id)})},d=()=>{J.push("/import-logins")};return ne(()=>{l.value&&(o(l.value),r(`pwm_onboard_import_result_no_error_${l.value}`))}),(u,m)=>{const _=ve("i18n-t");return v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("import_logins_success_header.message")),1),x(oe,{class:"mt-10",content:s(e)("import_logins_success_hint.message",{TOTAL_LOGINS:s(p)}),type:"success"},null,8,["content"]),n("p",wl,h(s(e)("import_logins_success_text.message")),1),x(_,{tag:"p",keypath:"import_logins_success_text_2.message",scope:"global","data-test":"import-success-p2"},{contact_support_anchor:S(()=>[n("a",{onClick:m[0]||(m[0]=(...g)=>s(i)&&s(i)(...g)),"data-test":"contact-support"},h(s(e)("contact_support_anchor.message")),1)]),_:1}),n("div",fl,[x(te,{class:"auto",id:"closeTab",label:s(e)("import_logins_success_close.message"),onClick:c},null,8,["label"]),x(te,{class:"auto mt-20",id:"importLogins",label:s(e)("import_logins_success_import_more.message"),type:"secondary",onClick:d},null,8,["label"])])]),rightColumn:S(()=>[n("img",{src:s(Fe)},null,8,yl)]),_:1})}}}),kl={class:"card"},Sl={class:"step-icon"},Cl=W({__name:"ExportData",setup(t){const e=me(),{t:a}=D(),o=E(!1),r=R(()=>e.isVaultUnlocked),i=async()=>{o.value=!0;const l=await bs();p(l),J.push("/export-success")},p=l=>{const c=new Blob([l],{type:"text/csv"}),d=document.createElement("a");d.href=URL.createObjectURL(c),d.download="expressvpn_data.csv",d.click(),URL.revokeObjectURL(d.href),o.value=!1};return ne(()=>{e.checkVaultLockStatus()}),(l,c)=>s(r)?(v(),I(Y,{key:1},{leftColumn:S(()=>[n("h3",null,h(s(a)("export_data_header.message")),1),n("p",null,h(s(a)("export_data_as_csv_file_label.message")),1),x(oe,{class:"mt-30",content:s(a)("export_data_as_csv_file_hint.message"),type:"warning"},null,8,["content"])]),rightColumn:S(()=>[n("div",kl,[(v(),P(F,null,Q(2,d=>n("div",{class:"step",key:d},[n("div",Sl,h(d),1),n("p",null,h(s(a)(`export_data_as_csv_step_desc${d}.message`)),1)])),64)),x(te,{class:"mt-30",label:s(a)("export_data_as_csv_button.message"),loading:s(o),disabled:s(o),id:"submitBtn",onClick:i},null,8,["label","loading","disabled"])])]),_:1})):(v(),I(mt,{key:0,type:"exportData"}))}}),xl={class:"mt-30","data-test":"export_success_p1"},El=["src"],Tl=W({__name:"ExportSuccess",setup(t){const{t:e}=D();return(a,o)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("export_data_success_header.message")),1),x(oe,{class:"mt-10",content:s(e)("export_data_success_hint.message"),type:"success"},null,8,["content"]),n("p",xl,h(s(e)("export_data_success_label.message")),1)]),rightColumn:S(()=>[n("img",{class:"mt-60",src:s(Fe)},null,8,El)]),_:1}))}}),Ml={class:"card"},Pl=W({__name:"VerifyRecoveryCode",emits:["validation-success"],setup(t,{emit:e}){const{t:a}=D(),o=e,r=E(""),i=E(!1),p=E(!1),l=()=>{i.value=!0,Qa({recoveryCode:r.value}).then(()=>{o("validation-success",r.value)}).catch(()=>{p.value=!0}).finally(()=>{i.value=!1})};return(c,d)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(a)("use_recovery_code_header.message")),1),n("p",null,h(s(a)("use_recovery_code_text.message")),1)]),rightColumn:S(()=>[n("div",Ml,[x(xa,{class:"mt-10",id:"recoveryCode",value:s(r),"onUpdate:value":d[0]||(d[0]=u=>pe(r)?r.value=u:null),label:s(a)("use_recovery_code_input_label.message"),disabled:s(i),errorMessage:s(a)("use_recovery_code_incorrect_code_error.message"),wiggle:s(p),invalid:s(p),onInput:d[1]||(d[1]=u=>p.value=!1),onKeyup:It(l,["enter","native"])},null,8,["value","label","disabled","errorMessage","wiggle","invalid"]),x(te,{class:"mt-15",label:s(a)("enter_label.message"),loading:s(i),disabled:s(i),id:"submitBtn",onClick:l},null,8,["label","loading","disabled"])])]),_:1}))}}),Al={"data-test":"change-pwd-instructions"},Ll={slot:"modals"},ja=W({__name:"ChangePassword",props:{changePasswordMethod:{type:Function}},setup(t){const{t:e}=D(),{openGeneralSupportPage:a}=X(),o=t,r=we(),i=E(!1),p=E(!1);R(()=>r.currentInfo?`${r.currentInfo.website_url}/support/troubleshooting/password-manager-create-strong-primary-password`:"");const l=R(()=>({primary:{label:e("pwm_primary_pw_modal_generic_error_btn_primary.message"),action:c,id:"try_again_button"},secondary:{label:e("pwm_contact_us_label.message"),action:a,id:"contact_us_button"}})),c=()=>{i.value=!1},d=u=>{p.value=!0,o.changePasswordMethod(u).then(()=>{J.push("/change-primary-password-success")}).catch(m=>{i.value=!0}).finally(()=>{p.value=!1})};return(u,m)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("change_password_set_new_header.message")),1),n("p",Al,h(s(e)("pwm_primary_pw_set_new_text.message")),1)]),rightColumn:S(()=>[x(Wa,{"learn-more-label":"pwm_primary_pw_set_new_learn.message","feedback-empty-label":"primary_password_strength_new_empty",isSaving:s(p),onSetPassword:d},null,8,["learn-more-label","isSaving"])]),default:S(()=>[n("template",Ll,[s(i)?(v(),I(ue,{key:0,title:s(e)("pwm_primary_pw_modal_generic_error_header.message"),buttons:s(l),id:"generic-error-modal",onClose:c},{default:S(()=>[n("p",null,h(s(e)("pwm_primary_pw_modal_generic_error_text.message")),1)]),_:1},8,["title","buttons"])):Z("",!0)])]),_:1}))}}),Rl=W({__name:"ChangePasswordWithRecoveryCode",setup(t){const e=E(!1),a=E(""),o=i=>{e.value=!0,a.value=i},r=async i=>await es({recoveryCode:a.value,newMasterPassword:i});return(i,p)=>s(e)?(v(),I(ja,{key:1,changePasswordMethod:r})):(v(),I(Pl,{key:0,onValidationSuccess:o}))}}),Il={class:"mt-30"},Ol=["src"],$l={"data-test":"title"},Hl={"data-test":"p2"},Wl=["src"],Nl=["innerHTML"],Ul={class:"app-not-installed"},Dl=["src"],Kl={class:"mt-30"},Jl=["innerHTML"],jl=["src"],Vl=[{path:"/",redirect:"/welcome"},{path:"/welcome",component:Kr,meta:{accountSetup:!0}},{path:"/set-primary-password",component:ao,meta:{accountSetup:!0}},{path:"/setup-completed",component:Zo},{path:"/change-primary-password",component:W({__name:"ChangePasswordWithPrimaryPassword",setup(t){const e=E(""),a=E(!1),o=async i=>{await ts({masterPassword:e.value,newMasterPassword:i})},r=i=>{a.value=!0,e.value=i};return(i,p)=>s(a)?(v(),I(ja,{key:1,"data-test":"change-password",changePasswordMethod:o})):(v(),I(mt,{key:0,"data-test":"verify-password",type:"changePassword",onValidationSuccess:r}))}})},{path:"/change-primary-password-success",component:W({__name:"ChangePasswordSuccess",setup(t){const{t:e}=D();return(a,o)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("change_password_success_header.message")),1),x(oe,{class:"mt-10",content:s(e)("change_password_success_hint.message"),type:"success"},null,8,["content"]),n("p",Il,h(s(e)("change_password_success_text.message")),1)]),rightColumn:S(()=>[n("img",{class:"mt-60",src:s(Fe)},null,8,Ol)]),_:1}))}})},{path:"/change-primary-password-using-recovery-code",component:Rl},{path:"/reset-recovery-code",component:W({__name:"ResetRecoveryCode",setup(t){const{t:e}=D(),a=E(!1),o=E(""),r=E(!1),i=E(!1),p=E(""),l=d=>{p.value=d,a.value=!0,r.value=!0,ha().then(u=>{if(!u)throw new Error("Recovery key is undefined");o.value=u}).finally(()=>{r.value=!1})},c=()=>{i.value=!0,as({masterPassword:p.value,newRecoveryCode:o.value}).then(()=>{J.push("/reset-recovery-code-success")}).finally(()=>{i.value=!1})};return(d,u)=>{const m=ve("i18n-t");return!s(a)||s(r)?(v(),I(mt,{key:0,"data-test":"verify-password",type:"resetRecoveryCode",onValidationSuccess:l})):(v(),I(Y,{key:1},{leftColumn:S(()=>[n("h3",$l,h(s(e)("pwm_reset_recovery_code_header.message")),1),x(m,{keypath:"pwm_reset_recovery_code_text.message",scope:"global",tag:"p"},{pwm_reset_recovery_code_text_bold:S(()=>[n("b",null,h(s(e)("pwm_reset_recovery_code_text_bold.message")),1)]),_:1})]),rightColumn:S(()=>[x(Na,{recoveryCode:s(o),loading:s(i),onContinueConfirm:c},null,8,["recoveryCode","loading"])]),_:1}))}}})},{path:"/reset-recovery-code-success",component:W({__name:"ResetRecoveryCodeSuccess",setup(t){const{t:e}=D();return(a,o)=>{const r=ve("i18n-t");return v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("change_password_success_header.message")),1),x(oe,{class:"mt-10",content:s(e)("pwm_reset_recovery_code_success_hint.message"),type:"success","data-test":"hint"},null,8,["content"]),x(r,{class:"mt-30",keypath:"pwm_reset_recovery_code_success_p1.message",scope:"global",tag:"p","data-test":"p1"},{pwm_reset_recovery_code_success_p1_bold:S(()=>[n("b",null,h(s(e)("pwm_reset_recovery_code_success_p1_bold.message")),1)]),_:1}),n("p",Hl,h(s(e)("pwm_reset_recovery_code_success_p2.message")),1)]),rightColumn:S(()=>[n("img",{class:"mt-60",src:s(Fe)},null,8,Wl)]),_:1})}}})},{path:"/help-improve",component:Oo},{path:"/recovery-code",component:fo,meta:{accountSetup:!0}},{path:"/verify-account",component:Jo,meta:{deviceValidation:!0,accountSetup:!0}},{path:"/verify-account-code",component:Po,meta:{accountSetup:!0}},{path:"/account-verified",component:tn},{path:"/add-logins",component:vn},{path:"/import-logins",component:Fi},{path:"/import-error",name:"ImportError",component:vl},{path:"/import-success",component:bl},{path:"/export-data",component:Cl},{path:"/export-success",component:Tl},{path:"/business-account",component:W({__name:"BusinessAccount",setup(t){const{t:e}=D();return(a,o)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("business_account_header.message")),1),n("p",null,h(s(e)("business_account_p1.message")),1),x(oe,{class:"mt-30",content:s(e)("business_account_hint.message"),className:"info-alert-circle",type:"info"},null,8,["content"]),n("p",{class:"mt-30",innerHTML:s(e)("business_account_p2.message")},null,8,Nl)]),rightColumn:S(()=>[n("div",Ul,[n("img",{src:s(Ut)},null,8,Dl)])]),_:1}))}})},{path:"/subscription-keys-unavailable",component:ae(W({__name:"SubscriptionKeysUnavailable",setup(t){const{t:e}=D(),{addAnchor:a}=X();return(o,r)=>(v(),I(Y,null,{leftColumn:S(()=>[n("h3",null,h(s(e)("keys_not_included_header.message")),1),n("p",Kl,h(s(e)("keys_not_included_hint.message")),1),n("p",{class:"mt-30",innerHTML:s(a)("keys_not_included_p.message","support"),id:"contactSupport"},null,8,Jl)]),rightColumn:S(()=>[n("img",{src:s(Ut)},null,8,jl)]),_:1}))}}),[["__scopeId","data-v-f7f2bfc2"]])}],J=function(t){const e=Cr(t.routes,t),a=t.parseQuery||Tr,o=t.stringifyQuery||Xt,r=t.history,i=et(),p=et(),l=et(),c=ms(Me);let d=Me;je&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bt.bind(null,f=>""+f),m=bt.bind(null,lr),_=bt.bind(null,ot);function g(f,A){if(A=V({},A||c.value),typeof f=="string"){const N=St(a,f,A.path),se=e.resolve({path:N.path},A),G=r.createHref(N.fullPath);return V(N,se,{params:_(se.params),hash:ot(N.hash),redirectedFrom:void 0,href:G})}let C;if(f.path!=null)C=V({},f,{path:St(a,f.path,A.path).path});else{const N=V({},f.params);for(const se in N)N[se]==null&&delete N[se];C=V({},f,{params:m(N)}),A.params=m(A.params)}const M=e.resolve(C,A),q=f.hash||"";M.params=u(_(M.params));const j=function(N,se){const G=se.query?N(se.query):"";return se.path+(G&&"?")+G+(se.hash||"")}(o,V({},f,{hash:(B=q,$t(B).replace(La,"{").replace(Ra,"}").replace(Aa,"^")),path:M.path}));var B;const U=r.createHref(j);return V({fullPath:j,hash:q,query:o===Xt?Mr(f.query):f.query||{}},M,{redirectedFrom:void 0,href:U})}function w(f){return typeof f=="string"?St(a,f,c.value.path):V({},f)}function y(f,A){if(d!==f)return qe(8,{from:A,to:f})}function k(f){return T(f)}function b(f){const A=f.matched[f.matched.length-1];if(A&&A.redirect){const{redirect:C}=A;let M=typeof C=="function"?C(f):C;return typeof M=="string"&&(M=M.includes("?")||M.includes("#")?M=w(M):{path:M},M.params={}),V({query:f.query,hash:f.hash,params:M.path!=null?{}:f.params},M)}}function T(f,A){const C=d=g(f),M=c.value,q=f.state,j=f.force,B=f.replace===!0,U=b(C);if(U)return T(V(w(U),{state:typeof U=="object"?V({},q,U.state):q,force:j,replace:B}),A||C);const N=C;let se;return N.redirectedFrom=A,!j&&function(G,Ee,Le){const Te=Ee.matched.length-1,Re=Le.matched.length-1;return Te>-1&&Te===Re&&Ve(Ee.matched[Te],Le.matched[Re])&&Ia(Ee.params,Le.params)&&G(Ee.query)===G(Le.query)&&Ee.hash===Le.hash}(o,M,C)&&(se=qe(16,{to:N,from:M}),Ue(M,M,!0,!1)),(se?Promise.resolve(se):K(N,M)).catch(G=>ke(G)?ke(G,2)?G:Ye(G):ze(G,N,M)).then(G=>{if(G){if(ke(G,2))return T(V({replace:B},w(G.to),{state:typeof G.to=="object"?V({},q,G.to.state):q,force:j}),A||N)}else G=H(N,M,!0,B,q);return $(N,M,G),G})}function O(f,A){const C=y(f,A);return C?Promise.reject(C):Promise.resolve()}function L(f){const A=De.values().next().value;return A&&typeof A.runWithContext=="function"?A.runWithContext(f):f()}function K(f,A){let C;const[M,q,j]=function(U,N){const se=[],G=[],Ee=[],Le=Math.max(N.matched.length,U.matched.length);for(let Te=0;Te<Le;Te++){const Re=N.matched[Te];Re&&(U.matched.find(ft=>Ve(ft,Re))?G.push(Re):se.push(Re));const wt=U.matched[Te];wt&&(N.matched.find(ft=>Ve(ft,wt))||Ee.push(wt))}return[se,G,Ee]}(f,A);C=Et(M.reverse(),"beforeRouteLeave",f,A);for(const U of M)U.leaveGuards.forEach(N=>{C.push(Ae(N,f,A))});const B=O.bind(null,f,A);return C.push(B),be(C).then(()=>{C=[];for(const U of i.list())C.push(Ae(U,f,A));return C.push(B),be(C)}).then(()=>{C=Et(q,"beforeRouteUpdate",f,A);for(const U of q)U.updateGuards.forEach(N=>{C.push(Ae(N,f,A))});return C.push(B),be(C)}).then(()=>{C=[];for(const U of j)if(U.beforeEnter)if(_e(U.beforeEnter))for(const N of U.beforeEnter)C.push(Ae(N,f,A));else C.push(Ae(U.beforeEnter,f,A));return C.push(B),be(C)}).then(()=>(f.matched.forEach(U=>U.enterCallbacks={}),C=Et(j,"beforeRouteEnter",f,A,L),C.push(B),be(C))).then(()=>{C=[];for(const U of p.list())C.push(Ae(U,f,A));return C.push(B),be(C)}).catch(U=>ke(U,8)?U:Promise.reject(U))}function $(f,A,C){l.list().forEach(M=>L(()=>M(f,A,C)))}function H(f,A,C,M,q){const j=y(f,A);if(j)return j;const B=A===Me,U=je?history.state:{};C&&(M||B?r.replace(f.fullPath,V({scroll:B&&U&&U.scroll},q)):r.push(f.fullPath,q)),c.value=f,Ue(f,A,C,B),Ye()}let z;function ee(){z||(z=r.listen((f,A,C)=>{if(!Qe.listening)return;const M=g(f),q=b(M);if(q)return void T(V(q,{replace:!0}),M).catch(tt);d=M;const j=c.value;var B,U;je&&(B=jt(j.fullPath,C.delta),U=_t(),xt.set(B,U)),K(M,j).catch(N=>ke(N,12)?N:ke(N,2)?(T(N.to,M).then(se=>{ke(se,20)&&!C.delta&&C.type===nt.pop&&r.go(-1,!1)}).catch(tt),Promise.reject()):(C.delta&&r.go(-C.delta,!1),ze(N,M,j))).then(N=>{(N=N||H(M,j,!1))&&(C.delta&&!ke(N,8)?r.go(-C.delta,!1):C.type===nt.pop&&ke(N,20)&&r.go(-1,!1)),$(M,j,N)}).catch(tt)}))}let ye,ie=et(),Ne=et();function ze(f,A,C){Ye(f);const M=Ne.list();return M.length&&M.forEach(q=>q(f,A,C)),Promise.reject(f)}function Ye(f){return ye||(ye=!f,ee(),ie.list().forEach(([A,C])=>f?C(f):A()),ie.reset()),f}function Ue(f,A,C,M){const{scrollBehavior:q}=t;if(!je||!q)return Promise.resolve();const j=!C&&function(B){const U=xt.get(B);return xt.delete(B),U}(jt(f.fullPath,0))||(M||!C)&&history.state&&history.state.scroll||null;return Ot().then(()=>q(f,A,j)).then(B=>B&&mr(B)).catch(B=>ze(B,f,A))}const Ze=f=>r.go(f);let Xe;const De=new Set,Qe={currentRoute:c,listening:!0,addRoute:function(f,A){let C,M;return Oa(f)?(C=e.getRecordMatcher(f),M=A):M=f,e.addRoute(M,C)},removeRoute:function(f){const A=e.getRecordMatcher(f);A&&e.removeRoute(A)},hasRoute:function(f){return!!e.getRecordMatcher(f)},getRoutes:function(){return e.getRoutes().map(f=>f.record)},resolve:g,options:t,push:k,replace:function(f){return k(V(w(f),{replace:!0}))},go:Ze,back:()=>Ze(-1),forward:()=>Ze(1),beforeEach:i.add,beforeResolve:p.add,afterEach:l.add,onError:Ne.add,isReady:function(){return ye&&c.value!==Me?Promise.resolve():new Promise((f,A)=>{ie.add([f,A])})},install(f){f.component("RouterLink",Ar),f.component("RouterView",Lr),f.config.globalProperties.$router=this,Object.defineProperty(f.config.globalProperties,"$route",{enumerable:!0,get:()=>s(c)}),je&&!Xe&&c.value===Me&&(Xe=!0,k(r.location).catch(M=>{}));const A={};for(const M in Me)Object.defineProperty(A,M,{get:()=>c.value[M],enumerable:!0});f.provide(Ht,this),f.provide(Wt,gs(A)),f.provide(At,c);const C=f.unmount;De.add(f),f.unmount=function(){De.delete(f),De.size<1&&(d=Me,z&&z(),z=null,c.value=Me,Xe=!1,ye=!1),C()}}};function be(f){return f.reduce((A,C)=>A.then(()=>L(C)),Promise.resolve())}return Qe}({history:((ct=location.host?ct||location.pathname+location.search:"").includes("#")||(ct+="#"),hr(ct)),routes:Vl});var ct;const Rt=crypto,Va=t=>t instanceof CryptoKey,pt=new TextEncoder,lt=new TextDecoder,st=t=>{let e=t;e instanceof Uint8Array&&(e=lt.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(a=>{const o=atob(a),r=new Uint8Array(o.length);for(let i=0;i<o.length;i++)r[i]=o.charCodeAt(i);return r})(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class fe extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var a;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(a=Error.captureStackTrace)==null||a.call(Error,this,this.constructor)}}class ge extends fe{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,a="unspecified",o="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=a,this.reason=o}}class na extends fe{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,a="unspecified",o="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=a,this.reason=o}}class Bl extends fe{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class xe extends fe{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class re extends fe{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ce extends fe{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class Ba extends fe{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class qa extends fe{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class ql extends fe{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Fl extends fe{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function Se(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function dt(t,e){return t.name===e}function Mt(t){return parseInt(t.name.slice(4),10)}function Gl(t,e,...a){switch(e){case"HS256":case"HS384":case"HS512":{if(!dt(t.algorithm,"HMAC"))throw Se("HMAC");const o=parseInt(e.slice(2),10);if(Mt(t.algorithm.hash)!==o)throw Se(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!dt(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Se("RSASSA-PKCS1-v1_5");const o=parseInt(e.slice(2),10);if(Mt(t.algorithm.hash)!==o)throw Se(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!dt(t.algorithm,"RSA-PSS"))throw Se("RSA-PSS");const o=parseInt(e.slice(2),10);if(Mt(t.algorithm.hash)!==o)throw Se(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw Se("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!dt(t.algorithm,"ECDSA"))throw Se("ECDSA");const o=function(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==o)throw Se(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}(function(o,r){if(r.length&&!r.some(i=>o.usages.includes(i))){let i="CryptoKey does not support this operation, its usages must include ";if(r.length>2){const p=r.pop();i+=`one of ${r.join(", ")}, or ${p}.`}else r.length===2?i+=`one of ${r[0]} or ${r[1]}.`:i+=`${r[0]}.`;throw new TypeError(i)}})(t,a)}function Fa(t,e,...a){var o;if(a.length>2){const r=a.pop();t+=`one of type ${a.join(", ")}, or ${r}.`}else a.length===2?t+=`one of type ${a[0]} or ${a[1]}.`:t+=`of type ${a[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&((o=e.constructor)!=null&&o.name)&&(t+=` Received an instance of ${e.constructor.name}`),t}const ia=(t,...e)=>Fa("Key must be ",t,...e);function la(t,e,...a){return Fa(`Key for the ${t} algorithm must be `,e,...a)}const ca=t=>Va(t),he=["CryptoKey"],zl=(...t)=>{const e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let a;for(const o of e){const r=Object.keys(o);if(a&&a.size!==0)for(const i of r){if(a.has(i))return!1;a.add(i)}else a=new Set(r)}return!0};function Ge(t){if(typeof(e=t)!="object"||e===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e;if(Object.getPrototypeOf(t)===null)return!0;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a}const Yl=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:a}=function(i){let p,l;switch(i.kty){case"RSA":switch(i.alg){case"PS256":case"PS384":case"PS512":p={name:"RSA-PSS",hash:`SHA-${i.alg.slice(-3)}`},l=i.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":p={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${i.alg.slice(-3)}`},l=i.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":p={name:"RSA-OAEP",hash:`SHA-${parseInt(i.alg.slice(-3),10)||1}`},l=i.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new xe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(i.alg){case"ES256":p={name:"ECDSA",namedCurve:"P-256"},l=i.d?["sign"]:["verify"];break;case"ES384":p={name:"ECDSA",namedCurve:"P-384"},l=i.d?["sign"]:["verify"];break;case"ES512":p={name:"ECDSA",namedCurve:"P-521"},l=i.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":p={name:"ECDH",namedCurve:i.crv},l=i.d?["deriveBits"]:[];break;default:throw new xe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(i.alg){case"EdDSA":p={name:i.crv},l=i.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":p={name:i.crv},l=i.d?["deriveBits"]:[];break;default:throw new xe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new xe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:p,keyUsages:l}}(t),o=[e,t.ext??!1,t.key_ops??a],r={...t};return delete r.alg,delete r.use,Rt.subtle.importKey("jwk",r,...o)},Zl=(t,e,a)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?((o,r)=>{if(!(r instanceof Uint8Array)){if(!ca(r))throw new TypeError(la(o,r,...he,"Uint8Array"));if(r.type!=="secret")throw new TypeError(`${he.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(t,e):((o,r,i)=>{if(!ca(r))throw new TypeError(la(o,r,...he));if(r.type==="secret")throw new TypeError(`${he.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(i==="sign"&&r.type==="public")throw new TypeError(`${he.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(i==="decrypt"&&r.type==="public")throw new TypeError(`${he.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&i==="verify"&&r.type==="private")throw new TypeError(`${he.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&i==="encrypt"&&r.type==="private")throw new TypeError(`${he.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(t,e,a)},Xl=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(a=>typeof a!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)},Ql=async(t,e,a,o)=>{const r=await function(p,l,c){if(Va(l))return Gl(l,p,c),l;if(l instanceof Uint8Array){if(!p.startsWith("HS"))throw new TypeError(ia(l,...he));return Rt.subtle.importKey("raw",l,{hash:`SHA-${p.slice(-3)}`,name:"HMAC"},!1,[c])}throw new TypeError(ia(l,...he,"Uint8Array"))}(t,e,"verify");((p,l)=>{if(p.startsWith("RS")||p.startsWith("PS")){const{modulusLength:c}=l.algorithm;if(typeof c!="number"||c<2048)throw new TypeError(`${p} requires key modulusLength to be 2048 bits or larger`)}})(t,r);const i=function(p,l){const c=`SHA-${p.slice(-3)}`;switch(p){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:p.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:l.namedCurve};case"EdDSA":return{name:l.name};default:throw new xe(`alg ${p} is not supported either by JOSE or your javascript runtime`)}}(t,r.algorithm);try{return await Rt.subtle.verify(i,r,a,o)}catch{return!1}};async function ec(t,e,a){if(!Ge(t))throw new re("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new re('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new re("JWS Protected Header incorrect type");if(t.payload===void 0)throw new re("JWS Payload missing");if(typeof t.signature!="string")throw new re("JWS Signature missing or incorrect type");if(t.header!==void 0&&!Ge(t.header))throw new re("JWS Unprotected Header incorrect type");let o={};if(t.protected)try{const w=st(t.protected);o=JSON.parse(lt.decode(w))}catch{throw new re("JWS Protected Header is invalid")}if(!zl(o,t.header))throw new re("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...o,...t.header},i=function(w,y,k,b,T){if(T.crit!==void 0&&(b==null?void 0:b.crit)===void 0)throw new w('"crit" (Critical) Header Parameter MUST be integrity protected');if(!b||b.crit===void 0)return new Set;if(!Array.isArray(b.crit)||b.crit.length===0||b.crit.some(L=>typeof L!="string"||L.length===0))throw new w('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let O;O=k!==void 0?new Map([...Object.entries(k),...y.entries()]):y;for(const L of b.crit){if(!O.has(L))throw new xe(`Extension Header Parameter "${L}" is not recognized`);if(T[L]===void 0)throw new w(`Extension Header Parameter "${L}" is missing`);if(O.get(L)&&b[L]===void 0)throw new w(`Extension Header Parameter "${L}" MUST be integrity protected`)}return new Set(b.crit)}(re,new Map([["b64",!0]]),a==null?void 0:a.crit,o,r);let p=!0;if(i.has("b64")&&(p=o.b64,typeof p!="boolean"))throw new re('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=r;if(typeof l!="string"||!l)throw new re('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=a&&Xl("algorithms",a.algorithms);if(c&&!c.has(l))throw new Bl('"alg" (Algorithm) Header Parameter value not allowed');if(p){if(typeof t.payload!="string")throw new re("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new re("JWS Payload must be a string or an Uint8Array instance");let d=!1;typeof e=="function"&&(e=await e(o,t),d=!0),Zl(l,e,"verify");const u=function(...w){const y=w.reduce((T,{length:O})=>T+O,0),k=new Uint8Array(y);let b=0;for(const T of w)k.set(T,b),b+=T.length;return k}(pt.encode(t.protected??""),pt.encode("."),typeof t.payload=="string"?pt.encode(t.payload):t.payload);let m;try{m=st(t.signature)}catch{throw new re("Failed to base64url decode the signature")}if(!await Ql(l,e,m,u))throw new Fl;let _;if(p)try{_=st(t.payload)}catch{throw new re("Failed to base64url decode the payload")}else _=typeof t.payload=="string"?pt.encode(t.payload):t.payload;const g={payload:_};return t.protected!==void 0&&(g.protectedHeader=o),t.header!==void 0&&(g.unprotectedHeader=t.header),d?{...g,key:e}:g}const tc=86400,ac=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,pa=t=>{const e=ac.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const a=parseFloat(e[2]);let o;switch(e[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":o=Math.round(a);break;case"minute":case"minutes":case"min":case"mins":case"m":o=Math.round(60*a);break;case"hour":case"hours":case"hr":case"hrs":case"h":o=Math.round(3600*a);break;case"day":case"days":case"d":o=Math.round(a*tc);break;case"week":case"weeks":case"w":o=Math.round(604800*a);break;default:o=Math.round(31557600*a)}return e[1]==="-"||e[4]==="ago"?-o:o},da=t=>t.toLowerCase().replace(/^application\//,""),sc=(t,e,a={})=>{const{typ:o}=a;if(o&&(typeof t.typ!="string"||da(t.typ)!==da(o)))throw new ge('unexpected "typ" JWT header value',"typ","check_failed");let r;try{r=JSON.parse(lt.decode(e))}catch{}if(!Ge(r))throw new Ce("JWT Claims Set must be a top-level JSON object");const{requiredClaims:i=[],issuer:p,subject:l,audience:c,maxTokenAge:d}=a,u=[...i];d!==void 0&&u.push("iat"),c!==void 0&&u.push("aud"),l!==void 0&&u.push("sub"),p!==void 0&&u.push("iss");for(const b of new Set(u.reverse()))if(!(b in r))throw new ge(`missing required "${b}" claim`,b,"missing");if(p&&!(Array.isArray(p)?p:[p]).includes(r.iss))throw new ge('unexpected "iss" claim value',"iss","check_failed");if(l&&r.sub!==l)throw new ge('unexpected "sub" claim value',"sub","check_failed");if(c&&(m=r.aud,_=typeof c=="string"?[c]:c,!(typeof m=="string"?_.includes(m):Array.isArray(m)&&_.some(Set.prototype.has.bind(new Set(m))))))throw new ge('unexpected "aud" claim value',"aud","check_failed");var m,_;let g;switch(typeof a.clockTolerance){case"string":g=pa(a.clockTolerance);break;case"number":g=a.clockTolerance;break;case"undefined":g=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:w}=a,y=(k=w||new Date,Math.floor(k.getTime()/1e3));var k;if((r.iat!==void 0||d)&&typeof r.iat!="number")throw new ge('"iat" claim must be a number',"iat","invalid");if(r.nbf!==void 0){if(typeof r.nbf!="number")throw new ge('"nbf" claim must be a number',"nbf","invalid");if(r.nbf>y+g)throw new ge('"nbf" claim timestamp check failed',"nbf","check_failed")}if(r.exp!==void 0){if(typeof r.exp!="number")throw new ge('"exp" claim must be a number',"exp","invalid");if(r.exp<=y-g)throw new na('"exp" claim timestamp check failed',"exp","check_failed")}if(d){const b=y-r.iat;if(b-g>(typeof d=="number"?d:pa(d)))throw new na('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(b<0-g)throw new ge('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return r};async function ua(t,e,a){var i;const o=await async function(p,l,c){if(p instanceof Uint8Array&&(p=lt.decode(p)),typeof p!="string")throw new re("Compact JWS must be a string or Uint8Array");const{0:d,1:u,2:m,length:_}=p.split(".");if(_!==3)throw new re("Invalid Compact JWS");const g=await ec({payload:u,protected:d,signature:m},l,c),w={payload:g.payload,protectedHeader:g.protectedHeader};return typeof l=="function"?{...w,key:g.key}:w}(t,e,a);if((i=o.protectedHeader.crit)!=null&&i.includes("b64")&&o.protectedHeader.b64===!1)throw new Ce("JWTs MUST NOT use unencoded payload");const r={payload:sc(o.protectedHeader,o.payload,a),protectedHeader:o.protectedHeader};return typeof e=="function"?{...r,key:o.key}:r}function rc(t){return Ge(t)}class oc{constructor(e){if(this._cached=new WeakMap,!function(o){return o&&typeof o=="object"&&Array.isArray(o.keys)&&o.keys.every(rc)}(e))throw new Ba("JSON Web Key Set malformed");var a;this._jwks=(a=e,typeof structuredClone=="function"?structuredClone(a):JSON.parse(JSON.stringify(a)))}async getKey(e,a){const{alg:o,kid:r}={...e,...a==null?void 0:a.header},i=function(d){switch(typeof d=="string"&&d.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new xe('Unsupported "alg" value for a JSON Web Key Set')}}(o),p=this._jwks.keys.filter(d=>{let u=i===d.kty;if(u&&typeof r=="string"&&(u=r===d.kid),u&&typeof d.alg=="string"&&(u=o===d.alg),u&&typeof d.use=="string"&&(u=d.use==="sig"),u&&Array.isArray(d.key_ops)&&(u=d.key_ops.includes("verify")),u&&o==="EdDSA"&&(u=d.crv==="Ed25519"||d.crv==="Ed448"),u)switch(o){case"ES256":u=d.crv==="P-256";break;case"ES256K":u=d.crv==="secp256k1";break;case"ES384":u=d.crv==="P-384";break;case"ES512":u=d.crv==="P-521"}return u}),{0:l,length:c}=p;if(c===0)throw new qa;if(c!==1){const d=new ql,{_cached:u}=this;throw d[Symbol.asyncIterator]=async function*(){for(const m of p)try{yield await _a(u,m,o)}catch{}},d}return _a(this._cached,l,o)}}async function _a(t,e,a){const o=t.get(e)||t.set(e,{}).get(e);if(o[a]===void 0){const r=await async function(i,p){if(!Ge(i))throw new TypeError("JWK must be an object");switch(p||(p=i.alg),i.kty){case"oct":if(typeof i.k!="string"||!i.k)throw new TypeError('missing "k" (Key Value) Parameter value');return st(i.k);case"RSA":if(i.oth!==void 0)throw new xe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Yl({...i,alg:p});default:throw new xe('Unsupported "kty" (Key Type) Parameter value')}}({...e,ext:!0},a);if(r instanceof Uint8Array||r.type!=="public")throw new Ba("JSON Web Key Set members must be public keys");o[a]=r}return o[a]}function ma(t){const e=new oc(t);return async(a,o)=>e.getKey(a,o)}const nc=st;class ic{constructor(e){Ke(this,"KP_TOKEN_LIB_SERVER","https://xv-cp.apis-staging.xvtest.net");Ke(this,"JWKS_URL","https://staging.api.jwks.kape.com/.well-known/jwks.json");Ke(this,"SUBSCRIPTION_RECEIPT_URL",`${this.KP_TOKEN_LIB_SERVER}/srs/subscription_receipts`);Ke(this,"MAX_RETRIES",5);Ke(this,"subscriptionId");this.xvToken=e,this.subscriptionId=this.extractSubscriptionKrn()}async getEntitlements(e=!1){var r;const a=`jwt_${this.subscriptionId}`;let o=null;if(!e&&(o=await this.getJWTFromCache(a),o))try{return(await this.decodeAndValidateJWT(o)).payload.entitlements}catch{o=null,await chrome.storage.local.remove(a)}if(!o){const i=await this.makePostRequest(this.SUBSCRIPTION_RECEIPT_URL,{subscription_ids:[this.subscriptionId]}),p=(r=i.srts)==null?void 0:r.find(c=>c.subscription_id===this.subscriptionId);if(!p)return null;const l=await this.decodeAndValidateJWT(p.srt);return await this.cacheJWT(a,p.srt),l.payload.entitlements}return null}extractSubscriptionKrn(){const e=function(a){if(typeof a!="string")throw new Ce("JWTs must use Compact JWS serialization, JWT must be a string");const{1:o,length:r}=a.split(".");if(r===5)throw new Ce("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Ce("Invalid JWT");if(!o)throw new Ce("JWTs must contain a payload");let i,p;try{i=nc(o)}catch{throw new Ce("Failed to base64url decode the payload")}try{p=JSON.parse(lt.decode(i))}catch{throw new Ce("Failed to parse the decoded payload as JSON")}if(!Ge(p))throw new Ce("Invalid JWT Claims Set");return p}(this.xvToken);if(!(e!=null&&e.sub_krn))throw new Pe("ErrorExtractingKRN");return e==null?void 0:e.sub_krn}async makePostRequest(e,a,o=1){try{const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.xvToken}`},body:JSON.stringify(a)});if(r.ok)return r.json();if([429,503].includes(r.status)){const i=r.headers.get("Retry-After");let p=500*Math.pow(2,o);if(i)if(isNaN(Number(i))){const l=new Date(i).getTime(),c=Date.now();p=l>c?l-c:6e4}else p=1e3*parseInt(i,10);if(o<this.MAX_RETRIES)return await this.enforceDelay(p),this.makePostRequest(e,a,o+1);throw new Pe("MaxRetriesReached")}if(r.status===504){const i=60*Math.random()+6e4;throw await this.enforceDelay(i),new Pe("ServiceCurrentlyUnavailable")}throw new Pe("HTTPError",r.status)}catch(r){throw r instanceof Pe?r:new Pe("NetworkError",r)}}async enforceDelay(e){return new Promise(a=>setTimeout(a,e))}async getJWKS(e=!1){const a="jwks";if(!e){const i=await chrome.storage.local.get(a);if(i[a])return JSON.parse(i[a])}const o=await fetch(this.JWKS_URL);if(!o.ok)throw new Pe("ErrorFetchingJWKS");const r=await o.json();return await chrome.storage.local.set({[a]:JSON.stringify(r)}),r}async decodeAndValidateJWT(e){let a=await this.getJWKS(),o=ma(a);try{const{payload:r}=await ua(e,o);return{payload:r}}catch(r){if(r instanceof qa){a=await this.getJWKS(!0),o=ma(a);const{payload:i}=await ua(e,o);return{payload:i}}throw new Pe("JWTValidationFailed")}}async cacheJWT(e,a){await chrome.storage.local.set({[e]:a})}async getJWTFromCache(e){return(await chrome.storage.local.get(e))[e]}}const lc={ErrorFetchingJWKS:"ErrorFetchingJWKS",ServiceCurrentlyUnavailable:"ServiceCurrentlyUnavailable",HTTPError:"HTTPError",NetworkError:"NetworkError",JWTValidationFailed:"JWTValidationFailed",MaxRetriesReached:"MaxRetriesReached",ErrorExtractingKRN:"ErrorExtractingKRN"};class Pe extends Error{constructor(e,a){super((a==null?void 0:a.toString())??lc[e]),this.name=e}}const cc={id:"page"},ut="/welcome",ga="/subscription-keys-unavailable",pc=W({__name:"PasswordManagerPage",setup(t){const e=new Set(["/set-primary-password","/recovery-code","/verify-account-code"]),a=we(),o=me(),{sendTelemetry:r}=X(),i=R(()=>["not_activated","activating","activation_network_error","activation_error"].includes(a.currentInfo.state??"")),p=R(()=>a.os),l=R(()=>a.currentInfo.state==="NOT_INSTALLED"),c=E(),d=E(),u=E(!1);chrome.runtime.onMessage.addListener(async _=>{switch(_.action){case"lock_vault":await o.lockVault();break;case"connectedToHelper":d.value&&(clearInterval(d.value),d.value=void 0);break;case"state":switch(a.patchCurrentInfo({..._.value}),_.value.state){case"NOT_INSTALLED":d.value||(J.push(ut),d.value=setInterval(async()=>{cs()},1500));break;case"activating":case"not_activated":c.value||(c.value=setInterval(async()=>{if(!(i.value||l.value)){switch(await fa(),await ss()){case"SHOW_UNLOCK_SCREEN":J.push("/account-verified");break;case"MFA_STEP_UP_THEN_RETRY":case"MFA_STEP_UP_THEN_SHOW_UNLOCK_SCREEN":J.push({path:"/verify-account",query:{mfaStepOnly:!0}});break;default:J.push(ut)}c.value&&(clearInterval(c.value),c.value=void 0)}},1500))}}});const m=new Promise(_=>setTimeout(_,1e4));return J.beforeEach(async(_,g,w)=>{var y;if(navigator.webdriver)w();else{g.path==="/"&&_.path!==ut&&e.has(_.path)&&(J.push(ut),o.clearOnboardingData());try{if(await((k=3e3)=>new Promise((b,T)=>{const O=Date.now(),L=()=>{var K;a.currentInfo&&((K=a.currentInfo.flags)==null?void 0:K.pricingTiersVariant)!==void 0?b(!0):Date.now()-O>k?T(new Error("Timeout waiting for currentInfo to be populated")):setTimeout(L,10)};L()}))(),((y=a.currentInfo.flags)==null?void 0:y.pricingTiersVariant)&&a.currentInfo.xvToken){const k=new ic(a.currentInfo.xvToken);try{u.value=!0;const b=await Promise.race([k.getEntitlements(),m]);if(r("kp_token_make_request_success"),b&&!b["xv.keys"]&&_.path!==ga)return void w(ga)}catch(b){r("kp_token_make_request_fail",b.message)}finally{u.value=!1}}w()}catch{w()}}}),ne(()=>{ps(),a.setBrowserInfo()}),(_,g)=>{const w=ve("router-view");return v(),P("div",cc,[s(l)?(v(),I(Js,{key:0,"data-test":"not_installed_modal",os:s(p)},null,8,["os"])):(v(),P(F,{key:1},[s(u)?(v(),I(Xs,{key:0})):(v(),I(w,{key:1})),s(i)?(v(),I(Ms,{key:2,"data-test":"not_activated_modal"})):Z("",!0)],64))])}}});rs("passwordManager"),Za(pc).use(ns).use(os()).use(J).mount("#app");me().checkAccountStatus();const{isAlpha:dc}=X();dc&&_s();
