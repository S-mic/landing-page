var Xn=Object.defineProperty;var Yn=(r,t,e)=>t in r?Xn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var v=(r,t,e)=>(Yn(r,typeof t!="symbol"?t+"":t,e),e);import{r as Qn}from"./nativeFunctions-B799UMhD.js";import{C as Ae,o as Zn,p as jn,q as Yt,r as Mn,t as tr,u as er,v as nr,w as rr,y as or,z as Fn,A as bt,B as fe,D as ir,E as De,F as Qt,T as oe,G as Ne,H as It,I as ar,J as sr,K as cr,L as _r,M as lr,N as dr,O as en,P as ur,Q as nn,R as gr,S as pe,e as wr}from"./Settings-Bqkr9m9-.js";import{A as fr,a as rn}from"./AutofillMessageHandler-0g4xScxK.js";import{l as pr}from"./i18n-DOZcdwWT.js";class hr{constructor(){v(this,"monitoredTabs");this.monitoredTabs={}}getUpdatedFieldsForCategory(t,e){return t=[...t||[]],e.forEach(n=>{if(!n.uniqueFieldId)return;const i=t==null?void 0:t.findIndex(a=>a.uniqueFieldId&&a.uniqueFieldId===n.uniqueFieldId);i>=0?t[i]=n:t.push(n)}),t}watchFormHandler(t,e,n,i){t!==void 0&&e!==void 0&&chrome.webNavigation.getFrame({tabId:e,frameId:t},a=>{const s=this.monitoredTabs[e];if(s&&s.url===(a==null?void 0:a.url)){const c=this.getUpdatedFieldsForCategory(s.fields[i],n),_={fields:{...s.fields,[i]:c}};this.updateMonitoredTab(e,_)}else this.createNewMonitoredTab(e,t,n,i,a==null?void 0:a.url)})}updateMonitoredTab(t,e){this.monitoredTabs[t]={...this.monitoredTabs[t],...e}}createNewMonitoredTab(t,e,n,i,a){this.monitoredTabs[t]={url:a,submitted:!1,fields:{[i]:n},frameId:e}}getMonitoredTab(t){return this.monitoredTabs[t]}removeMonitoredTab(t){try{return delete this.monitoredTabs[t],!0}catch{throw new Error("errors.removeMonitoredTab failed")}}}const on=r=>"browser_helper_protocol"in r&&"connected"in r;class br{constructor(t=()=>{}){v(this,"helperName");v(this,"port");v(this,"isConnected");v(this,"isConnecting");v(this,"isNewProtocol");v(this,"currentBackoffCollision");v(this,"prevCurrentBackoffCollision");v(this,"buildRequest",(t,e)=>{let n={jsonrpc:"2.0",method:t,params:e,id:1};return this.isNewProtocol&&(n={method:t.replace(/^XVPN\./,""),params:e}),n});v(this,"getRandomIntInclusive",(t,e)=>{const n=Math.ceil(t),i=Math.floor(e);return Math.floor(Math.random()*(i-n+1))+n});v(this,"getNextDelay",()=>{const t=Math.pow(2,this.currentBackoffCollision)-1,e=100*this.getRandomIntInclusive(0,t);return this.currentBackoffCollision+=1,e});v(this,"handleNewProtocol",t=>{const{type:e,name:n,data:i}=t;e==="event"?this.messageCallback({method:"engineStatusUpdate",name:n,data:i}):e==="method"&&(n==="APIAccessToken"?this.messageCallback({method:"setPwmAccessToken",data:i==null?void 0:i.value}):n==="status"?this.messageCallback({method:"currentState",data:i}):n&&Array("ValidateMfaCode","RequestMfaCode").includes(n)&&this.messageCallback({method:n,data:i}))});v(this,"handleOldProtocol",t=>{var e,n;if((e=t.info)!=null&&e.state){const i={state:t.info.state,networkStatus:(n=t.info.reachability_status)==null?void 0:n.result,subscription:t.subscription,website_url:t.info.website_url,isNewProtocol:this.isNewProtocol};this.messageCallback({method:"currentState",data:i})}else if(t.name){const i=`${t.name}Data`,a=t.data?t.data[i]:{};this.messageCallback({method:"engineStatusUpdate",name:t.name,data:a})}else t.api_access_token?this.messageCallback({method:"setPwmAccessToken",data:t.api_access_token}):typeof t.error=="string"&&t.error.indexOf("sendEngineCommand: not activated")>0?this.currentBackoffCollision=this.prevCurrentBackoffCollision:this.messageCallback({method:"Unknown",data:t})});v(this,"portMessageListener",t=>{if(!(t===null||typeof t!="object"))if("type"in t&&this.isNewProtocol)this.handleNewProtocol(t);else if(on(t)||(e=>!("browser_helper_protocol"in e)&&"connected"in e)(t)){if(on(t)&&t.browser_helper_protocol===2&&(this.isNewProtocol=!0),this.prevCurrentBackoffCollision=this.currentBackoffCollision,this.currentBackoffCollision=0,!this.isConnected){this.isConnected=!0,this.isConnecting=!1;const e={isNewProtocol:this.isNewProtocol};t.app_version!==void 0&&(e.app_version=t.app_version),this.messageCallback({method:"connectedToHelper",data:e})}}else this.handleOldProtocol(t);return!0});v(this,"portDisconnectListener",()=>{var t;this.isConnecting=!1,this.isConnected=!1,((t=chrome.runtime.lastError)==null?void 0:t.message)==="Specified native messaging host not found."&&this.messageCallback({method:"currentState",data:{info:{state:"NOT_INSTALLED"}}}),setTimeout(()=>{this.connect()},this.getNextDelay())});v(this,"connect",()=>{var t,e;this.isConnecting||(this.isConnecting=!0,this.port=chrome.runtime.connectNative(this.helperName),(t=this.port)==null||t.onMessage.addListener(this.portMessageListener),(e=this.port)==null||e.onDisconnect.addListener(this.portDisconnectListener))});v(this,"resetBackoff",()=>{this.currentBackoffCollision=0,this.connect()});v(this,"sendNativeMessage",t=>{var e;this.isConnected===!0&&((e=this.port)==null||e.postMessage(t))});v(this,"getAPIAccessToken",()=>this.sendNativeMessage(this.buildRequest("XVPN.GetAPIAccessToken")));v(this,"fetchAPIAccessToken",()=>this.sendNativeMessage(this.buildRequest("XVPN.FetchAPIAccessToken")));v(this,"getStatus",()=>this.sendNativeMessage(this.buildRequest("XVPN.GetStatus")));v(this,"isInstalled",()=>this.isConnected);v(this,"openApp",()=>this.sendNativeMessage(this.buildRequest("XVPNUI.LaunchApp")));v(this,"requestMfaCode",()=>this.sendNativeMessage(this.buildRequest("XVPN.RequestMfaCode")));v(this,"validateMfaCode",t=>this.sendNativeMessage(this.buildRequest("XVPN.ValidateMfaCode",{code:t})));this.messageCallback=t,this.helperName="com.expressvpn.helper",this.port=void 0,this.isConnected=!1,this.isConnecting=!1,this.isNewProtocol=!1,this.currentBackoffCollision=0,this.prevCurrentBackoffCollision=0}}let qt;const mr=new Uint8Array(16);function yr(){if(!qt&&(qt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qt(mr)}const _t=[];for(let r=0;r<256;++r)_t.push((r+256).toString(16).slice(1));const an={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function vr(r,t,e){if(an.randomUUID&&!t&&!r)return an.randomUUID();const n=(r=r||{}).random||(r.rng||yr)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let i=0;i<16;++i)t[e+i]=n[i];return t}return function(i,a=0){return _t[i[a+0]]+_t[i[a+1]]+_t[i[a+2]]+_t[i[a+3]]+"-"+_t[i[a+4]]+_t[i[a+5]]+"-"+_t[i[a+6]]+_t[i[a+7]]+"-"+_t[i[a+8]]+_t[i[a+9]]+"-"+_t[i[a+10]]+_t[i[a+11]]+_t[i[a+12]]+_t[i[a+13]]+_t[i[a+14]]+_t[i[a+15]]}(n)}async function sn(r,t){return await crypto.subtle.importKey("raw",r,"AES-GCM",!1,t)}let o;const Et=new Array(32).fill(void 0);function A(r){return Et[r]}Et.push(void 0,null,!0,!1);let Ut=Et.length;function C(r){const t=A(r);return function(e){e<36||(Et[e]=Ut,Ut=e)}(r),t}const Hn=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Hn.decode();let Zt=new Uint8Array;function Dt(){return Zt.byteLength===0&&(Zt=new Uint8Array(o.memory.buffer)),Zt}function V(r,t){return Hn.decode(Dt().subarray(r,r+t))}function L(r){Ut===Et.length&&Et.push(Et.length+1);const t=Ut;return Ut=Et[t],Et[t]=r,t}function it(r){return r==null}let te=new Float64Array,ee=new Int32Array;function d(){return ee.byteLength===0&&(ee=new Int32Array(o.memory.buffer)),ee}let f=0;const ne=new TextEncoder("utf-8"),kr=typeof ne.encodeInto=="function"?function(r,t){return ne.encodeInto(r,t)}:function(r,t){const e=ne.encode(r);return t.set(e),{read:r.length,written:e.length}};function p(r,t,e){if(e===void 0){const c=ne.encode(r),_=t(c.length);return Dt().subarray(_,_+c.length).set(c),f=c.length,_}let n=r.length,i=t(n);const a=Dt();let s=0;for(;s<n;s++){const c=r.charCodeAt(s);if(c>127)break;a[i+s]=c}if(s!==n){s!==0&&(r=r.slice(s)),i=e(i,n,n=s+3*r.length);const c=Dt().subarray(i+s,i+n);s+=kr(r,c).written}return f=s,i}function Oe(r){const t=typeof r;if(t=="number"||t=="boolean"||r==null)return`${r}`;if(t=="string")return`"${r}"`;if(t=="symbol"){const i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){const i=r.length;let a="[";i>0&&(a+=Oe(r[0]));for(let s=1;s<i;s++)a+=", "+Oe(r[s]);return a+="]",a}const e=/\[object ([^\]]+)\]/.exec(toString.call(r));let n;if(!(e.length>1))return toString.call(r);if(n=e[1],n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}function Cr(r,t,e){o._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hc3cfe93c7014ff6a(r,t,L(e))}function Vn(r,t){return Dt().subarray(r/1,r/1+t)}function pt(r,t){try{return r.apply(this,t)}catch(e){o.__wbindgen_exn_store(L(e))}}const rt=new Uint32Array(2),yt=new BigUint64Array(rt.buffer);function St(r,t){if(!(r instanceof t))throw new Error(`expected instance of ${t.name}`);return r.ptr}function cn(r){const t=p(r,o.__wbindgen_malloc,o.__wbindgen_realloc),e=f;return C(o.determineCardTypeUsingCardNumber(t,e))}function _n(r,t,e,n){o.wasm_bindgen__convert__closures__invoke2_mut__h4b1335a1fb9f7ab1(r,t,L(e),L(n))}const he=Object.freeze({Android:0,0:"Android",Ios:1,1:"Ios",Windows:2,2:"Windows",Mac:3,3:"Mac",Linux:4,4:"Linux",Router:5,5:"Router"});class Rt{static __wrap(t){const e=Object.create(Rt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_jsclientversions_free(t)}constructor(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f,c=o.jsclientversions_new(n,i,a,s);return Rt.__wrap(c)}setAppExtra(t){try{const n=o.__wbindgen_add_to_stack_pointer(-16),i=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=f;o.jsclientversions_setAppExtra(n,this.ptr,i,a);var e=d()[n/4+0];if(d()[n/4+1])throw C(e)}finally{o.__wbindgen_add_to_stack_pointer(16)}}setOsVersion(t,e,n){try{const c=o.__wbindgen_add_to_stack_pointer(-16),_=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),l=f;var i=it(n)?0:p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),a=f;o.jsclientversions_setOsVersion(c,this.ptr,t,_,l,i,a);var s=d()[c/4+0];if(d()[c/4+1])throw C(s)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class Re{static __wrap(t){const e=Object.create(Re.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webbreachresult_free(t)}get isErr(){return o.webbreachresult_isErr(this.ptr)!==0}get name(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_name(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get domain(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_domain(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get breachDate(){try{const i=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_breachDate(i,this.ptr);var t=d()[i/4+0],e=d()[i/4+1],n=d()[i/4+2];return rt[0]=e,rt[1]=n,t===0?void 0:yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get modifiedDate(){try{const i=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_modifiedDate(i,this.ptr);var t=d()[i/4+0],e=d()[i/4+1],n=d()[i/4+2];return rt[0]=e,rt[1]=n,t===0?void 0:yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get description(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_description(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get dataclasses(){return C(o.webbreachresult_dataclasses(this.ptr))}get error(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webbreachresult_error(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class je{static __wrap(t){const e=Object.create(je.prototype);return e.ptr=t,e}toJSON(){return{uuid:this.uuid,cid:this.cid,title:this.title,documentType:this.documentType,created:this.created,modified:this.modified,conflict:this.conflict,name:this.name,cardType:this.cardType,zipcode:this.zipcode,expiry:this.expiry,note:this.note,cardNumberSuffix:this.cardNumberSuffix,hasSecurityCode:this.hasSecurityCode}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webcardmetadata_free(t)}get uuid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_uuid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get documentType(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_documentType(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get created(){return C(o.webcardmetadata_created(this.ptr))}get modified(){return C(o.webcardmetadata_modified(this.ptr))}get conflict(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_conflict(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get name(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_name(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cardType(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cardType(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get zipcode(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_zipcode(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get expiry(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_expiry(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get note(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_note(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cardNumberSuffix(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cardNumberSuffix(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get hasSecurityCode(){return o.webcardmetadata_hasSecurityCode(this.ptr)!==0}}class ie{static __wrap(t){const e=Object.create(ie.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webclient_free(t)}static freeClient(t){St(t,ie);var e=t.ptr;t.ptr=0,o.webclient_freeClient(e)}documentHistory(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_documentHistory(this.ptr,e,n))}documentList(){return C(o.webclient_documentList(this.ptr))}createNewNote(t){St(t,Ft);var e=t.ptr;return t.ptr=0,C(o.webclient_createNewNote(this.ptr,e))}createNewLogin(t){St(t,Mt);var e=t.ptr;return t.ptr=0,C(o.webclient_createNewLogin(this.ptr,e))}createNewCard(t){St(t,jt);var e=t.ptr;return t.ptr=0,C(o.webclient_createNewCard(this.ptr,e))}createNewDocumentsFromCsv(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_createNewDocumentsFromCsv(this.ptr,n,i,a,s))}createNewDocumentsFromBinary(t,e){const n=function(c,_){const l=_(1*c.length);return Dt().set(c,l/1),f=c.length,l}(t,o.__wbindgen_malloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_createNewDocumentsFromBinary(this.ptr,n,i,a,s))}exportVaultDocumentsAsCsv(){return C(o.webclient_exportVaultDocumentsAsCsv(this.ptr))}updateSecureNote(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;St(e,Bt);var a=e.ptr;return e.ptr=0,C(o.webclient_updateSecureNote(this.ptr,n,i,a))}updateLogin(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;St(e,Vt);var a=e.ptr;return e.ptr=0,C(o.webclient_updateLogin(this.ptr,n,i,a))}updateCard(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;St(e,Ht);var a=e.ptr;return e.ptr=0,C(o.webclient_updateCard(this.ptr,n,i,a))}ignoreHealthAlert(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_ignoreHealthAlert(this.ptr,n,i,a,s))}getLoginBody(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_getLoginBody(this.ptr,e,n))}getSecureNoteBody(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_getSecureNoteBody(this.ptr,e,n))}getCardBody(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_getCardBody(this.ptr,e,n))}getLoginBodyFromHistory(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;yt[0]=e;const a=rt[0],s=rt[1];return C(o.webclient_getLoginBodyFromHistory(this.ptr,n,i,a,s))}getSecureNoteBodyFromHistory(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;yt[0]=e;const a=rt[0],s=rt[1];return C(o.webclient_getSecureNoteBodyFromHistory(this.ptr,n,i,a,s))}getCardBodyFromHistory(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;yt[0]=e;const a=rt[0],s=rt[1];return C(o.webclient_getCardBodyFromHistory(this.ptr,n,i,a,s))}getLoginTotpCode(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_getLoginTotpCode(this.ptr,e,n))}deleteAccount(){return C(o.webclient_deleteAccount(this.ptr))}changeMasterPassword(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_changeMasterPassword(this.ptr,n,i,a,s))}changeMasterAndRecoveryPasswords(t,e,n){const i=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=f,s=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),c=f,_=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),l=f;return C(o.webclient_changeMasterAndRecoveryPasswords(this.ptr,i,a,s,c,_,l))}changeMasterPasswordUsingRecoveryPassword(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_changeMasterPasswordUsingRecoveryPassword(this.ptr,n,i,a,s))}changeMasterAndRecoveryPasswordsUsingRecoveryPassword(t,e,n){const i=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=f,s=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),c=f,_=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),l=f;return C(o.webclient_changeMasterAndRecoveryPasswordsUsingRecoveryPassword(this.ptr,i,a,s,c,_,l))}changeRecoveryPassword(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webclient_changeRecoveryPassword(this.ptr,n,i,a,s))}deleteDocument(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_deleteDocument(this.ptr,e,n))}duplicatesForLogin(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_duplicatesForLogin(this.ptr,e,n))}duplicatesForPassword(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_duplicatesForPassword(this.ptr,e,n))}allDuplicateCohorts(){return C(o.webclient_allDuplicateCohorts(this.ptr))}passwordHealthScore(){return C(o.webclient_passwordHealthScore(this.ptr))}passwordHealthScoreWithoutTotp(){return C(o.webclient_passwordHealthScoreWithoutTotp(this.ptr))}breachInfoForLogin(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webclient_breachInfoForLogin(this.ptr,e,n))}breachInfoForVault(){return C(o.webclient_breachInfoForVault(this.ptr))}sync(){return C(o.webclient_sync(this.ptr))}}class Me{static __wrap(t){const e=Object.create(Me.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webcsvexportsuccess_free(t)}get csv(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.__wbg_get_webcsvexportsuccess_csv(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}set csv(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.__wbg_set_webcsvexportsuccess_csv(this.ptr,e,n)}get errorCount(){return o.__wbg_get_webcsvexportsuccess_errorCount(this.ptr)>>>0}set errorCount(t){o.__wbg_set_webcsvexportsuccess_errorCount(this.ptr,t)}}class Fe{static __wrap(t){const e=Object.create(Fe.prototype);return e.ptr=t,e}toJSON(){return{uuid:this.uuid,cid:this.cid,metadataError:this.metadataError,documentType:this.documentType,title:this.title,isLogin:this.isLogin,isSecureNote:this.isSecureNote,isCard:this.isCard,created:this.created,modified:this.modified,conflict:this.conflict}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webdocumentinfo_free(t)}get uuid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_uuid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get metadataError(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_metadataError(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get documentType(){try{const c=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_documentType(c,this.ptr);var t=d()[c/4+0],e=d()[c/4+1],n=d()[c/4+2],i=d()[c/4+3],a=t,s=e;if(i)throw a=0,s=0,C(n);return V(a,s)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(a,s)}}get title(){try{const c=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_title(c,this.ptr);var t=d()[c/4+0],e=d()[c/4+1],n=d()[c/4+2],i=d()[c/4+3],a=t,s=e;if(i)throw a=0,s=0,C(n);return V(a,s)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(a,s)}}get isLogin(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_isLogin(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];if(d()[n/4+2])throw C(e);return t!==0}finally{o.__wbindgen_add_to_stack_pointer(16)}}get isSecureNote(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_isSecureNote(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];if(d()[n/4+2])throw C(e);return t!==0}finally{o.__wbindgen_add_to_stack_pointer(16)}}get isCard(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_isCard(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];if(d()[n/4+2])throw C(e);return t!==0}finally{o.__wbindgen_add_to_stack_pointer(16)}}get created(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_created(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];if(d()[n/4+2])throw C(e);return C(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}get modified(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_modified(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];if(d()[n/4+2])throw C(e);return C(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}get conflict(){try{const i=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_conflict(i,this.ptr);var t=d()[i/4+0],e=d()[i/4+1],n=d()[i/4+2];if(d()[i/4+3])throw C(n);let a;return t!==0&&(a=V(t,e).slice(),o.__wbindgen_free(t,1*e)),a}finally{o.__wbindgen_add_to_stack_pointer(16)}}intoLogin(){try{const n=this.__destroy_into_raw(),i=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_intoLogin(i,n);var t=d()[i/4+0],e=d()[i/4+1];if(d()[i/4+2])throw C(e);return $e.__wrap(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}intoSecureNote(){try{const n=this.__destroy_into_raw(),i=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_intoSecureNote(i,n);var t=d()[i/4+0],e=d()[i/4+1];if(d()[i/4+2])throw C(e);return We.__wrap(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}intoCard(){try{const n=this.__destroy_into_raw(),i=o.__wbindgen_add_to_stack_pointer(-16);o.webdocumentinfo_intoCard(i,n);var t=d()[i/4+0],e=d()[i/4+1];if(d()[i/4+2])throw C(e);return je.__wrap(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class He{static __wrap(t){const e=Object.create(He.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webimportresult_free(t)}get documents(){return C(o.webimportresult_documents(this.ptr))}get document_errors(){return C(o.webimportresult_document_errors(this.ptr))}get errors(){return C(o.webimportresult_errors(this.ptr))}}class Ve{static __wrap(t){const e=Object.create(Ve.prototype);return e.ptr=t,e}toJSON(){return{title:this.title,id:this.id,truncated:this.truncated}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webimporteddocument_free(t)}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.__wbg_get_webimporteddocument_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.__wbg_set_webimporteddocument_title(this.ptr,e,n)}get id(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.__wbg_get_webimporteddocument_id(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}set id(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.__wbg_set_webimporteddocument_id(this.ptr,e,n)}get truncated(){return o.__wbg_get_webimporteddocument_truncated(this.ptr)!==0}set truncated(t){o.__wbg_set_webimporteddocument_truncated(this.ptr,t)}}class Be{static __wrap(t){const e=Object.create(Be.prototype);return e.ptr=t,e}toJSON(){return{title:this.title,error:this.error}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webimporteddocumenterror_free(t)}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.__wbg_get_webimporteddocument_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.__wbg_set_webimporteddocument_title(this.ptr,e,n)}get error(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.__wbg_get_webimporteddocument_id(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}set error(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.__wbg_set_webimporteddocument_id(this.ptr,e,n)}}class qe{static __wrap(t){const e=Object.create(qe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webloginbreachinfo_free(t)}get id(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginbreachinfo_id(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get passwordLeakCountIsErr(){return o.webloginbreachinfo_passwordLeakCountIsErr(this.ptr)!==0}get passwordLeakCount(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginbreachinfo_passwordLeakCount(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return t===0?void 0:e>>>0}finally{o.__wbindgen_add_to_stack_pointer(16)}}get passwordLeakCountError(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginbreachinfo_passwordLeakCountError(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get passwordLeakCountTimestamp(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginbreachinfo_passwordLeakCountTimestamp(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class $e{static __wrap(t){const e=Object.create($e.prototype);return e.ptr=t,e}toJSON(){return{uuid:this.uuid,cid:this.cid,title:this.title,documentType:this.documentType,created:this.created,modified:this.modified,conflict:this.conflict,username:this.username,domain:this.domain,passwordStrength:this.passwordStrength,loginNote:this.loginNote}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webloginmetadata_free(t)}get uuid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_uuid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get documentType(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginmetadata_documentType(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get created(){return C(o.webcardmetadata_created(this.ptr))}get modified(){return C(o.webcardmetadata_modified(this.ptr))}get conflict(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_conflict(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get username(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginmetadata_username(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get domain(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginmetadata_domain(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get passwordStrength(){const t=o.webloginmetadata_passwordStrength(this.ptr);return t===0?void 0:ce.__wrap(t)}get loginNote(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginmetadata_loginNote(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}isHealthAlertIgnored(t){try{const i=o.__wbindgen_add_to_stack_pointer(-16),a=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;o.webloginmetadata_isHealthAlertIgnored(i,this.ptr,a,s);var e=d()[i/4+0],n=d()[i/4+1];if(d()[i/4+2])throw C(n);return e!==0}finally{o.__wbindgen_add_to_stack_pointer(16)}}isTotpSet(){return o.webloginmetadata_isTotpSet(this.ptr)!==0}shouldAddTotp(){return o.webloginmetadata_shouldAddTotp(this.ptr)!==0}allIgnoredHealthAlerts(){return C(o.webloginmetadata_allIgnoredHealthAlerts(this.ptr))}}class jt{static __wrap(t){const e=Object.create(jt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webnewcardinfo_free(t)}static new(t,e,n,i,a,s,c,_){const l=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),g=f,w=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),m=f,S=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),I=f,T=p(i,o.__wbindgen_malloc,o.__wbindgen_realloc),P=f,O=p(a,o.__wbindgen_malloc,o.__wbindgen_realloc),N=f,K=p(s,o.__wbindgen_malloc,o.__wbindgen_realloc),j=f,Z=p(c,o.__wbindgen_malloc,o.__wbindgen_realloc),U=f,q=p(_,o.__wbindgen_malloc,o.__wbindgen_realloc),et=f,E=o.webnewcardinfo_new(l,g,w,m,S,I,T,P,O,N,K,j,Z,U,q,et);return jt.__wrap(E)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_title(this.ptr,e,n)}set cardType(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_type(this.ptr,e,n)}set cardNumber(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_number(this.ptr,e,n)}set securityCode(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_security_code(this.ptr,e,n)}set name(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_name(this.ptr,e,n)}set zipcode(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_zipcode(this.ptr,e,n)}set expiry(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_expiry(this.ptr,e,n)}set cardNote(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_note(this.ptr,e,n)}}class Mt{static __wrap(t){const e=Object.create(Mt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webnewlogininfo_free(t)}constructor(t,e,n,i,a,s){const c=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),_=f,l=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),g=f,w=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),m=f,S=p(i,o.__wbindgen_malloc,o.__wbindgen_realloc),I=f,T=p(a,o.__wbindgen_malloc,o.__wbindgen_realloc),P=f,O=p(s,o.__wbindgen_malloc,o.__wbindgen_realloc),N=f,K=o.webnewlogininfo_new(c,_,l,g,w,m,S,I,T,P,O,N);return Mt.__wrap(K)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_title(this.ptr,e,n)}set domain(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_type(this.ptr,e,n)}set username(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_number(this.ptr,e,n)}set password(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_security_code(this.ptr,e,n)}set loginNote(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_name(this.ptr,e,n)}set totp(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_zipcode(this.ptr,e,n)}}class Ft{static __wrap(t){const e=Object.create(Ft.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webnewsecurenoteinfo_free(t)}constructor(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f,c=o.webnewsecurenoteinfo_new(n,i,a,s);return Ft.__wrap(c)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_title(this.ptr,e,n)}set body(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webnewcardinfo_set_card_type(this.ptr,e,n)}}class Ke{static __wrap(t){const e=Object.create(Ke.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webpasswordhealthscore_free(t)}get percentage(){return o.webpasswordhealthscore_percentage(this.ptr)}get stepsToNextLevel(){return o.webpasswordhealthscore_stepsToNextLevel(this.ptr)}}class ae{static __wrap(t){const e=Object.create(ae.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webpasswordmanager_free(t)}constructor(t,e,n,i){St(e,Rt);var a=e.ptr;e.ptr=0;const s=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),c=f,_=o.webpasswordmanager_new(L(t),a,s,c,L(i));return ae.__wrap(_)}checkUserExists(t){return C(o.webpasswordmanager_checkUserExists(this.ptr,t))}determineActionFromAccountState(){return C(o.webpasswordmanager_determineActionFromAccountState(this.ptr))}checkCacheExists(){return C(o.webpasswordmanager_checkCacheExists(this.ptr))}unlock(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webpasswordmanager_unlock(this.ptr,e,n))}recover(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webpasswordmanager_recover(this.ptr,e,n))}createNewUser(t,e){const n=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;var a=it(e)?0:p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;return C(o.webpasswordmanager_createNewUser(this.ptr,n,i,a,s))}breachesForEmail(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webpasswordmanager_breachesForEmail(this.ptr,e,n))}passwordLeakCount(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;return C(o.webpasswordmanager_passwordLeakCount(this.ptr,e,n))}breachAlertsDisable(){return C(o.webpasswordmanager_breachAlertsDisable(this.ptr))}}class ce{static __wrap(t){const e=Object.create(ce.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webpasswordstrengthinfo_free(t)}get guesses(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_guesses(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get score(){return o.webpasswordstrengthinfo_score(this.ptr)}get crackTimeOnlineThrottling100PerHour(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webloginbreachinfo_passwordLeakCountTimestamp(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get crackTimeOnlineNoThrottling10PerSecond(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_crackTimeOnlineNoThrottling10PerSecond(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get crackTimeOfflineSlowHashing1e4PerSecond(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_crackTimeOfflineSlowHashing1e4PerSecond(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get crackTimeOfflineFastHashing1e10PerSecond(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_crackTimeOfflineFastHashing1e10PerSecond(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get warning(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_warning(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}get suggestions(){return C(o.webpasswordstrengthinfo_suggestions(this.ptr))}}class We{static __wrap(t){const e=Object.create(We.prototype);return e.ptr=t,e}toJSON(){return{uuid:this.uuid,cid:this.cid,title:this.title,documentType:this.documentType,created:this.created,modified:this.modified,conflict:this.conflict}}toString(){return JSON.stringify(this)}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_websecurenotemetadata_free(t)}get uuid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_uuid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get cid(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_cid(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get title(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_title(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get documentType(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.websecurenotemetadata_documentType(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get created(){return C(o.webcardmetadata_created(this.ptr))}get modified(){return C(o.webcardmetadata_modified(this.ptr))}get conflict(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webcardmetadata_conflict(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];let i;return t!==0&&(i=V(t,e).slice(),o.__wbindgen_free(t,1*e)),i}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class ze{static __wrap(t){const e=Object.create(ze.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webtotpoutput_free(t)}get totpExists(){return o.webtotpoutput_totpExists(this.ptr)!==0}get code(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webtotpoutput_code(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get expiry(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webpasswordstrengthinfo_guesses(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return rt[0]=t,rt[1]=e,yt[0]}finally{o.__wbindgen_add_to_stack_pointer(16)}}get account(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webtotpoutput_account(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}get issuer(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.webtotpoutput_issuer(n,this.ptr);var t=d()[n/4+0],e=d()[n/4+1];return V(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}}class Ht{static __wrap(t){const e=Object.create(Ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webupdatecardinfo_free(t)}constructor(t,e,n,i,a,s,c,_){var l=it(t)?0:p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),g=f,w=it(e)?0:p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),m=f,S=it(n)?0:p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),I=f,T=it(i)?0:p(i,o.__wbindgen_malloc,o.__wbindgen_realloc),P=f,O=it(a)?0:p(a,o.__wbindgen_malloc,o.__wbindgen_realloc),N=f,K=it(s)?0:p(s,o.__wbindgen_malloc,o.__wbindgen_realloc),j=f,Z=it(c)?0:p(c,o.__wbindgen_malloc,o.__wbindgen_realloc),U=f,q=it(_)?0:p(_,o.__wbindgen_malloc,o.__wbindgen_realloc),et=f;const E=o.webupdatecardinfo_new_with_fields(l,g,w,m,S,I,T,P,O,N,K,j,Z,U,q,et);return Ht.__wrap(E)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_title(this.ptr,e,n)}set cardType(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_type(this.ptr,e,n)}set cardNumber(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_number(this.ptr,e,n)}set securityCode(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_security_code(this.ptr,e,n)}set name(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_name(this.ptr,e,n)}set zipcode(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_zipcode(this.ptr,e,n)}set expiry(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_expiry(this.ptr,e,n)}set cardNote(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_note(this.ptr,e,n)}}class Vt{static __wrap(t){const e=Object.create(Vt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webupdatelogininfo_free(t)}constructor(t,e,n,i,a,s){var c=it(t)?0:p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),_=f,l=it(e)?0:p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),g=f,w=it(n)?0:p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),m=f,S=it(i)?0:p(i,o.__wbindgen_malloc,o.__wbindgen_realloc),I=f,T=it(a)?0:p(a,o.__wbindgen_malloc,o.__wbindgen_realloc),P=f,O=it(s)?0:p(s,o.__wbindgen_malloc,o.__wbindgen_realloc),N=f;const K=o.webupdatelogininfo_new_with_fields(c,_,l,g,w,m,S,I,T,P,O,N);return Vt.__wrap(K)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_title(this.ptr,e,n)}set domain(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_type(this.ptr,e,n)}set username(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_number(this.ptr,e,n)}set password(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_security_code(this.ptr,e,n)}set loginNote(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_name(this.ptr,e,n)}set totp(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_zipcode(this.ptr,e,n)}}class Bt{static __wrap(t){const e=Object.create(Bt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_webupdatesecurenoteinfo_free(t)}constructor(t,e){var n=it(t)?0:p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f,a=it(e)?0:p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;const c=o.webupdatesecurenoteinfo_new_with_fields(n,i,a,s);return Bt.__wrap(c)}set title(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_title(this.ptr,e,n)}set body(t){const e=p(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=f;o.webupdatecardinfo_set_card_type(this.ptr,e,n)}}function Er(){const r={wbg:{}};return r.wbg.__wbindgen_object_drop_ref=function(t){C(t)},r.wbg.__wbindgen_is_string=function(t){return typeof A(t)=="string"},r.wbg.__wbg_webloginbreachinfo_new=function(t){return L(qe.__wrap(t))},r.wbg.__wbindgen_string_new=function(t,e){return L(V(t,e))},r.wbg.__wbg_webbreachresult_new=function(t){return L(Re.__wrap(t))},r.wbg.__wbindgen_cb_drop=function(t){const e=C(t).original;return e.cnt--==1?(e.a=0,!0):!1},r.wbg.__wbg_webimporteddocumenterror_new=function(t){return L(Be.__wrap(t))},r.wbg.__wbg_webdocumentinfo_new=function(t){return L(Fe.__wrap(t))},r.wbg.__wbg_webimporteddocument_new=function(t){return L(Ve.__wrap(t))},r.wbg.__wbindgen_object_clone_ref=function(t){return L(A(t))},r.wbg.__wbg_log_ae720bd6e814b62e=function(t,e){},r.wbg.__wbg_write_fec8480fd3b6a1b0=function(){return pt(function(t,e,n,i,a){var s=Vn(i,a).slice();return o.__wbindgen_free(i,1*a),L(A(t).write(V(e,n),s))},arguments)},r.wbg.__wbg_read_ece615f9008cbf01=function(){return pt(function(t,e,n){return L(A(t).read(V(e,n)))},arguments)},r.wbg.__wbindgen_is_null=function(t){return A(t)===null},r.wbg.__wbg_delete_7c25aa6ed98fcc12=function(){return pt(function(t,e,n){return L(A(t).delete(V(e,n)))},arguments)},r.wbg.__wbg_eraseAll_0beca228f7926ba7=function(){return pt(function(t){return L(A(t).eraseAll())},arguments)},r.wbg.__wbg_debug_a652f7f779a95ca2=function(t,e){},r.wbg.__wbindgen_number_get=function(t,e){const n=A(e),i=typeof n=="number"?n:void 0;(te.byteLength===0&&(te=new Float64Array(o.memory.buffer)),te)[t/8+1]=it(i)?0:i,d()[t/4+0]=!it(i)},r.wbg.__wbindgen_string_get=function(t,e){const n=A(e),i=typeof n=="string"?n:void 0;var a=it(i)?0:p(i,o.__wbindgen_malloc,o.__wbindgen_realloc),s=f;d()[t/4+1]=s,d()[t/4+0]=a},r.wbg.__wbindgen_number_new=function(t){return L(t)},r.wbg.__wbindgen_json_serialize=function(t,e){const n=A(e),i=p(JSON.stringify(n===void 0?null:n),o.__wbindgen_malloc,o.__wbindgen_realloc),a=f;d()[t/4+1]=a,d()[t/4+0]=i},r.wbg.__wbg_webtotpoutput_new=function(t){return L(ze.__wrap(t))},r.wbg.__wbg_webimportresult_new=function(t){return L(He.__wrap(t))},r.wbg.__wbg_webclient_new=function(t){return L(ie.__wrap(t))},r.wbg.__wbg_webpasswordhealthscore_new=function(t){return L(Ke.__wrap(t))},r.wbg.__wbg_webcsvexportsuccess_new=function(t){return L(Me.__wrap(t))},r.wbg.__wbg_jsencrypt_14bfc2c1c761b2b8=function(t,e,n,i){return L(async function(a,s,c,_){return await crypto.subtle.encrypt({name:"AES-GCM",iv:c,tagLength:8*_},await sn(s,["encrypt"]),a)}(C(t),C(e),C(n),i))},r.wbg.__wbg_jsdecrypt_7cdbf66cf95a5fbb=function(t,e,n,i){return L(async function(a,s,c,_){return await crypto.subtle.decrypt({name:"AES-GCM",iv:c,tagLength:8*_},await sn(s,["decrypt"]),a)}(C(t),C(e),C(n),i))},r.wbg.__wbg_jsrsagenerate_3e391664b4db74e7=function(t){return L(async function(e){return await crypto.subtle.generateKey({name:"RSA-PSS",modulusLength:e,publicExponent:Uint8Array.from([1,0,1]),hash:"SHA-512"},!0,["sign"])}(t))},r.wbg.__wbg_jsrsagetpublickeyder_ace4fa301b155a63=function(t){return L(async function(e){return await crypto.subtle.exportKey("spki",e.publicKey)}(C(t)))},r.wbg.__wbg_jsrsasign_14238677fe485d49=function(t,e,n){return L(async function(i,a,s){var c=new Uint8Array(a.length+s.length);return c.set(a),c.set(s,a.length),await crypto.subtle.sign({name:"RSA-PSS",saltLength:64},i.privateKey,c)}(C(t),C(e),C(n)))},r.wbg.__wbg_jsderivekeyusingpbkdf2hmacsha512_69185b602ccaea25=function(t,e,n){return L(async function(i,a,s){let c=await crypto.subtle.importKey("raw",Uint8Array.from(i),"PBKDF2",!1,["deriveKey"]),_=await crypto.subtle.deriveKey({name:"PBKDF2",hash:"SHA-512",salt:Uint8Array.from(a),iterations:s},c,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return await crypto.subtle.exportKey("raw",_)}(C(t),C(e),n))},r.wbg.__wbg_jsrsagetprivatekeyder_e71b7dc4f6cec5c3=function(t){return L(async function(e){return await crypto.subtle.exportKey("pkcs8",e.privateKey)}(C(t)))},r.wbg.__wbg_jsrsafromprivateder_24fb6150152c30b5=function(t){return L(async function(e){let n=await crypto.subtle.importKey("pkcs8",e,{name:"RSA-PSS",hash:"SHA-512"},!0,["sign"]),i=await crypto.subtle.exportKey("jwk",n);return delete i.d,delete i.dp,delete i.dq,delete i.q,delete i.qi,i.key_ops=["verify"],{publicKey:await crypto.subtle.importKey("jwk",i,{name:"RSA-PSS",hash:"SHA-512"},!0,["verify"]),privateKey:n}}(C(t)))},r.wbg.__wbg_jsgeneratesecurerandombytes_846bf49b2f26b84d=function(t){var e;return L((e=new Uint8Array(t>>>0),crypto.getRandomValues(e),e))},r.wbg.__wbindgen_bigint_new=function(t,e){return L(BigInt(V(t,e)))},r.wbg.__wbindgen_is_undefined=function(t){return A(t)===void 0},r.wbg.__wbindgen_is_object=function(t){const e=A(t);return typeof e=="object"&&e!==null},r.wbg.__wbg_set_e93b31d47b90bff6=function(t,e,n){A(t)[C(e)]=C(n)},r.wbg.__wbg_getRandomValues_3af6527bb0405f8f=function(){return pt(function(t,e){A(t).getRandomValues(A(e))},arguments)},r.wbg.__wbg_randomFillSync_f8d4e42f84f40e2a=function(){return pt(function(t,e){A(t).randomFillSync(C(e))},arguments)},r.wbg.__wbg_crypto_0e9b639eaff47699=function(t){return L(A(t).crypto)},r.wbg.__wbg_process_c1e9ac005dd29bbc=function(t){return L(A(t).process)},r.wbg.__wbg_versions_6850926753fc88df=function(t){return L(A(t).versions)},r.wbg.__wbg_node_c8026099e4c8fb6f=function(t){return L(A(t).node)},r.wbg.__wbg_msCrypto_558ee59e36bf4331=function(t){return L(A(t).msCrypto)},r.wbg.__wbg_require_39d411311735f255=function(){return pt(function(){return L(module.require)},arguments)},r.wbg.__wbindgen_is_function=function(t){return typeof A(t)=="function"},r.wbg.__wbg_new_693216e109162396=function(){return L(new Error)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,e){const n=p(A(e).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;d()[t/4+1]=i,d()[t/4+0]=n},r.wbg.__wbg_error_09919627ac0992f5=function(t,e){o.__wbindgen_free(t,e)},r.wbg.__wbg_get_ad41fee29b7e0f53=function(t,e){return L(A(t)[e>>>0])},r.wbg.__wbg_new_ee1a3da85465d621=function(){return L(new Array)},r.wbg.__wbg_newnoargs_971e9a5abe185139=function(t,e){return L(new Function(V(t,e)))},r.wbg.__wbg_new_ac586205e4424583=function(){return L(new Map)},r.wbg.__wbg_call_33d7bcddbbfa394a=function(){return pt(function(t,e){return L(A(t).call(A(e)))},arguments)},r.wbg.__wbg_new_e6a9fecc2bf26696=function(){return L(new Object)},r.wbg.__wbg_self_fd00a1ef86d1b2ed=function(){return pt(function(){return L(self.self)},arguments)},r.wbg.__wbg_window_6f6e346d8bbd61d7=function(){return pt(function(){return L(window.window)},arguments)},r.wbg.__wbg_globalThis_3348936ac49df00a=function(){return pt(function(){return L(globalThis.globalThis)},arguments)},r.wbg.__wbg_global_67175caf56f55ca9=function(){return pt(function(){return L(global.global)},arguments)},r.wbg.__wbg_set_64cc39858b2ec3f1=function(t,e,n){A(t)[e>>>0]=C(n)},r.wbg.__wbg_from_94cd4a66487bd7a5=function(t){return L(Array.from(A(t)))},r.wbg.__wbg_of_547f094e65266406=function(t,e,n,i){return L(Array.of(A(t),A(e),A(n),A(i)))},r.wbg.__wbg_push_0bc7fce4a139a883=function(t,e){return A(t).push(A(e))},r.wbg.__wbg_new_3ee7ebe9952c1fbd=function(t,e){return L(new Error(V(t,e)))},r.wbg.__wbg_toString_dc4768002eeae1b0=function(t){return L(A(t).toString())},r.wbg.__wbg_apply_769e865e14ecdbb0=function(){return pt(function(t,e,n){return L(A(t).apply(A(e),A(n)))},arguments)},r.wbg.__wbg_call_65af9f665ab6ade5=function(){return pt(function(t,e,n){return L(A(t).call(A(e),A(n)))},arguments)},r.wbg.__wbg_forEach_628afc3bb0839ff6=function(t,e,n){try{var i={a:e,b:n};A(t).forEach((a,s)=>{const c=i.a;i.a=0;try{return _n(c,i.b,a,s)}finally{i.a=c}})}finally{i.a=i.b=0}},r.wbg.__wbg_set_a55cff623a9eaa21=function(t,e,n){return L(A(t).set(A(e),A(n)))},r.wbg.__wbg_size_504c6eacd6726e79=function(t){return A(t).size},r.wbg.__wbg_getDate_f20acf8f355c1548=function(t){return A(t).getDate()},r.wbg.__wbg_getFullYear_510776369b70e4d4=function(t){return A(t).getFullYear()},r.wbg.__wbg_getHours_c28f91039684cb1f=function(t){return A(t).getHours()},r.wbg.__wbg_getMinutes_26a1dc1cf3ffcae3=function(t){return A(t).getMinutes()},r.wbg.__wbg_getMonth_6da8f70e631b1342=function(t){return A(t).getMonth()},r.wbg.__wbg_getSeconds_dfe20c13b5fb28ac=function(t){return A(t).getSeconds()},r.wbg.__wbg_getTime_58b0bdbebd4ef11d=function(t){return A(t).getTime()},r.wbg.__wbg_new_54cbca578174a105=function(t){return L(new Date(A(t)))},r.wbg.__wbg_new0_adda2d4bcb124f0a=function(){return L(new Date)},r.wbg.__wbg_new_52205195aa880fc2=function(t,e){try{var n={a:t,b:e};const i=new Promise((a,s)=>{const c=n.a;n.a=0;try{return _n(c,n.b,a,s)}finally{n.a=c}});return L(i)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_0107b3a501450ba0=function(t){return L(Promise.resolve(A(t)))},r.wbg.__wbg_then_18da6e5453572fc8=function(t,e){return L(A(t).then(A(e)))},r.wbg.__wbg_then_e5489f796341454b=function(t,e,n){return L(A(t).then(A(e),A(n)))},r.wbg.__wbg_buffer_34f5ec9f8a838ba0=function(t){return L(A(t).buffer)},r.wbg.__wbg_newwithbyteoffsetandlength_88fdad741db1b182=function(t,e,n){return L(new Uint8Array(A(t),e>>>0,n>>>0))},r.wbg.__wbg_new_cda198d9dbc6d7ea=function(t){return L(new Uint8Array(A(t)))},r.wbg.__wbg_set_1a930cfcda1a8067=function(t,e,n){A(t).set(A(e),n>>>0)},r.wbg.__wbg_length_51f19f73d6d9eff3=function(t){return A(t).length},r.wbg.__wbg_newwithlength_66e5530e7079ea1b=function(t){return L(new Uint8Array(t>>>0))},r.wbg.__wbg_subarray_270ff8dd5582c1ac=function(t,e,n){return L(A(t).subarray(e>>>0,n>>>0))},r.wbg.__wbindgen_debug_string=function(t,e){const n=p(Oe(A(e)),o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;d()[t/4+1]=i,d()[t/4+0]=n},r.wbg.__wbindgen_throw=function(t,e){throw new Error(V(t,e))},r.wbg.__wbindgen_memory=function(){return L(o.memory)},r.wbg.__wbindgen_closure_wrapper4236=function(t,e,n){const i=function(a,s,c,_){const l={a,b:s,cnt:1,dtor:c},g=(...w)=>{l.cnt++;const m=l.a;l.a=0;try{return _(m,l.b,...w)}finally{--l.cnt==0?o.__wbindgen_export_2.get(l.dtor)(m,l.b):l.a=m}};return g.original=l,g}(t,e,956,Cr);return L(i)},r}async function Je(r){r===void 0&&(r=new URL("/assets/pmcore_bg-D8f0Z9c_.wasm",import.meta.url));const t=Er();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));const{instance:e,module:n}=await async function(i,a){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,a)}catch(c){if(i.headers.get("Content-Type")=="application/wasm")throw c}const s=await i.arrayBuffer();return await WebAssembly.instantiate(s,a)}{const s=await WebAssembly.instantiate(i,a);return s instanceof WebAssembly.Instance?{instance:s,module:i}:s}}(await r,t);return function(i,a){return o=i.exports,Je.__wbindgen_wasm_module=a,te=new Float64Array,ee=new Int32Array,Zt=new Uint8Array,o}(e,n)}Je();const ln="Master password must not be blank",dn="Recovery code must not be blank";class Sr{constructor(t=()=>{}){v(this,"DEFAULT_PWM_PATH","https://www.expressapisv2.net/passmgr");v(this,"PWM_PATH");v(this,"chromeStorage");v(this,"token");v(this,"tokenRetries");v(this,"MAX_TOKEN_RETRIES");v(this,"lockedClient");v(this,"unlockedClient");v(this,"callback");v(this,"initPmcoreWasm",async()=>Je());v(this,"clientCall",async t=>{if(!this.unlockedClient)throw new Error("errors.locked");if(!(t.call in this.unlockedClient))throw new Error("errors.no_function");try{const e=await this.unlockedClient[t.call].apply(this.unlockedClient,t.args);if(t.call==="exportVaultDocumentsAsCsv")return e.csv;if(t.call==="createNewDocumentsFromCsv")return[...e.documents,...e.document_errors];if(t.call==="getLoginTotpCode"){const n=e;return{code:n.code,expiry:Number(n.expiry),totpExists:n.totpExists}}return Zn(e)}catch(e){throw jn(e)&&await this.lock(),e}});v(this,"determineActionFromAccountState",async()=>{if(!this.lockedClient)throw new Error("error.not_logged_in");return this.lockedClient.determineActionFromAccountState()});v(this,"checkUserExistsAndAuthenticated",async()=>{var e;const t={exists:!1,authenticated:!1};if(this.lockedClient){try{const n=await this.lockedClient.checkUserExists(!0);t.exists=n,t.authenticated=!0}catch(n){if(Yt(n,"error.api.resync_required"))t.exists=!0,t.authenticated=!0;else{if(typeof n!="string"||!((e=n.startsWith)!=null&&e.call(n,"error.api.token_scope")))throw Yt(n,"error.api.token_invalid")&&this.chromeStorage.removeItem("accountState"),n;try{const i=await this.lockedClient.checkUserExists(!1);t.exists=i,t.authenticated=!1}catch(i){throw Yt(i,"error.api.token_invalid")&&this.chromeStorage.removeItem("accountState"),i}}}return this.chromeStorage.writeAny("accountState",t),t}});v(this,"unlock",async({password:t})=>{if(this.unlockedClient)return!0;if(!this.lockedClient)throw new Error("error.not_logged_in");return this.unlockedClient=await this.lockedClient.unlock(t),!0});v(this,"lock",async()=>{this.unlockedClient&&(this.unlockedClient.free(),this.unlockedClient=null)});v(this,"deleteAccount",async()=>{if(!this.unlockedClient)throw new Error("errors.locked");return await this.unlockedClient.deleteAccount(),await this.lock(),this.lockedClient=null,!0});v(this,"isUnlocked",async()=>Promise.resolve(!!this.unlockedClient));v(this,"isNewTokenAvailable",t=>{const e=Date.now(),n=this.token;return new Promise(function i(a,s){t!==n?a(n):Date.now()-e>=3e4?s(new Error("timeout")):setTimeout(i.bind(this,a,s),50)})});v(this,"makeHttpRequest",async(t,e,n,i,a)=>{var w;const s={method:e,cache:"no-cache",headers:{"X-Auth-Token":a},redirect:"manual",referrerPolicy:"no-referrer",mode:"cors",body:i};t.startsWith(this.DEFAULT_PWM_PATH)||(s.headers["X-User-ID"]=1),i&&(s.body=i),n.forEach((m,S)=>{s.headers[S]=m});const c=await fetch(t,s);if([401,440].includes(c.status)&&this.tokenRetries<this.MAX_TOKEN_RETRIES){let m=!1;this.tokenRetries+=1,this.callback({method:"refreshToken"});const S=await this.isNewTokenAvailable(a).catch(()=>{m=!0});if(!m&&S)return this.makeHttpRequest(t,e,n,i,S)}else c.status.toString().startsWith("4")||(this.tokenRetries=0);const _=await c.blob(),l=await _.arrayBuffer(),g=new Map;return(w=c.headers)==null||w.forEach((m,S)=>g.set(S,m)),[c.status,g,l]});v(this,"generateRecoveryKey",async()=>function(){try{const c=o.__wbindgen_add_to_stack_pointer(-16);o.generateRecoveryKey(c);var t=d()[c/4+0],e=d()[c/4+1],n=d()[c/4+2],i=d()[c/4+3],a=t,s=e;if(i)throw a=0,s=0,C(n);return V(a,s)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(a,s)}}());v(this,"generateRecoveryKeyPdf",async t=>{const e=function(n,i){try{const l=o.__wbindgen_add_to_stack_pointer(-16),g=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),w=f;o.generateRecoveryKeyPdf(l,g,w,L(i));var a=d()[l/4+0],s=d()[l/4+1],c=d()[l/4+2];if(d()[l/4+3])throw C(c);var _=Vn(a,s).slice();return o.__wbindgen_free(a,1*s),_}finally{o.__wbindgen_add_to_stack_pointer(16)}}(t.recoveryKey,t.localizedStrings);return Array.from(e)});v(this,"versions",async()=>{const t=await chrome.storage.local.get("uuid");let e=t==null?void 0:t.uuid;e||(e=navigator.webdriver?"E2E_tests":vr(),await chrome.storage.local.set({uuid:e}));let n=chrome.runtime.getManifest().version;const i=new Rt(e,n),a=navigator.platform;return a.startsWith("Linux")?i.setOsVersion(he.Linux,"unknown"):a.startsWith("Win")?i.setOsVersion(he.Windows,"unknown"):a.startsWith("Mac")&&i.setOsVersion(he.Mac,"unknown"),i.setAppExtra("browser_extension"),i});v(this,"createLockedClient",async t=>{if(!t)throw new Error("Token must not be empty");const e=await this.versions();return new ae(this.chromeStorage,e,this.PWM_PATH,async(n,i,a,s)=>this.makeHttpRequest(n,i,a,s,t))});v(this,"createNewUser",async t=>{if(!this.lockedClient)throw new Error("errors.locked");if(!t.master_password)throw new Error(ln);if(!t.recovery_password)throw new Error(dn);return this.lockedClient.createNewUser(t.master_password,t.recovery_password).then(()=>(Mn(),this.unlock({password:t.master_password})))});v(this,"setToken",async t=>{this.token=t,this.lockedClient=await this.createLockedClient(t)});v(this,"createNewLogin",async t=>{if(!this.unlockedClient)throw new Error("errors.locked");const e=new Mt(t.title,t.domain??"",t.username??"",t.password??"",t.loginNote??"",t.totp??"");return this.unlockedClient.createNewLogin(e)});v(this,"createNewCard",async t=>{var a;if(!this.unlockedClient)throw new Error("errors.locked");const e=((a=t.cardNumber)==null?void 0:a.replace(/ /g,""))??"",n=cn(e),i=jt.new(t.title,n,e,t.securityCode??"",t.name??"",t.zipcode??"",t.expiry??"",t.note??"");return this.unlockedClient.createNewCard(i)});v(this,"createNewSecureNote",async t=>{if(!this.unlockedClient)throw new Error("errors.locked");const e=new Ft(t.title,t.body);return this.unlockedClient.createNewNote(e)});v(this,"changeMasterPassword",async({masterPassword:t,newMasterPassword:e})=>{if(!e)throw new Error(ln);if(this.unlockedClient)await this.unlockedClient.changeMasterPassword(t,e),await this.lock();else if(this.lockedClient){let n=await this.lockedClient.unlock(t);await n.changeMasterPassword(t,e),n=null}});v(this,"webGeneratePassword",async t=>function(e){try{const l=o.__wbindgen_add_to_stack_pointer(-16);o.webGeneratePassword(l,L(e));var n=d()[l/4+0],i=d()[l/4+1],a=d()[l/4+2],s=d()[l/4+3],c=n,_=i;if(s)throw c=0,_=0,C(a);return V(c,_)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(c,_)}}({length:t.length,must_contain_uppercase:t.mustContainUppercase,must_contain_lowercase:t.mustContainLowercase,must_contain_number:t.mustContainNumber,must_contain_symbol:t.mustContainSymbol,must_exclude_symbols:t.mustExcludeSymbols}));v(this,"updateLogin",async t=>{if(!this.unlockedClient)throw new Error("errors.locked");const e=new Vt(t.title,t.domain,t.username,t.password,t.loginNote,t.totp);return this.unlockedClient.updateLogin(t.uuid,e)});v(this,"updateCard",async t=>{var a;if(!this.unlockedClient)throw new Error("errors.locked");const e=((a=t.cardNumber)==null?void 0:a.replace(/ /g,""))??"",n=cn(e),i=new Ht(t.title,n,e,t.securityCode,t.name,t.zipcode,t.expiry,t.note);return this.unlockedClient.updateCard(t.uuid,i)});v(this,"updateSecureNote",async t=>{if(!this.unlockedClient)throw new Error("errors.locked");const e=new Bt(t.title,t.body);return this.unlockedClient.updateSecureNote(t.uuid,e)});v(this,"getDocumentationForTOTPSite",async({domain:t})=>function(e){try{const a=o.__wbindgen_add_to_stack_pointer(-16),s=p(e,o.__wbindgen_malloc,o.__wbindgen_realloc),c=f;o.getDocumentationForTOTPSite(a,s,c);var n=d()[a/4+0],i=d()[a/4+1];let _;return n!==0&&(_=V(n,i).slice(),o.__wbindgen_free(n,1*i)),_}finally{o.__wbindgen_add_to_stack_pointer(16)}}(t));v(this,"generateTotpCode",async({totp:t})=>{const e=function(n){try{const s=o.__wbindgen_add_to_stack_pointer(-16),c=p(n,o.__wbindgen_malloc,o.__wbindgen_realloc),_=f;o.generateTotpCode(s,c,_);var i=d()[s/4+0],a=d()[s/4+1];if(d()[s/4+2])throw C(a);return C(i)}finally{o.__wbindgen_add_to_stack_pointer(16)}}(t);return{code:e.code,expiry:Number(e.expiry),issuer:e.issuer,account:e.account}});v(this,"checkPasswordStrength",async({password:t})=>{if(!t)return;const{score:e,crackTimeOnlineNoThrottling10PerSecond:n,warning:i,suggestions:a}=function(s){try{const l=o.__wbindgen_add_to_stack_pointer(-16),g=p(s,o.__wbindgen_malloc,o.__wbindgen_realloc),w=f;o.checkPasswordStrength(l,g,w);var c=d()[l/4+0],_=d()[l/4+1];if(d()[l/4+2])throw C(_);return ce.__wrap(c)}finally{o.__wbindgen_add_to_stack_pointer(16)}}(t);return{score:e,crackDuration:tr(n),warning:i,suggestions:a}});v(this,"documentList",async()=>{if(!this.unlockedClient)throw new Error("errors.locked");return(await this.unlockedClient.documentList()).map(er).filter(t=>["login","secureNote","card"].includes(t.type))});v(this,"verifyPrimaryPassword",async({password:t})=>{if(!this.lockedClient)throw new Error("error.not_logged_in");return this.unlockedClient=await this.lockedClient.unlock(t),!0});v(this,"verifyRecoveryCode",async({recoveryCode:t})=>{if(!this.lockedClient)throw new Error("error.not_logged_in");return await this.lockedClient.recover(t),!0});v(this,"changeMasterPasswordUsingRecoveryPassword",async({recoveryCode:t,newMasterPassword:e})=>{if(!this.lockedClient)throw new Error("error.not_logged_in");if(this.unlockedClient)await this.unlockedClient.changeMasterPasswordUsingRecoveryPassword(t,e);else if(this.lockedClient){let n=await this.lockedClient.recover(t);await n.changeMasterPasswordUsingRecoveryPassword(t,e),n=null}return!0});v(this,"changeRecoveryPassword",async({masterPassword:t,newRecoveryCode:e})=>{if(!e)throw new Error(dn);this.unlockedClient?await this.unlockedClient.changeRecoveryPassword(t,e):this.lockedClient&&await(await this.lockedClient.unlock(t)).changeRecoveryPassword(t,e)});v(this,"getWebsiteLogins",async({tab:t,associatedDomains:e})=>{const n={hostLoginItems:[],domainLoginItems:[]},i=t&&Object.keys(t).length?t:await new Promise(a=>chrome.tabs.query({currentWindow:!0,active:!0},s=>a(s[0])));if(i)try{const a=(await this.documentList()).filter(s=>s.type==="login");await Promise.all(a.map(async s=>{const[c,_]=await this.getMatchingLoginDocument(i.url??"",s,e);c&&n.hostLoginItems.push(c),_&&n.domainLoginItems.push(_)}))}catch{throw new Error("error.getWebsiteLogin failed")}return n});this.PWM_PATH=this.DEFAULT_PWM_PATH,this.MAX_TOKEN_RETRIES=2,this.chromeStorage=new Ae,this.token="",this.tokenRetries=0,this.lockedClient=null,this.unlockedClient=null,this.callback=t}async getMatchingLoginDocument(t,e,n){const i=nr(e.domain),a=rr(t,i),s=or(t,i,n)||Fn(t,i);if(a||s){const c=await this.clientCall({call:"getLoginBody",args:[e.uuid]}).then(g=>g.l),_=await this.clientCall({call:"getLoginTotpCode",args:[e.uuid]}),l={...e,password:c,totp:_.code};return[a?l:void 0,s?l:void 0]}return[void 0,void 0]}}class Tr{constructor(t){this.background=t}handle(t,e,n){const{command:i,args:a}=t;if(!(i in this.background.pwmHelper))throw new Error(`Method "${i}" does not exist in PwmHelper class`);(0,this.background.pwmHelper[i])(a).then(s=>{n({success:!0,data:s})}).catch(s=>{n({success:!1,error:(s==null?void 0:s.message)??String(s)})})}}class xr{constructor(t){this.background=t}handle(t,e,n){const{command:i,args:a}=t;this.background.pwmHelper.clientCall({call:i,args:a}).then(s=>{n({success:!0,data:s})}).catch(s=>{jn(s)?bt("checkVaultLockStatus",void 0):n({success:!1,error:(s==null?void 0:s.message)??String(s)})})}}class Ir{constructor(t){this.background=t}handle(t,e,n){const{command:i,args:a}=t;if(!(i in this.background.nativeCommunication))throw new Error(`Method "${i}" does not exist in NativeCommunication class`);this.background.nativeCommunication[i](a),n({success:!0,data:void 0})}}class Pr{constructor(t){this.background=t}async handle(t,e,n){const{command:i,args:a}=t;switch(i){case"saveToSessionStorage":{const c=a;await new Ne().writeAny(c.key,c.value)}break;case"flushTelemetry":oe.getSingletonInstance().then(c=>c.flushTelemetry()).catch(c=>n({success:!1,error:(c==null?void 0:c.message)??String(c)}));break;case"sendTelemetry":oe.getSingletonInstance().then(c=>c.sendTelemetry(a)).catch(c=>n({success:!1,error:(c==null?void 0:c.message)??String(c)}));break;case"clearClipboardAfterDelay":Qt("CLEAR_CLIPBOARD",{delayInMinutes:a.delaySec/60});break;case"getFlags":n({success:!0,data:this.background.currentInfo.flags});break;case"notify":const s=a;De(s.notificationId,s.options,s.clearNotificationAfter);break;default:throw new Error(`Method "${i}" is not supported`)}return n({success:!0,data:!0}),!0}}function Pt(r){function t(e,n){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=n}return t.prototype=new Error,t.prototype.name=r,t.prototype.constructor=t,t}const Lr=Pt("LaunchDarklyUnexpectedResponseError"),Ar=Pt("LaunchDarklyInvalidEnvironmentIdError"),Dr=Pt("LaunchDarklyInvalidUserError"),Nr=Pt("LaunchDarklyInvalidEventKeyError"),Or=Pt("LaunchDarklyInvalidArgumentError"),Ur=Pt("LaunchDarklyFlagFetchError");for(var st={LDUnexpectedResponseError:Lr,LDInvalidEnvironmentIdError:Ar,LDInvalidUserError:Dr,LDInvalidEventKeyError:Nr,LDInvalidArgumentError:Or,LDInvalidDataError:Pt("LaunchDarklyInvalidDataError"),LDFlagFetchError:Ur,isHttpErrorRecoverable:function(r){return!(r>=400&&r<500)||r===400||r===408||r===429}},vt=[],mt=[],Rr=typeof Uint8Array<"u"?Uint8Array:Array,un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt=0;Lt<64;++Lt)vt[Lt]=un[Lt],mt[un.charCodeAt(Lt)]=Lt;function gn(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return e===-1&&(e=t),[e,e===t?0:4-e%4]}function jr(r,t,e){for(var n,i,a=[],s=t;s<e;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(255&r[s+2]),a.push(vt[(i=n)>>18&63]+vt[i>>12&63]+vt[i>>6&63]+vt[63&i]);return a.join("")}mt[45]=62,mt[95]=63;var Mr={byteLength:function(r){var t=gn(r),e=t[0],n=t[1];return 3*(e+n)/4-n},toByteArray:function(r){var t,e,n=gn(r),i=n[0],a=n[1],s=new Rr(function(l,g,w){return 3*(g+w)/4-w}(0,i,a)),c=0,_=a>0?i-4:i;for(e=0;e<_;e+=4)t=mt[r.charCodeAt(e)]<<18|mt[r.charCodeAt(e+1)]<<12|mt[r.charCodeAt(e+2)]<<6|mt[r.charCodeAt(e+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return a===2&&(t=mt[r.charCodeAt(e)]<<2|mt[r.charCodeAt(e+1)]>>4,s[c++]=255&t),a===1&&(t=mt[r.charCodeAt(e)]<<10|mt[r.charCodeAt(e+1)]<<4|mt[r.charCodeAt(e+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},fromByteArray:function(r){for(var t,e=r.length,n=e%3,i=[],a=16383,s=0,c=e-n;s<c;s+=a)i.push(jr(r,s,s+a>c?c:s+a));return n===1?(t=r[e-1],i.push(vt[t>>2]+vt[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],i.push(vt[t>>10]+vt[t>>4&63]+vt[t<<2&63]+"=")),i.join("")}},wn=Array.isArray,fn=Object.keys,Fr=Object.prototype.hasOwnProperty,Hr=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n,i,a,s=wn(t),c=wn(e);if(s&&c){if((i=t.length)!=e.length)return!1;for(n=i;n--!=0;)if(!r(t[n],e[n]))return!1;return!0}if(s!=c)return!1;var _=t instanceof Date,l=e instanceof Date;if(_!=l)return!1;if(_&&l)return t.getTime()==e.getTime();var g=t instanceof RegExp,w=e instanceof RegExp;if(g!=w)return!1;if(g&&w)return t.toString()==e.toString();var m=fn(t);if((i=m.length)!==fn(e).length)return!1;for(n=i;n--!=0;)if(!Fr.call(e,m[n]))return!1;for(n=i;n--!=0;)if(!r(t[a=m[n]],e[a]))return!1;return!0}return t!=t&&e!=e};const Vr=["key","ip","country","email","firstName","lastName","avatar","name"];function Bn(r){const t=unescape(encodeURIComponent(r));return Mr.fromByteArray(function(e){const n=[];for(let i=0;i<e.length;i++)n.push(e.charCodeAt(i));return n}(t))}function pn(r){return Bn(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function be(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var me,X={appendUrlPath:function(r,t){return(r.endsWith("/")?r.substring(0,r.length-1):r)+(t.startsWith("/")?"":"/")+t},base64URLEncode:pn,btoa:Bn,chunkEventsForUrl:function(r,t){const e=t.slice(0),n=[];let i,a=r;for(;e.length>0;){for(i=[];a>0;){const s=e.shift();if(!s)break;a-=pn(JSON.stringify(s)).length,a<0&&i.length>0?e.unshift(s):i.push(s)}a=r,n.push(i)}return n},clone:function(r){return JSON.parse(JSON.stringify(r))},deepEquals:function(r,t){return Hr(r,t)},extend:function(...r){return r.reduce((t,e)=>({...t,...e}),{})},getLDUserAgentString:function(r){const t=r.version||"?";return r.userAgent+"/"+t},objectHasOwnProperty:be,onNextTick:function(r){setTimeout(r,0)},sanitizeContext:function(r){if(!r)return r;let t;return r.kind!==null&&r.kind!==void 0||Vr.forEach(e=>{const n=r[e];n!==void 0&&typeof n!="string"&&(t=t||{...r},t[e]=String(n))}),t||r},transformValuesToVersionedValues:function(r){const t={};for(const e in r)be(r,e)&&(t[e]={value:r[e],version:0});return t},transformVersionedValuesToValues:function(r){const t={};for(const e in r)be(r,e)&&(t[e]=r[e].value);return t},wrapPromiseCallback:function(r,t){const e=r.then(n=>(t&&setTimeout(()=>{t(null,n)},0),n),n=>{if(!t)return Promise.reject(n);setTimeout(()=>{t(n,null)},0)});return t?void 0:e}},Br=new Uint8Array(16);function hn(){if(!me&&!(me=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return me(Br)}var qr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function se(r){return typeof r=="string"&&qr.test(r)}for(var bn,ye,lt=[],ve=0;ve<256;++ve)lt.push((ve+256).toString(16).substr(1));function re(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(lt[r[t+0]]+lt[r[t+1]]+lt[r[t+2]]+lt[r[t+3]]+"-"+lt[r[t+4]]+lt[r[t+5]]+"-"+lt[r[t+6]]+lt[r[t+7]]+"-"+lt[r[t+8]]+lt[r[t+9]]+"-"+lt[r[t+10]]+lt[r[t+11]]+lt[r[t+12]]+lt[r[t+13]]+lt[r[t+14]]+lt[r[t+15]]).toLowerCase();if(!se(e))throw TypeError("Stringified UUID is invalid");return e}var ke=0,Ce=0;function qn(r){if(!se(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=255&t,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=255&t,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=255&t,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=255&t,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=255&t,e}function $n(r,t,e){function n(i,a,s,c){if(typeof i=="string"&&(i=function(g){g=unescape(encodeURIComponent(g));for(var w=[],m=0;m<g.length;++m)w.push(g.charCodeAt(m));return w}(i)),typeof a=="string"&&(a=qn(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var _=new Uint8Array(16+i.length);if(_.set(a),_.set(i,a.length),(_=e(_))[6]=15&_[6]|t,_[8]=63&_[8]|128,s){c=c||0;for(var l=0;l<16;++l)s[c+l]=_[l];return s}return re(_)}try{n.name=r}catch{}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function mn(r){return 14+(r+64>>>9<<4)+1}function Tt(r,t){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}function _e(r,t,e,n,i,a){return Tt((s=Tt(Tt(t,r),Tt(n,a)))<<(c=i)|s>>>32-c,e);var s,c}function dt(r,t,e,n,i,a,s){return _e(t&e|~t&n,r,t,i,a,s)}function ut(r,t,e,n,i,a,s){return _e(t&n|e&~n,r,t,i,a,s)}function gt(r,t,e,n,i,a,s){return _e(t^e^n,r,t,i,a,s)}function wt(r,t,e,n,i,a,s){return _e(e^(t|~n),r,t,i,a,s)}var $r=$n("v3",48,function(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return function(n){for(var i=[],a=32*n.length,s="0123456789abcdef",c=0;c<a;c+=8){var _=n[c>>5]>>>c%32&255,l=parseInt(s.charAt(_>>>4&15)+s.charAt(15&_),16);i.push(l)}return i}(function(n,i){n[i>>5]|=128<<i%32,n[mn(i)-1]=i;for(var a=1732584193,s=-271733879,c=-1732584194,_=271733878,l=0;l<n.length;l+=16){var g=a,w=s,m=c,S=_;a=dt(a,s,c,_,n[l],7,-680876936),_=dt(_,a,s,c,n[l+1],12,-389564586),c=dt(c,_,a,s,n[l+2],17,606105819),s=dt(s,c,_,a,n[l+3],22,-1044525330),a=dt(a,s,c,_,n[l+4],7,-176418897),_=dt(_,a,s,c,n[l+5],12,1200080426),c=dt(c,_,a,s,n[l+6],17,-1473231341),s=dt(s,c,_,a,n[l+7],22,-45705983),a=dt(a,s,c,_,n[l+8],7,1770035416),_=dt(_,a,s,c,n[l+9],12,-1958414417),c=dt(c,_,a,s,n[l+10],17,-42063),s=dt(s,c,_,a,n[l+11],22,-1990404162),a=dt(a,s,c,_,n[l+12],7,1804603682),_=dt(_,a,s,c,n[l+13],12,-40341101),c=dt(c,_,a,s,n[l+14],17,-1502002290),a=ut(a,s=dt(s,c,_,a,n[l+15],22,1236535329),c,_,n[l+1],5,-165796510),_=ut(_,a,s,c,n[l+6],9,-1069501632),c=ut(c,_,a,s,n[l+11],14,643717713),s=ut(s,c,_,a,n[l],20,-373897302),a=ut(a,s,c,_,n[l+5],5,-701558691),_=ut(_,a,s,c,n[l+10],9,38016083),c=ut(c,_,a,s,n[l+15],14,-660478335),s=ut(s,c,_,a,n[l+4],20,-405537848),a=ut(a,s,c,_,n[l+9],5,568446438),_=ut(_,a,s,c,n[l+14],9,-1019803690),c=ut(c,_,a,s,n[l+3],14,-187363961),s=ut(s,c,_,a,n[l+8],20,1163531501),a=ut(a,s,c,_,n[l+13],5,-1444681467),_=ut(_,a,s,c,n[l+2],9,-51403784),c=ut(c,_,a,s,n[l+7],14,1735328473),a=gt(a,s=ut(s,c,_,a,n[l+12],20,-1926607734),c,_,n[l+5],4,-378558),_=gt(_,a,s,c,n[l+8],11,-2022574463),c=gt(c,_,a,s,n[l+11],16,1839030562),s=gt(s,c,_,a,n[l+14],23,-35309556),a=gt(a,s,c,_,n[l+1],4,-1530992060),_=gt(_,a,s,c,n[l+4],11,1272893353),c=gt(c,_,a,s,n[l+7],16,-155497632),s=gt(s,c,_,a,n[l+10],23,-1094730640),a=gt(a,s,c,_,n[l+13],4,681279174),_=gt(_,a,s,c,n[l],11,-358537222),c=gt(c,_,a,s,n[l+3],16,-722521979),s=gt(s,c,_,a,n[l+6],23,76029189),a=gt(a,s,c,_,n[l+9],4,-640364487),_=gt(_,a,s,c,n[l+12],11,-421815835),c=gt(c,_,a,s,n[l+15],16,530742520),a=wt(a,s=gt(s,c,_,a,n[l+2],23,-995338651),c,_,n[l],6,-198630844),_=wt(_,a,s,c,n[l+7],10,1126891415),c=wt(c,_,a,s,n[l+14],15,-1416354905),s=wt(s,c,_,a,n[l+5],21,-57434055),a=wt(a,s,c,_,n[l+12],6,1700485571),_=wt(_,a,s,c,n[l+3],10,-1894986606),c=wt(c,_,a,s,n[l+10],15,-1051523),s=wt(s,c,_,a,n[l+1],21,-2054922799),a=wt(a,s,c,_,n[l+8],6,1873313359),_=wt(_,a,s,c,n[l+15],10,-30611744),c=wt(c,_,a,s,n[l+6],15,-1560198380),s=wt(s,c,_,a,n[l+13],21,1309151649),a=wt(a,s,c,_,n[l+4],6,-145523070),_=wt(_,a,s,c,n[l+11],10,-1120210379),c=wt(c,_,a,s,n[l+2],15,718787259),s=wt(s,c,_,a,n[l+9],21,-343485551),a=Tt(a,g),s=Tt(s,w),c=Tt(c,m),_=Tt(_,S)}return[a,s,c,_]}(function(n){if(n.length===0)return[];for(var i=8*n.length,a=new Uint32Array(mn(i)),s=0;s<i;s+=8)a[s>>5]|=(255&n[s/8])<<s%32;return a}(r),8*r.length))}),Kr=$r;function Wr(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:case 3:return t^e^n;case 2:return t&e^t&n^e&n}}function Ee(r,t){return r<<t|r>>>32-t}var zr=$n("v5",80,function(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var a=r.length/4+2,s=Math.ceil(a/16),c=new Array(s),_=0;_<s;++_){for(var l=new Uint32Array(16),g=0;g<16;++g)l[g]=r[64*_+4*g]<<24|r[64*_+4*g+1]<<16|r[64*_+4*g+2]<<8|r[64*_+4*g+3];c[_]=l}c[s-1][14]=8*(r.length-1)/Math.pow(2,32),c[s-1][14]=Math.floor(c[s-1][14]),c[s-1][15]=8*(r.length-1)&4294967295;for(var w=0;w<s;++w){for(var m=new Uint32Array(80),S=0;S<16;++S)m[S]=c[w][S];for(var I=16;I<80;++I)m[I]=Ee(m[I-3]^m[I-8]^m[I-14]^m[I-16],1);for(var T=e[0],P=e[1],O=e[2],N=e[3],K=e[4],j=0;j<80;++j){var Z=Math.floor(j/20),U=Ee(T,5)+Wr(Z,P,O,N)+K+t[Z]+m[j]>>>0;K=N,N=O,O=Ee(P,30)>>>0,P=T,T=U}e[0]=e[0]+T>>>0,e[1]=e[1]+P>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+N>>>0,e[4]=e[4]+K>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}),Jr=zr,Ge=Object.freeze({__proto__:null,v1:function(r,t,e){var n=t&&e||0,i=t||new Array(16),a=(r=r||{}).node||bn,s=r.clockseq!==void 0?r.clockseq:ye;if(a==null||s==null){var c=r.random||(r.rng||hn)();a==null&&(a=bn=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),s==null&&(s=ye=16383&(c[6]<<8|c[7]))}var _=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:Ce+1,g=_-ke+(l-Ce)/1e4;if(g<0&&r.clockseq===void 0&&(s=s+1&16383),(g<0||_>ke)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ke=_,Ce=l,ye=s;var w=(1e4*(268435455&(_+=122192928e5))+l)%4294967296;i[n++]=w>>>24&255,i[n++]=w>>>16&255,i[n++]=w>>>8&255,i[n++]=255&w;var m=_/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var S=0;S<6;++S)i[n+S]=a[S];return t||re(i)},v3:Kr,v4:function(r,t,e){var n=(r=r||{}).random||(r.rng||hn)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return re(n)},v5:Jr,NIL:"00000000-0000-0000-0000-000000000000",version:function(r){if(!se(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)},validate:se,stringify:re,parse:qn});const Ot=["debug","info","warn","error","none"];var Xe={commonBasicLogger:function(r,t){if(r&&r.destination&&typeof r.destination!="function")throw new Error("destination for basicLogger was set to a non-function");function e(l){return function(g){console&&console[l]}}const n=r&&r.destination?[r.destination,r.destination,r.destination,r.destination]:[e("log"),e("info"),e("warn"),e("error")],i=!(!r||!r.destination),a=r&&r.prefix!==void 0&&r.prefix!==null?r.prefix:"[LaunchDarkly] ";let s=1;if(r&&r.level)for(let l=0;l<Ot.length;l++)Ot[l]===r.level&&(s=l);function c(l,g,w){if(w.length<1)return;let m;const S=i?g+": "+a:a;if(w.length!==1&&t){const I=[...w];I[0]=S+I[0],m=t(...I)}else m=S+w[0];try{n[l](m)}catch{}}const _={};for(let l=0;l<Ot.length;l++){const g=Ot[l];if(g!=="none")if(l<s)_[g]=()=>{};else{const w=l;_[g]=function(){c(w,g,arguments)}}}return _},validateLogger:function(r){Ot.forEach(t=>{if(t!=="none"&&(!r[t]||typeof r[t]!="function"))throw new Error("Provided logger instance must support logger."+t+"(...) method")})}};function $t(r){return r&&r.message?r.message:typeof r=="string"||r instanceof String?r:JSON.stringify(r)}const At=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.";var z={bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},bootstrapOldFormat:function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+At},clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},debugEnqueueingEvent:function(r){return'enqueueing "'+r+'" event'},debugPostingDiagnosticEvent:function(r){return"sending diagnostic event ("+r.kind+")"},debugPostingEvents:function(r){return"sending "+r+" events"},debugStreamDelete:function(r){return'received streaming deletion for flag "'+r+'"'},debugStreamDeleteIgnored:function(r){return'received streaming deletion for flag "'+r+'" but ignored due to version check'},debugStreamPatch:function(r){return'received streaming update for flag "'+r+'"'},debugStreamPatchIgnored:function(r){return'received streaming update for flag "'+r+'" but ignored due to version check'},debugStreamPing:function(){return"received ping message from stream"},debugPolling:function(r){return"polling for feature flags at "+r},debugStreamPut:function(){return"received streaming update for all flags"},deprecated:function(r,t){return t?'"'+r+'" is deprecated, please use "'+t+'"':'"'+r+'" is deprecated'},environmentNotFound:function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+At},environmentNotSpecified:function(){return"No environment/client-side ID was specified."+At},errorFetchingFlags:function(r){return"Error fetching flag settings: "+$t(r)},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutContext:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},httpErrorMessage:function(r,t,e){return"Received error "+r+(r===401?" (invalid SDK key)":"")+" for "+t+" - "+(st.isHttpErrorRecoverable(r)?e:"giving up permanently")},httpUnavailable:function(){return"Cannot make HTTP requests in this environment."+At},identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},inspectorMethodError:(r,t)=>`an inspector: "${t}" of type: "${r}" generated an exception`,invalidContentType:function(r){return'Expected application/json content type but got "'+r+'"'},invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},invalidInspector:(r,t)=>`an inspector: "${t}" of an invalid type (${r}) was configured`,invalidKey:function(){return"Event key must be a string"},invalidContext:function(){return"Invalid context specified."+At},invalidTagValue:r=>`Config option "${r}" must only contain letters, numbers, ., _ or -.`,localStorageUnavailable:function(r){return"local storage is unavailable: "+$t(r)},networkError:r=>"network error"+(r?" ("+r+")":""),optionBelowMinimum:(r,t,e)=>'Config option "'+r+'" was set to '+t+", changing to minimum value of "+e,streamClosing:function(){return"Closing stream connection"},streamConnecting:function(r){return"Opening stream connection to "+r},streamError:function(r,t){return"Error on stream connection: "+$t(r)+", will continue retrying after "+t+" milliseconds."},tagValueTooLong:r=>`Value of "${r}" was longer than 64 characters and was discarded.`,unknownCustomEventKey:function(r){return'Custom event "'+r+'" does not exist'},unknownOption:r=>'Ignoring unknown config option "'+r+'"',contextNotSpecified:function(){return"No context specified."+At},unrecoverableStreamError:r=>`Error on stream connection ${$t(r)}, giving up permanently`,wrongOptionType:(r,t,e)=>'Config option "'+r+'" should be of type '+t+", got "+e+", using default value",wrongOptionTypeBoolean:(r,t)=>'Config option "'+r+'" should be a boolean, got '+t+", converting to boolean"};const{validateLogger:Gr}=Xe,yn={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributes:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},application:{validator:function(r,t,e){const n={};return t.id&&(n.id=vn(`${r}.id`,t.id,e)),t.version&&(n.version=vn(`${r}.version`,t.version,e)),n}},inspectors:{default:[]}},Xr=/^(\w|\.|-)+$/;function Se(r){return r&&r.replace(/\/+$/,"")}function vn(r,t,e){if(typeof t=="string"&&t.match(Xr)){if(!(t.length>64))return t;e.warn(z.tagValueTooLong(r))}else e.warn(z.invalidTagValue(r))}var Ye={baseOptionDefs:yn,validate:function(r,t,e,n){const i=X.extend({logger:{default:n}},yn,e),a={};function s(_){X.onNextTick(()=>{t&&t.maybeReportError(new st.LDInvalidArgumentError(_))})}let c=X.extend({},r||{});return function(_){const l=_;Object.keys(a).forEach(g=>{if(l[g]!==void 0){const w=a[g];n&&n.warn(z.deprecated(g,w)),w&&(l[w]===void 0&&(l[w]=l[g]),delete l[g])}})}(c),c=function(_){const l=X.extend({},_);return Object.keys(i).forEach(g=>{l[g]!==void 0&&l[g]!==null||(l[g]=i[g]&&i[g].default)}),l}(c),c=function(_){const l=X.extend({},_),g=w=>{if(w===null)return"any";if(w===void 0)return;if(Array.isArray(w))return"array";const m=typeof w;return m==="boolean"||m==="string"||m==="number"||m==="function"?m:"object"};return Object.keys(_).forEach(w=>{const m=_[w];if(m!=null){const S=i[w];if(S===void 0)s(z.unknownOption(w));else{const I=S.type||g(S.default),T=S.validator;if(T){const P=T(w,_[w],n);P!==void 0?l[w]=P:delete l[w]}else if(I!=="any"){const P=I.split("|"),O=g(m);P.indexOf(O)<0?I==="boolean"?(l[w]=!!m,s(z.wrongOptionTypeBoolean(w,O))):(s(z.wrongOptionType(w,I,O)),l[w]=S.default):O==="number"&&S.minimum!==void 0&&m<S.minimum&&(s(z.optionBelowMinimum(w,m,S.minimum)),l[w]=S.minimum)}}}}),l.baseUrl=Se(l.baseUrl),l.streamUrl=Se(l.streamUrl),l.eventsUrl=Se(l.eventsUrl),l}(c),Gr(c.logger),c},getTags:function(r){const t={};return r&&(r.application&&r.application.id!==void 0&&r.application.id!==null&&(t["application-id"]=[r.application.id]),r.application&&r.application.version!==void 0&&r.application.id!==null&&(t["application-version"]=[r.application.version])),t}};const{getLDUserAgentString:Yr}=X;var Qe={getLDHeaders:function(r,t){if(t&&!t.sendLDHeaders)return{};const e={};e[r.userAgentHeaderName||"User-Agent"]=Yr(r),t&&t.wrapperName&&(e["X-LaunchDarkly-Wrapper"]=t.wrapperVersion?t.wrapperName+"/"+t.wrapperVersion:t.wrapperName);const n=Ye.getTags(t),i=Object.keys(n);return i.length&&(e["x-launchdarkly-tags"]=i.sort().map(a=>Array.isArray(n[a])?n[a].sort().map(s=>`${a}/${s}`):[`${a}/${n[a]}`]).reduce((a,s)=>a.concat(s),[]).join(" ")),e},transformHeaders:function(r,t){return t&&t.requestHeaderTransform?t.requestHeaderTransform({...r}):r}};const{v1:Qr}=Ge,{getLDHeaders:Zr,transformHeaders:to}=Qe;var Kn=function(r,t,e){const n="/a/"+t+".gif",i=X.extend({"Content-Type":"application/json"},Zr(r,e)),a=r.httpFallbackPing,s={sendChunk:(c,_,l,g)=>{const w=JSON.stringify(c),m=l?null:Qr();return g?function S(I){const T=l?i:X.extend({},i,{"X-LaunchDarkly-Event-Schema":"4","X-LaunchDarkly-Payload-ID":m});return r.httpRequest("POST",_,to(T,e),w).promise.then(P=>{if(P)return P.status>=400&&st.isHttpErrorRecoverable(P.status)&&I?S(!1):function(O){const N={status:O.status},K=O.header("date");if(K){const j=Date.parse(K);j&&(N.serverTime=j)}return N}(P)}).catch(()=>I?S(!1):Promise.reject())}(!0).catch(()=>{}):(a&&a(_+n+"?d="+X.base64URLEncode(w)),Promise.resolve())},sendEvents:function(c,_,l){if(!r.httpRequest)return Promise.resolve();const g=r.httpAllowsPost();let w;w=g?[c]:X.chunkEventsForUrl(2e3-_.length,c);const m=[];for(let S=0;S<w.length;S++)m.push(s.sendChunk(w[S],_,l,g));return Promise.all(m)}};return s};const{commonBasicLogger:eo}=Xe;function kn(r){return typeof r=="string"&&r!=="kind"&&r.match(/^(\w|\.|-)+$/)}function Cn(r){return r.includes("%")||r.includes(":")?r.replace(/%/g,"%25").replace(/:/g,"%3A"):r}var le={checkContext:function(r,t){if(r){if(t&&(r.kind===void 0||r.kind===null))return r.key!==void 0&&r.key!==null;const e=r.key,n=r.kind===void 0?"user":r.kind,i=kn(n),a=n==="multi"||e!=null&&e!=="";if(n==="multi"){const s=Object.keys(r).filter(c=>c!=="kind");return a&&s.every(c=>kn(c))&&s.every(c=>{const _=r[c].key;return _!=null&&_!==""})}return a&&i}return!1},getContextKeys:function(r,t=eo()){if(!r)return;const e={},{kind:n,key:i}=r;switch(n){case void 0:e.user=`${i}`;break;case"multi":Object.entries(r).filter(([a])=>a!=="kind").forEach(([a,s])=>{s&&s.key&&(e[a]=s.key)});break;case null:t.warn(`null is not a valid context kind: ${r}`);break;case"":t.warn(`'' is not a valid context kind: ${r}`);break;default:e[n]=`${i}`}return e},getContextKinds:function(r){return r?r.kind===null||r.kind===void 0?["user"]:r.kind!=="multi"?[r.kind]:Object.keys(r).filter(t=>t!=="kind"):[]},getCanonicalKey:function(r){if(r){if((r.kind===void 0||r.kind===null||r.kind==="user")&&r.key)return r.key;if(r.kind!=="multi"&&r.key)return`${r.kind}:${Cn(r.key)}`;if(r.kind==="multi")return Object.keys(r).sort().filter(t=>t!=="kind").map(t=>`${t}:${Cn(r[t].key)}`).join(":")}}};const{getContextKinds:no}=le;function Wn(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}function En(r){return(r.startsWith("/")?r.substring(1):r).split("/").map(t=>t.indexOf("~")>=0?t.replace(/~1/g,"/").replace(/~0/g,"~"):t)}function Sn(r){return!r.startsWith("/")}function Tn(r,t){const e=Sn(r),n=Sn(t);if(e&&n)return r===t;if(e){const i=En(t);return i.length===1&&r===i[0]}if(n){const i=En(r);return i.length===1&&t===i[0]}return r===t}function xn(r){return`/${Wn(r)}`}var Te={cloneExcluding:function(r,t){const e=[],n={},i=[];for(e.push(...Object.keys(r).map(a=>({key:a,ptr:xn(a),source:r,parent:n,visited:[r]})));e.length;){const a=e.pop();if(t.some(s=>Tn(s,a.ptr)))i.push(a.ptr);else{const s=a.source[a.key];if(s===null)a.parent[a.key]=s;else if(Array.isArray(s))a.parent[a.key]=[...s];else if(typeof s=="object"){if(a.visited.includes(s))continue;a.parent[a.key]={},e.push(...Object.keys(s).map(c=>{return{key:c,ptr:(_=a.ptr,l=Wn(c),`${_}/${l}`),source:s,parent:a.parent[a.key],visited:[...a.visited,s]};var _,l}))}else a.parent[a.key]=s}}return{cloned:n,excluded:i.sort()}},compare:Tn,literalToReference:xn};const{getContextKeys:ro}=le;var oo=function(r,t,e,n=null,i=null,a=null){const s={},c=a||Kn(r,e,t),_=X.appendUrlPath(t.eventsUrl,"/events/bulk/"+e),l=function(){const U={};let q=0,et=0,E={},Y={};return U.summarizeEvent=B=>{if(B.kind==="feature"){const tt=B.key+":"+(B.variation!==null&&B.variation!==void 0?B.variation:"")+":"+(B.version!==null&&B.version!==void 0?B.version:""),W=E[tt];let M=Y[B.key];M||(M=new Set,Y[B.key]=M),function(F){return F.context?no(F.context):F.contextKeys?Object.keys(F.contextKeys):[]}(B).forEach(F=>M.add(F)),W?W.count=W.count+1:E[tt]={count:1,key:B.key,version:B.version,variation:B.variation,value:B.value,default:B.default},(q===0||B.creationDate<q)&&(q=B.creationDate),B.creationDate>et&&(et=B.creationDate)}},U.getSummary=()=>{const B={};let tt=!0;for(const W of Object.values(E)){let M=B[W.key];M||(M={default:W.default,counters:[],contextKinds:[...Y[W.key]]},B[W.key]=M);const F={value:W.value,count:W.count};W.variation!==void 0&&W.variation!==null&&(F.variation=W.variation),W.version!==void 0&&W.version!==null?F.version=W.version:F.unknown=!0,M.counters.push(F),tt=!1}return tt?null:{startDate:q,endDate:et,features:B}},U.clearSummary=()=>{q=0,et=0,E={},Y={}},U}(),g=function(U){const q={},et=U.allAttributesPrivate,E=U.privateAttributes||[],Y=["key","kind","_meta","anonymous"],B=["name","ip","firstName","lastName","email","avatar","country"],tt=W=>{if(typeof W!="object"||W===null||Array.isArray(W))return;const{cloned:M,excluded:F}=Te.cloneExcluding(W,(b=>(et?Object.keys(b):[...E,...b._meta&&b._meta.privateAttributes||[]]).filter(y=>!Y.some(x=>Te.compare(y,x))))(W));return M.key=String(M.key),F.length&&(M._meta||(M._meta={}),M._meta.redactedAttributes=F),M._meta&&(delete M._meta.privateAttributes,Object.keys(M._meta).length===0&&delete M._meta),M.anonymous!==void 0&&(M.anonymous=!!M.anonymous),M};return q.filter=W=>W.kind===void 0||W.kind===null?tt((M=>{const F={...M.custom||{},kind:"user",key:M.key};M.anonymous!==void 0&&(F.anonymous=!!M.anonymous);for(const b of B)delete F[b],M[b]!==void 0&&M[b]!==null&&(F[b]=String(M[b]));return M.privateAttributeNames!==void 0&&M.privateAttributeNames!==null&&(F._meta=F._meta||{},F._meta.privateAttributes=M.privateAttributeNames.map(b=>b.startsWith("/")?Te.literalToReference(b):b)),F})(W)):W.kind==="multi"?(M=>{const F={kind:M.kind},b=Object.keys(M);for(const y of b)if(y!=="kind"){const x=tt(M[y]);x&&(F[y]=x)}return F})(W):tt(W),q}(t),w=t.samplingInterval,m=t.eventCapacity,S=t.flushInterval,I=t.logger;let T,P=[],O=0,N=!1,K=!1;function j(){return w===0||Math.floor(Math.random()*w)===0}function Z(U){P.length<m?(P.push(U),K=!1):(K||(K=!0,I.warn(z.eventCapacityExceeded())),n&&n.incrementDroppedEvents())}return s.enqueue=function(U){if(N)return;let q=!1,et=!1;var E;if(l.summarizeEvent(U),U.kind==="feature"?j()&&(q=!!U.trackEvents,et=!!(E=U).debugEventsUntilDate&&E.debugEventsUntilDate>O&&E.debugEventsUntilDate>new Date().getTime()):q=j(),q&&Z(function(Y){const B=X.extend({},Y);return Y.kind==="identify"?B.context=g.filter(Y.context):(B.contextKeys=ro(Y.context,I),delete B.context),Y.kind==="feature"&&(delete B.trackEvents,delete B.debugEventsUntilDate),B}(U)),et){const Y=X.extend({},U,{kind:"debug"});Y.context=g.filter(Y.context),delete Y.trackEvents,delete Y.debugEventsUntilDate,Z(Y)}},s.flush=function(){if(N)return Promise.resolve();const U=P,q=l.getSummary();return l.clearSummary(),q&&(q.kind="summary",U.push(q)),n&&n.setEventsInLastBatch(U.length),U.length===0?Promise.resolve():(P=[],I.debug(z.debugPostingEvents(U.length)),c.sendEvents(U,_).then(et=>{const E=et&&et[0];E&&(E.serverTime&&(O=E.serverTime),st.isHttpErrorRecoverable(E.status)||(N=!0),E.status>=400&&X.onNextTick(()=>{i.maybeReportError(new st.LDUnexpectedResponseError(z.httpErrorMessage(E.status,"event posting","some events were dropped")))}))}))},s.start=function(){const U=()=>{s.flush(),T=setTimeout(U,S)};T=setTimeout(U,S)},s.stop=function(){clearTimeout(T)},s};const Kt="ready",xe="initialized",Ie="failed",{appendUrlPath:In,base64URLEncode:io,objectHasOwnProperty:ao}=X,{getLDHeaders:so,transformHeaders:co}=Qe,{isHttpErrorRecoverable:_o}=st;var lo=function(r,t,e,n){const i=t.streamUrl,a=t.logger,s={},c=In(i,"/eval/"+e),_=t.useReport,l=t.evaluationReasons,g=t.streamReconnectDelay,w=so(r,t);let m,S=!1,I=null,T=null,P=null,O=null,N=null,K=0;function j(E){if(E.status&&typeof E.status=="number"&&!_o(E.status))return q(),a.error(z.unrecoverableStreamError(E)),void(T&&(clearTimeout(T),T=null));const Y=function(){const B=(tt=function(){const W=g*Math.pow(2,K);return W>3e4?3e4:W}(),tt-Math.trunc(.5*Math.random()*tt));var tt;return K+=1,B}();S||(a.warn(z.streamError(E,Y)),S=!0),et(!1),q(),Z(Y)}function Z(E){T||(E?T=setTimeout(U,E):U())}function U(){let E;T=null;let Y="";const B={headers:w,readTimeoutMillis:3e5};if(r.eventSourceFactory){O!=null&&(Y="h="+O),_?r.eventSourceAllowsReport?(E=c,B.method="REPORT",B.headers["Content-Type"]="application/json",B.body=JSON.stringify(P)):(E=In(i,"/ping/"+e),Y=""):E=c+"/"+io(JSON.stringify(P)),B.headers=co(B.headers,t),l&&(Y=Y+(Y?"&":"")+"withReasons=true"),E=E+(Y?"?":"")+Y,q(),a.info(z.streamConnecting(E)),m=new Date().getTime(),I=r.eventSourceFactory(E,B);for(const tt in N)ao(N,tt)&&I.addEventListener(tt,N[tt]);I.onerror=j,I.onopen=()=>{K=0}}}function q(){I&&(a.info(z.streamClosing()),I.close(),I=null)}function et(E){m&&n&&n.recordStreamInit(m,!E,new Date().getTime()-m),m=null}return s.connect=function(E,Y,B){P=E,O=Y,N={};for(const tt in B||{})N[tt]=function(W){S=!1,et(!0),B[tt]&&B[tt](W)};Z()},s.disconnect=function(){clearTimeout(T),T=null,q()},s.isConnected=function(){return!!(I&&r.eventSourceIsActive&&r.eventSourceIsActive(I))},s};const{transformHeaders:uo,getLDHeaders:go}=Qe,Pn="application/json";var wo=function(r,t,e){const n=t.baseUrl,i=t.useReport,a=t.evaluationReasons,s=t.logger,c={},_={};function l(g,w){if(!r.httpRequest)return new Promise((O,N)=>{N(new st.LDFlagFetchError(z.httpUnavailable()))});const m=w?"REPORT":"GET",S=go(r,t);w&&(S["Content-Type"]=Pn);let I=_[g];I||(I=function(O){let N,K,j,Z;const U={addPromise:(q,et)=>{N=q,K&&K(),K=et,q.then(E=>{N===q&&(j(E),O&&O())},E=>{N===q&&(Z(E),O&&O())})}};return U.resultPromise=new Promise((q,et)=>{j=q,Z=et}),U}(()=>{delete _[g]}),_[g]=I);const T=r.httpRequest(m,g,uo(S,t),w),P=T.promise.then(O=>{if(O.status===200){if(O.header("content-type")&&O.header("content-type").substring(0,16)===Pn)return JSON.parse(O.body);{const N=z.invalidContentType(O.header("content-type")||"");return Promise.reject(new st.LDFlagFetchError(N))}}return Promise.reject(function(N){return N.status===404?new st.LDInvalidEnvironmentIdError(z.environmentNotFound()):new st.LDFlagFetchError(z.errorFetchingFlags(N.statusText||String(N.status)))}(O))},O=>Promise.reject(new st.LDFlagFetchError(z.networkError(O))));return I.addPromise(P,()=>{T.cancel&&T.cancel()}),I.resultPromise}return c.fetchJSON=function(g){return l(X.appendUrlPath(n,g),null)},c.fetchFlagSettings=function(g,w){let m,S,I,T="";return i?(S=[n,"/sdk/evalx/",e,"/context"].join(""),I=JSON.stringify(g)):(m=X.base64URLEncode(JSON.stringify(g)),S=[n,"/sdk/evalx/",e,"/contexts/",m].join("")),w&&(T="h="+w),a&&(T=T+(T?"&":"")+"withReasons=true"),S=S+(T?"?":"")+T,s.debug(z.debugPolling(S)),l(S,I)},c};const{v1:fo}=Ge,{getContextKinds:po}=le;var ho=function(r){function t(n){return n==null||n==="user"?"ld:$anonUserId":`ld:$contextKey:${n}`}function e(n,i){return i.key!==null&&i.key!==void 0?(i.key=i.key.toString(),Promise.resolve(i)):i.anonymous?function(a){return r.get(t(a))}(n).then(a=>{if(a)return i.key=a,i;{const s=fo();return i.key=s,function(c,_){return r.set(t(_),c)}(s,n).then(()=>i)}}):Promise.reject(new st.LDInvalidUserError(z.invalidContext()))}this.processContext=n=>{if(!n)return Promise.reject(new st.LDInvalidUserError(z.contextNotSpecified()));const i=X.clone(n);if(n.kind==="multi"){const a=po(i);return Promise.all(a.map(s=>e(s,i[s]))).then(()=>i)}return e(n.kind,i)}};const{v1:bo}=Ge,{baseOptionDefs:Pe}=Ye,{appendUrlPath:mo}=X;var yo=function(r){const t={diagnosticId:bo()};return r&&(t.sdkKeySuffix=r.length>6?r.substring(r.length-6):r),t},vo=function(r){let t,e,n,i;function a(s){t=s,e=0,n=0,i=[]}return a(r),{getProps:()=>({dataSinceDate:t,droppedEvents:e,eventsInLastBatch:n,streamInits:i}),setProps:s=>{t=s.dataSinceDate,e=s.droppedEvents||0,n=s.eventsInLastBatch||0,i=s.streamInits||[]},incrementDroppedEvents:()=>{e++},setEventsInLastBatch:s=>{n=s},recordStreamInit:(s,c,_)=>{const l={timestamp:s,failed:c,durationMillis:_};i.push(l)},reset:a}},ko=function(r,t,e,n,i,a,s){const c=!!r.diagnosticUseCombinedEvent,_="ld:"+i+":$diagnostics",l=mo(a.eventsUrl,"/events/diagnostic/"+i),g=a.diagnosticRecordingInterval,w=e;let m,S,I=!!a.streaming;const T={};function P(){return{sdk:K(),configuration:{customBaseURI:a.baseUrl!==Pe.baseUrl.default,customStreamURI:a.streamUrl!==Pe.streamUrl.default,customEventsURI:a.eventsUrl!==Pe.eventsUrl.default,eventsCapacity:a.eventCapacity,eventsFlushIntervalMillis:a.flushInterval,reconnectTimeMillis:a.streamReconnectDelay,streamingDisabled:!I,allAttributesPrivate:!!a.allAttributesPrivate,diagnosticRecordingIntervalMillis:a.diagnosticRecordingInterval,usingSecureMode:!!a.hash,bootstrapMode:!!a.bootstrap,fetchGoalsDisabled:!a.fetchGoals,sendEventsOnlyForVariation:!!a.sendEventsOnlyForVariation},platform:r.diagnosticPlatformData}}function O(j){a.logger&&a.logger.debug(z.debugPostingDiagnosticEvent(j)),n.sendEvents(j,l,!0).then(()=>{}).catch(()=>{})}function N(){O(function(){const j=new Date().getTime();let Z={kind:c?"diagnostic-combined":"diagnostic",id:s,creationDate:j,...w.getProps()};return c&&(Z={...Z,...P()}),w.reset(j),Z}()),S=setTimeout(N,g),m=new Date().getTime(),c&&function(){if(t.isEnabled()){const j={...w.getProps()};t.set(_,JSON.stringify(j))}}()}function K(){const j={...r.diagnosticSdkData};return a.wrapperName&&(j.wrapperName=a.wrapperName),a.wrapperVersion&&(j.wrapperVersion=a.wrapperVersion),j}return T.start=()=>{c?function(j){if(!t.isEnabled())return j(!1);t.get(_).then(Z=>{if(Z)try{const U=JSON.parse(Z);w.setProps(U),m=U.dataSinceDate}catch{}j(!0)}).catch(()=>{j(!1)})}(j=>{if(j){const Z=(m||0)+g,U=new Date().getTime();U>=Z?N():S=setTimeout(N,Z-U)}else Math.floor(4*Math.random())===0?N():S=setTimeout(N,g)}):(O({kind:"diagnostic-init",id:s,creationDate:w.getProps().dataSinceDate,...P()}),S=setTimeout(N,g))},T.stop=()=>{S&&clearTimeout(S)},T.setStreaming=j=>{I=j},T};const{onNextTick:Wt}=X,ht={flagUsed:"flag-used",flagDetailsChanged:"flag-details-changed",flagDetailChanged:"flag-detail-changed",clientIdentityChanged:"client-identity-changed"};Object.freeze(ht);var Co={InspectorTypes:ht,InspectorManager:function(r,t){const e={},n={[ht.flagUsed]:[],[ht.flagDetailsChanged]:[],[ht.flagDetailChanged]:[],[ht.clientIdentityChanged]:[]},i=r&&r.map(a=>function(s,c){let _=!1;const l={type:s.type,name:s.name,method:(...g)=>{try{s.method(...g)}catch{_||(_=!0,c.warn(z.inspectorMethodError(l.type,l.name)))}}};return l}(a,t));return i&&i.forEach(a=>{Object.prototype.hasOwnProperty.call(n,a.type)?n[a.type].push(a):t.warn(z.invalidInspector(a.type,a.name))}),e.hasListeners=a=>n[a]&&n[a].length,e.onFlagUsed=(a,s,c)=>{n[ht.flagUsed].length&&Wt(()=>{n[ht.flagUsed].forEach(_=>_.method(a,s,c))})},e.onFlags=a=>{n[ht.flagDetailsChanged].length&&Wt(()=>{n[ht.flagDetailsChanged].forEach(s=>s.method(a))})},e.onFlagChanged=(a,s)=>{n[ht.flagDetailChanged].length&&Wt(()=>{n[ht.flagDetailChanged].forEach(c=>c.method(a,s))})},e.onIdentityChanged=a=>{n[ht.clientIdentityChanged].length&&Wt(()=>{n[ht.clientIdentityChanged].forEach(s=>s.method(a))})},e}};const{commonBasicLogger:Ln}=Xe,{checkContext:Eo,getContextKeys:So}=le,{InspectorTypes:zt,InspectorManager:To}=Co,Jt="change",An="internal-change";var zn={initialize:function(r,t,e,n,i){const a=e&&e.logger?e.logger:i&&i.logger&&i.logger.default||Ln("warn"),s=function(u){const k={},h={};return k.on=function(D,$,G){h[D]=h[D]||[],h[D]=h[D].concat({handler:$,context:G})},k.off=function(D,$,G){if(h[D])for(let R=0;R<h[D].length;R++)h[D][R].handler===$&&h[D][R].context===G&&(h[D]=h[D].slice(0,R).concat(h[D].slice(R+1)))},k.emit=function(D){if(!h[D])return;const $=h[D].slice(0);for(let G=0;G<$.length;G++)$[G].handler.apply($[G].context,Array.prototype.slice.call(arguments,1))},k.getEvents=function(){return Object.keys(h)},k.getEventListenerCount=function(D){return h[D]?h[D].length:0},k.maybeReportError=function(D){D&&(h.error?this.emit("error",D):(u||console).error(D.message))},k}(a),c=function(u){let k=!1,h=!1,D=null,$=null;const G=new Promise(R=>{const Q=()=>{u.off(Kt,Q),R()};u.on(Kt,Q)}).catch(()=>{});return{getInitializationPromise:()=>$||(k?Promise.resolve():h?Promise.reject(D):($=new Promise((R,Q)=>{const xt=()=>{u.off(xe,xt),R()},tn=Gn=>{u.off(Ie,tn),Q(Gn)};u.on(xe,xt),u.on(Ie,tn)}),$)),getReadyPromise:()=>G,signalSuccess:()=>{k||h||(k=!0,u.emit(xe),u.emit(Kt))},signalFailure:R=>{k||h||(h=!0,D=R,u.emit(Ie,R),u.emit(Kt)),u.maybeReportError(R)}}}(s),_=Ye.validate(e,s,i,a),l=To(_.inspectors,a),g=_.sendEvents;let w=r,m=_.hash;const S=function(u,k){const h={};let D=!1;const $=G=>{D||(D=!0,k.warn(z.localStorageUnavailable(G)))};return h.isEnabled=()=>!!u,h.get=G=>new Promise(R=>{u?u.get(G).then(R).catch(Q=>{$(Q),R(void 0)}):R(void 0)}),h.set=(G,R)=>new Promise(Q=>{u?u.set(G,R).then(()=>Q(!0)).catch(xt=>{$(xt),Q(!1)}):Q(!1)}),h.clear=G=>new Promise(R=>{u?u.clear(G).then(()=>R(!0)).catch(Q=>{$(Q),R(!1)}):R(!1)}),h}(n.localStorage,a),I=Kn(n,w,_),T=_.sendEvents&&!_.diagnosticOptOut,P=T?yo(w):null,O=T?vo(new Date().getTime()):null,N=T?ko(n,S,O,I,w,_,P):null,K=lo(n,_,w,O),j=_.eventProcessor||oo(n,_,w,O,s,I),Z=wo(n,_,w);let U,q,et,E={},Y=_.streaming,B=!1,tt=!1,W=!0;const M=_.stateProvider,F=function(u,k){const h={};let D;return h.setContext=function($){D=X.sanitizeContext($),D&&k&&k(X.clone(D))},h.getContext=function(){return D?X.clone(D):null},u&&h.setContext(u),h}(null,function(u){(function(k){M||k&&x({kind:"identify",context:k,creationDate:new Date().getTime()})})(u),l.hasListeners(zt.clientIdentityChanged)&&l.onIdentityChanged(F.getContext())}),b=new ho(S),y=S.isEnabled()?function(u,k,h,D){const $={};function G(){let R="";const Q=D.getContext();return Q&&(R=h||X.btoa(JSON.stringify(Q))),"ld:"+k+":"+R}return $.loadFlags=()=>u.get(G()).then(R=>{if(R==null)return null;try{let Q=JSON.parse(R);if(Q){const xt=Q.$schema;xt===void 0||xt<1?Q=X.transformValuesToVersionedValues(Q):delete Q.$schema}return Q}catch{return $.clearFlags().then(()=>null)}}),$.saveFlags=R=>{const Q=X.extend({},R,{$schema:1});return u.set(G(),JSON.stringify(Q))},$.clearFlags=()=>u.clear(G()),$}(S,w,m,F):null;function x(u){w&&(M&&M.enqueueEvent&&M.enqueueEvent(u)||(u.context?(W=!1,!g||tt||n.isDoNotTrack()||(a.debug(z.debugEnqueueingEvent(u.kind)),j.enqueue(u))):W&&(a.warn(z.eventWithoutContext()),W=!1)))}function J(u,k){l.hasListeners(zt.flagDetailChanged)&&l.onFlagChanged(u.key,at(k))}function H(){l.hasListeners(zt.flagDetailsChanged)&&l.onFlags(Object.entries(E).map(([u,k])=>({key:u,detail:at(k)})).reduce((u,k)=>(u[k.key]=k.detail,u),{}))}function nt(u,k,h,D){const $=F.getContext(),G=new Date,R={kind:"feature",key:u,context:$,value:k?k.value:null,variation:k?k.variationIndex:null,default:h,creationDate:G.getTime()},Q=E[u];Q&&(R.version=Q.flagVersion?Q.flagVersion:Q.version,R.trackEvents=Q.trackEvents,R.debugEventsUntilDate=Q.debugEventsUntilDate),(D||Q&&Q.trackReason)&&k&&(R.reason=k.reason),x(R)}function ot(u){return Eo(u,!1)?Promise.resolve(u):Promise.reject(new st.LDInvalidUserError(z.invalidContext()))}function ct(u,k,h,D,$){let G;if(E&&X.objectHasOwnProperty(E,u)&&E[u]&&!E[u].deleted){const R=E[u];G=at(R),R.value!==null&&R.value!==void 0||(G.value=k)}else G={value:k,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}};return h&&nt(u,G,k,D),$||function(R,Q){l.hasListeners(zt.flagUsed)&&l.onFlagUsed(R,Q,F.getContext())}(u,G),G}function at(u){return{value:u.value,variationIndex:u.variation===void 0?null:u.variation,reason:u.reason||null}}function kt(){if(q=!0,!F.getContext())return;const u=k=>{try{return JSON.parse(k)}catch{return void s.maybeReportError(new st.LDInvalidDataError(z.invalidData()))}};K.connect(F.getContext(),m,{ping:function(){a.debug(z.debugStreamPing());const k=F.getContext();Z.fetchFlagSettings(k,m).then(h=>{X.deepEquals(k,F.getContext())&&ft(h||{})}).catch(h=>{s.maybeReportError(new st.LDFlagFetchError(z.errorFetchingFlags(h)))})},put:function(k){const h=u(k.data);h&&(a.debug(z.debugStreamPut()),ft(h))},patch:function(k){const h=u(k.data);if(!h)return;const D=E[h.key];if(!D||!D.version||!h.version||D.version<h.version){a.debug(z.debugStreamPatch(h.key));const $={},G=X.extend({},h);delete G.key,E[h.key]=G;const R=at(G);$[h.key]=D?{previous:D.value,current:R}:{current:R},de($),J(h,G)}else a.debug(z.debugStreamPatchIgnored(h.key))},delete:function(k){const h=u(k.data);if(h)if(!E[h.key]||E[h.key].version<h.version){a.debug(z.debugStreamDelete(h.key));const D={};E[h.key]&&!E[h.key].deleted&&(D[h.key]={previous:E[h.key].value}),E[h.key]={version:h.version,deleted:!0},J(h,E[h.key]),de(D)}else a.debug(z.debugStreamDeleteIgnored(h.key))}})}function Ct(){q&&(K.disconnect(),q=!1)}function ft(u){const k={};if(!u)return Promise.resolve();for(const h in E)X.objectHasOwnProperty(E,h)&&E[h]&&(u[h]&&!X.deepEquals(u[h].value,E[h].value)?k[h]={previous:E[h].value,current:at(u[h])}:u[h]&&!u[h].deleted||(k[h]={previous:E[h].value}));for(const h in u)X.objectHasOwnProperty(u,h)&&u[h]&&(!E[h]||E[h].deleted)&&(k[h]={current:at(u[h])});return E={...u},H(),de(k).catch(()=>{})}function de(u){const k=Object.keys(u);if(k.length>0){const h={};k.forEach(D=>{const $=u[D].current,G=$?$.value:void 0,R=u[D].previous;s.emit(Jt+":"+D,G,R),h[D]=$?{current:G,previous:R}:{previous:R}}),s.emit(Jt,h),s.emit(An,E),_.sendEventsOnlyForVariation||M||k.forEach(D=>{nt(D,u[D].current)})}return U&&y?y.saveFlags(E):Promise.resolve()}function ue(){const u=Y||et&&Y===void 0;u&&!q?kt():!u&&q&&Ct(),N&&N.setStreaming(u)}function ge(u){return u===Jt||u.substr(0,7)===Jt+":"}if(typeof _.bootstrap=="string"&&_.bootstrap.toUpperCase()==="LOCALSTORAGE"&&(y?U=!0:a.warn(z.localStorageUnavailable())),typeof _.bootstrap=="object"&&(E=function(u){const k=Object.keys(u),h="$flagsState",D="$valid",$=u[h];!$&&k.length&&a.warn(z.bootstrapOldFormat()),u[D]===!1&&a.warn(z.bootstrapInvalid());const G={};return k.forEach(R=>{if(R!==h&&R!==D){let Q={value:u[R]};$&&$[R]?Q=X.extend(Q,$[R]):Q.version=0,G[R]=Q}}),G}(_.bootstrap)),M){const u=M.getInitialState();u?Ze(u):M.on("init",Ze),M.on("update",function(k){k.context&&F.setContext(k.context),k.flags&&ft(k.flags)})}else(r?b.processContext(t).then(ot).then(u=>(F.setContext(u),typeof _.bootstrap=="object"?Nt():U?y.loadFlags().then(k=>k==null?(E={},Z.fetchFlagSettings(F.getContext(),m).then(h=>ft(h||{})).then(Nt).catch(h=>{we(new st.LDFlagFetchError(z.errorFetchingFlags(h)))})):(E=k,X.onNextTick(Nt),Z.fetchFlagSettings(F.getContext(),m).then(h=>ft(h)).catch(h=>s.maybeReportError(h)))):Z.fetchFlagSettings(F.getContext(),m).then(k=>{E=k||{},H(),Nt()}).catch(k=>{E={},we(k)}))):Promise.reject(new st.LDInvalidEnvironmentIdError(z.environmentNotSpecified()))).catch(we);function Ze(u){w=u.environment,F.setContext(u.context),E={...u.flags},X.onNextTick(Nt)}function Nt(){a.info(z.clientInitialized()),B=!0,ue(),c.signalSuccess()}function we(u){c.signalFailure(u)}return{client:{waitForInitialization:()=>c.getInitializationPromise(),waitUntilReady:()=>c.getReadyPromise(),identify:function(u,k,h){if(tt)return X.wrapPromiseCallback(Promise.resolve({}),h);if(M)return a.warn(z.identifyDisabled()),X.wrapPromiseCallback(Promise.resolve(X.transformVersionedValuesToValues(E)),h);const D=U&&y?y.clearFlags():Promise.resolve();return X.wrapPromiseCallback(D.then(()=>b.processContext(u)).then(ot).then($=>Z.fetchFlagSettings($,k).then(G=>{const R=X.transformVersionedValuesToValues(G);return F.setContext($),m=k,G?ft(G).then(()=>R):R})).then($=>(q&&kt(),$)).catch($=>(s.maybeReportError($),Promise.reject($))),h)},getContext:function(){return F.getContext()},variation:function(u,k){return ct(u,k,!0,!1,!1).value},variationDetail:function(u,k){return ct(u,k,!0,!0,!1)},track:function(u,k,h){if(typeof u!="string")return void s.maybeReportError(new st.LDInvalidEventKeyError(z.unknownCustomEventKey(u)));n.customEventFilter&&!n.customEventFilter(u)&&a.warn(z.unknownCustomEventKey(u));const D=F.getContext(),$={kind:"custom",key:u,context:D,url:n.getCurrentUrl(),creationDate:new Date().getTime()};D&&D.anonymous&&($.contextKind=D.anonymous?"anonymousUser":"user"),k!=null&&($.data=k),h!=null&&($.metricValue=h),x($)},on:function(u,k,h){ge(u)?(et=!0,B&&ue(),s.on(u,k,h)):s.on(...arguments)},off:function(u){if(s.off(...arguments),ge(u)){let k=!1;s.getEvents().forEach(h=>{ge(h)&&s.getEventListenerCount(h)>0&&(k=!0)}),k||(et=!1,q&&Y===void 0&&Ct())}},setStreaming:function(u){const k=u===null?void 0:u;k!==Y&&(Y=k,ue())},flush:function(u){return X.wrapPromiseCallback(g?j.flush():Promise.resolve(),u)},allFlags:function(){const u={};if(!E)return u;for(const k in E)X.objectHasOwnProperty(E,k)&&!E[k].deleted&&(u[k]=ct(k,null,!_.sendEventsOnlyForVariation,!1,!0).value);return u},close:function(u){if(tt)return X.wrapPromiseCallback(Promise.resolve(),u);const k=()=>{tt=!0,E={}},h=Promise.resolve().then(()=>{if(Ct(),N&&N.stop(),g)return j.stop(),j.flush()}).then(k).catch(k);return X.wrapPromiseCallback(h,u)}},options:_,emitter:s,ident:F,logger:a,requestor:Z,start:function(){g&&(N&&N.start(),j.start())},enqueueEvent:x,getFlagsInternal:function(){return E},getEnvironmentId:()=>w,internalChangeEventName:An}},commonBasicLogger:Ln,errors:st,messages:z,utils:X,getContextKeys:So},xo=zn.initialize,Io=zn.errors;function Dn(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Nn(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Dn(Object(e),!0).forEach(function(n){Jn(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Dn(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Ue(){Ue=function(){return t};var r,t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(b,y,x){b[y]=x.value},a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",_=a.toStringTag||"@@toStringTag";function l(b,y,x){return Object.defineProperty(b,y,{value:x,enumerable:!0,configurable:!0,writable:!0}),b[y]}try{l({},"")}catch{l=function(y,x,J){return y[x]=J}}function g(b,y,x,J){var H=y&&y.prototype instanceof O?y:O,nt=Object.create(H.prototype),ot=new M(J||[]);return i(nt,"_invoke",{value:Y(b,x,ot)}),nt}function w(b,y,x){try{return{type:"normal",arg:b.call(y,x)}}catch(J){return{type:"throw",arg:J}}}t.wrap=g;var m="suspendedStart",S="suspendedYield",I="executing",T="completed",P={};function O(){}function N(){}function K(){}var j={};l(j,s,function(){return this});var Z=Object.getPrototypeOf,U=Z&&Z(Z(F([])));U&&U!==e&&n.call(U,s)&&(j=U);var q=K.prototype=O.prototype=Object.create(j);function et(b){["next","throw","return"].forEach(function(y){l(b,y,function(x){return this._invoke(y,x)})})}function E(b,y){function x(H,nt,ot,ct){var at=w(b[H],b,nt);if(at.type!=="throw"){var kt=at.arg,Ct=kt.value;return Ct&&typeof Ct=="object"&&n.call(Ct,"__await")?y.resolve(Ct.__await).then(function(ft){x("next",ft,ot,ct)},function(ft){x("throw",ft,ot,ct)}):y.resolve(Ct).then(function(ft){kt.value=ft,ot(kt)},function(ft){return x("throw",ft,ot,ct)})}ct(at.arg)}var J;i(this,"_invoke",{value:function(H,nt){function ot(){return new y(function(ct,at){x(H,nt,ct,at)})}return J=J?J.then(ot,ot):ot()}})}function Y(b,y,x){var J=m;return function(H,nt){if(J===I)throw new Error("Generator is already running");if(J===T){if(H==="throw")throw nt;return{value:r,done:!0}}for(x.method=H,x.arg=nt;;){var ot=x.delegate;if(ot){var ct=B(ot,x);if(ct){if(ct===P)continue;return ct}}if(x.method==="next")x.sent=x._sent=x.arg;else if(x.method==="throw"){if(J===m)throw J=T,x.arg;x.dispatchException(x.arg)}else x.method==="return"&&x.abrupt("return",x.arg);J=I;var at=w(b,y,x);if(at.type==="normal"){if(J=x.done?T:S,at.arg===P)continue;return{value:at.arg,done:x.done}}at.type==="throw"&&(J=T,x.method="throw",x.arg=at.arg)}}}function B(b,y){var x=y.method,J=b.iterator[x];if(J===r)return y.delegate=null,x==="throw"&&b.iterator.return&&(y.method="return",y.arg=r,B(b,y),y.method==="throw")||x!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+x+"' method")),P;var H=w(J,b.iterator,y.arg);if(H.type==="throw")return y.method="throw",y.arg=H.arg,y.delegate=null,P;var nt=H.arg;return nt?nt.done?(y[b.resultName]=nt.value,y.next=b.nextLoc,y.method!=="return"&&(y.method="next",y.arg=r),y.delegate=null,P):nt:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,P)}function tt(b){var y={tryLoc:b[0]};1 in b&&(y.catchLoc=b[1]),2 in b&&(y.finallyLoc=b[2],y.afterLoc=b[3]),this.tryEntries.push(y)}function W(b){var y=b.completion||{};y.type="normal",delete y.arg,b.completion=y}function M(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(tt,this),this.reset(!0)}function F(b){if(b||b===""){var y=b[s];if(y)return y.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var x=-1,J=function H(){for(;++x<b.length;)if(n.call(b,x))return H.value=b[x],H.done=!1,H;return H.value=r,H.done=!0,H};return J.next=J}}throw new TypeError(typeof b+" is not iterable")}return N.prototype=K,i(q,"constructor",{value:K,configurable:!0}),i(K,"constructor",{value:N,configurable:!0}),N.displayName=l(K,_,"GeneratorFunction"),t.isGeneratorFunction=function(b){var y=typeof b=="function"&&b.constructor;return!!y&&(y===N||(y.displayName||y.name)==="GeneratorFunction")},t.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,K):(b.__proto__=K,l(b,_,"GeneratorFunction")),b.prototype=Object.create(q),b},t.awrap=function(b){return{__await:b}},et(E.prototype),l(E.prototype,c,function(){return this}),t.AsyncIterator=E,t.async=function(b,y,x,J,H){H===void 0&&(H=Promise);var nt=new E(g(b,y,x,J),H);return t.isGeneratorFunction(y)?nt:nt.next().then(function(ot){return ot.done?ot.value:nt.next()})},et(q),l(q,_,"Generator"),l(q,s,function(){return this}),l(q,"toString",function(){return"[object Generator]"}),t.keys=function(b){var y=Object(b),x=[];for(var J in y)x.push(J);return x.reverse(),function H(){for(;x.length;){var nt=x.pop();if(nt in y)return H.value=nt,H.done=!1,H}return H.done=!0,H}},t.values=F,M.prototype={constructor:M,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(W),!b)for(var y in this)y.charAt(0)==="t"&&n.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=r)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(b){if(this.done)throw b;var y=this;function x(at,kt){return nt.type="throw",nt.arg=b,y.next=at,kt&&(y.method="next",y.arg=r),!!kt}for(var J=this.tryEntries.length-1;J>=0;--J){var H=this.tryEntries[J],nt=H.completion;if(H.tryLoc==="root")return x("end");if(H.tryLoc<=this.prev){var ot=n.call(H,"catchLoc"),ct=n.call(H,"finallyLoc");if(ot&&ct){if(this.prev<H.catchLoc)return x(H.catchLoc,!0);if(this.prev<H.finallyLoc)return x(H.finallyLoc)}else if(ot){if(this.prev<H.catchLoc)return x(H.catchLoc,!0)}else{if(!ct)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return x(H.finallyLoc)}}}},abrupt:function(b,y){for(var x=this.tryEntries.length-1;x>=0;--x){var J=this.tryEntries[x];if(J.tryLoc<=this.prev&&n.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var H=J;break}}H&&(b==="break"||b==="continue")&&H.tryLoc<=y&&y<=H.finallyLoc&&(H=null);var nt=H?H.completion:{};return nt.type=b,nt.arg=y,H?(this.method="next",this.next=H.finallyLoc,P):this.complete(nt)},complete:function(b,y){if(b.type==="throw")throw b.arg;return b.type==="break"||b.type==="continue"?this.next=b.arg:b.type==="return"?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):b.type==="normal"&&y&&(this.next=y),P},finish:function(b){for(var y=this.tryEntries.length-1;y>=0;--y){var x=this.tryEntries[y];if(x.finallyLoc===b)return this.complete(x.completion,x.afterLoc),W(x),P}},catch:function(b){for(var y=this.tryEntries.length-1;y>=0;--y){var x=this.tryEntries[y];if(x.tryLoc===b){var J=x.completion;if(J.type==="throw"){var H=J.arg;W(x)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(b,y,x){return this.delegate={iterator:F(b),resultName:y,nextLoc:x},this.method==="next"&&(this.arg=r),P}},t}function On(r,t,e,n,i,a,s){try{var c=r[a](s),_=c.value}catch(l){return void e(l)}c.done?t(_):Promise.resolve(_).then(n,i)}function Jn(r,t,e){return(t=function(n){var i=function(a,s){if(typeof a!="object"||!a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var _=c.call(a,"string");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return typeof i=="symbol"?i:String(i)}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var Un="Cancelled",Le=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};function Po(r,t,e,n){var i,a,s=(r.kind!=="substring"&&r.kind!=="regex"||!n.includes("/")?t.replace(n,""):t).replace(e,"");switch(r.kind){case"exact":a=t,i=new RegExp("^"+Le(r.url)+"/?$");break;case"canonical":a=s,i=new RegExp("^"+Le(r.url)+"/?$");break;case"substring":a=s,i=new RegExp(".*"+Le(r.substring)+".*$");break;case"regex":a=s,i=new RegExp(r.pattern);break;default:return!1}return i.test(a)}function Rn(r,t){for(var e={},n=null,i=[],a=0;a<r.length;a++)for(var s=r[a],c=s.urls||[],_=0;_<c.length;_++)if(Po(c[_],window.location.href,window.location.search,window.location.hash)){s.kind==="pageview"?t("pageview",s):(i.push(s),t("click_pageview",s));break}return i.length>0&&(n=function(l){for(var g=function(m,S){for(var I=[],T=0;T<S.length;T++)for(var P=m.target,O=S[T],N=O.selector,K=document.querySelectorAll(N);P&&K.length>0;){for(var j=0;j<K.length;j++)P===K[j]&&I.push(O);P=P.parentNode}return I}(l,i),w=0;w<g.length;w++)t("click",g[w])},document.addEventListener("click",n)),e.dispose=function(){document.removeEventListener("click",n)},e}var Lo=300,Gt="goalsReady",Ao={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function Do(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(l){var g={userAgentHeaderName:"X-LaunchDarkly-User-Agent",synchronousFlush:!1};l&&l.disableSyncEventPost,g.httpRequest=function(I,T,P,O){return g.synchronousFlush,g.synchronousFlush=!1,function(N,K,j,Z){var U,q=new Promise(function(et,E){fetch(K,{method:N,headers:j,body:Z||void 0}).then(function(){var Y,B=(Y=Ue().mark(function tt(W){var M;return Ue().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return U&&E(new Error(Un)),F.next=3,W.text();case 3:M=F.sent,et({status:W.status,header:function(b){return W.headers.get(b)},body:M});case 5:case"end":return F.stop()}},tt)}),function(){var tt=this,W=arguments;return new Promise(function(M,F){var b=Y.apply(tt,W);function y(J){On(b,M,F,y,x,"next",J)}function x(J){On(b,M,F,y,x,"throw",J)}y(void 0)})});return function(tt){return B.apply(this,arguments)}}()).catch(function(Y){U&&E(new Error(Un)),E(new Error(Y))})});return{promise:q,cancel:function(){U=!0}}}(I,T,P,O)},g.httpAllowsPost=function(){return!0};var w=l&&l.eventUrlTransformer;g.getCurrentUrl=function(){return w?w(window.location.href):window.location.href},g.isDoNotTrack=function(){return!1},g.localStorage={get:function(I){return new Promise(function(T){var P=chrome.storage.local.get(I)[I];T(typeof P=="string"?P:void 0)})},set:function(I,T){return new Promise(function(P){chrome.storage.local.set(Jn({},I,T)),P()})},clear:function(I){return new Promise(function(T){chrome.storage.local.remove(I),T()})}},g.eventSourceAllowsReport=!1;var m=globalThis.EventSource,S=3e5;return g.eventSourceFactory=function(I,T){var P=Nn(Nn({},{heartbeatTimeout:S,silentTimeout:S,skipDefaultHeaders:!0}),T);return new m(I,P)},g.eventSourceIsActive=function(I){I.readyState===window.EventSource.OPEN||(I.readyState,window.EventSource.CONNECTING)},g.userAgent="JSClient",g.version="1.0.6",g.diagnosticSdkData={name:"js-client-sdk",version:"1.0.6"},g.diagnosticPlatformData={name:"JS"},g.diagnosticUseCombinedEvent=!0,g}(e),i=xo(r,t,e,n,Ao),a=i.client,s=i.options,c=i.emitter,_=new Promise(function(l){var g=c.on(Gt,function(){c.off(Gt,g),l()})});return a.waitUntilGoalsReady=function(){return _},s.fetchGoals?function(l,g){var w,m;function S(){m&&m.dispose(),w&&w.length&&(m=Rn(w,I))}function I(T,P){var O=l.ident.getContext(),N={kind:T,key:P.key,data:null,url:window.location.href,creationDate:new Date().getTime(),context:O};return T==="click"&&(N.selector=P.selector),l.enqueueEvent(N)}l.requestor.fetchJSON("/sdk/goals/"+l.getEnvironmentId()).then(function(T){T&&T.length>0&&(m=Rn(w=T,I),function(P,O){var N,K=window.location.href;function j(){(N=window.location.href)!==K&&(K=N,O())}(function Z(U,q){U(),setTimeout(function(){Z(U,q)},q)})(j,P),window.history&&window.history.pushState?window.addEventListener("popstate",j):window.addEventListener("hashchange",j)}(Lo,S)),g()}).catch(function(T){l.emitter.maybeReportError(new Io.LDUnexpectedResponseError((T&&T.message,T.message))),g()})}(i,function(){return c.emit(Gt)}):c.emit(Gt),i.start(),a}const Xt={show_log_in_now:{currentInfoFlag:"showLogInNow",defaultValue:!1},"browser-xv-2517-add-1-click-button-on-the-list-view-to-open-website":{currentInfoFlag:"showLogInNow",defaultValue:!1},"browser-xv-2647-keys-pricing-tiers-feature-flag":{currentInfoFlag:"pricingTiersVariant",defaultValue:void 0},"browser-xv-2331-unlock-with-biometrics":{currentInfoFlag:"biometricsVariant",defaultValue:!1}};class No{constructor(t){v(this,"_launchDarklyClient");v(this,"isDisplayedInEnglish");v(this,"shouldAssignToCurrentInfo",t=>!(!this.isDisplayedInEnglish&&t==="browser-xv-2331-unlock-with-biometrics"));v(this,"sendTelemetryEventIfEligible",(t,e)=>{if(t==="browser-xv-2647-keys-pricing-tiers-feature-flag"){const n=e;n===!0?It("xv_2206_assigned_v1",this.background.currentInfo):n===!1&&It("xv_2206_assigned_ct",this.background.currentInfo)}else if(t==="browser-xv-2331-unlock-with-biometrics"){const n=e;n===!0?It("xv_2331_assigned_v1",this.background.currentInfo):n===!1&&It("xv_2331_assigned_ct",this.background.currentInfo)}});v(this,"makeOnReadyListener",()=>()=>{Object.keys(Xt).forEach(t=>{const e=t,n=Xt[e],i=this.launchDarklyClient.variation(t,n.defaultValue);this.shouldAssignToCurrentInfo(e)&&(this.background.currentInfo.flags[n.currentInfoFlag]=i,this.sendTelemetryEventIfEligible(e,i))})});v(this,"makeOnChangeListener",t=>e=>{const n=Xt[t];this.shouldAssignToCurrentInfo(t)&&(this.background.currentInfo.flags[n.currentInfoFlag]=e,this.sendTelemetryEventIfEligible(t,e))});v(this,"configureListeners",async()=>{this.launchDarklyClient.on("ready",this.makeOnReadyListener()),Object.keys(Xt).forEach(t=>{this.launchDarklyClient.on(`change:${t}`,this.makeOnChangeListener(t))})});v(this,"initializeLdClient",async(t,e)=>Do("60f4eca7bc3c32255e6cab6e",{kind:"user",key:await ar(e),app_version:t,extension_version:chrome.runtime.getManifest().version,extension_browser:"chrome",client_os:this.background.currentInfo.os.name},{bootstrap:"localStorage"}));v(this,"initializeAndConfigureLdClient",async()=>{var t;this._launchDarklyClient&&await((t=this._launchDarklyClient)==null?void 0:t.close()),this.background.subscriptionId&&(this._launchDarklyClient=await this.initializeLdClient(this.background.currentInfo.app.version,this.background.subscriptionId),this.configureListeners())});this.background=t,this.isDisplayedInEnglish=pr(chrome.i18n.getUILanguage())==="en"}get launchDarklyClient(){if(!this._launchDarklyClient)throw new Error("Launchdarkly client not initialized");return this._launchDarklyClient}}addEventListener("unhandledrejection",r=>{String(r.reason).includes("Could not establish connection. Receiving end does not exist")||(r.preventDefault(),bt("unhandledRejectionInBackground",{reason:r.reason}))});const Oo=new class{constructor(){v(this,"nativeCommunication");v(this,"pwmHelper");v(this,"sessionStorage");v(this,"chromeStorage");v(this,"uiChromeStorage");v(this,"currentInfo");v(this,"settings");v(this,"monitoredTabsHandler");v(this,"launchDarklyClient");v(this,"subscriptionId");v(this,"onStateChangedMessageHandler",async r=>{const t=await this.uiChromeStorage.readAny("UI_STATE-systemSleepLock");(r==="locked"&&t==="true"||r==="idle")&&this.pwmHelper.lock().then(()=>{bt("checkVaultLockStatus",void 0)})});v(this,"updatePopupState",()=>{this.nativeCommunication.isInstalled()||(this.currentInfo.state="NOT_INSTALLED",Qn()),bt("state",this.currentInfo)});v(this,"onEngineStatusUpdate",(r,t)=>{switch(r){case"ServiceStateChanged":t.newstate==="activated"?this.nativeCommunication.getAPIAccessToken():["signing_out","not_activated","NOT_INSTALLED"].includes(t.newstate)&&bt("lock_vault"),this.currentInfo.state=t.newstate;break;case"NetworkChange":case"WaitForNetworkReady":this.currentInfo.networkStatus=t.result??t}});v(this,"start",async()=>{this.currentInfo.os=await _r(),await this.pwmHelper.initPmcoreWasm(),this.nativeCommunication.connect(),chrome.runtime.onMessage.addListener((r=>(t,e,n)=>{try{switch(t.type){case"pwm":new Tr(r).handle(t,e,n);break;case"client":new xr(r).handle(t,e,n);break;case"native":new Ir(r).handle(t,e,n);break;case"internal":new Pr(r).handle(t,e,n);break;case"autofill":new fr(r).handle(t,e,n);break;default:throw new Error(`Unknown message type "${t.type}" `)}}catch(i){const a=i;n({success:!1,error:(a==null?void 0:a.message)??String(a)})}return!0})(this)),chrome.action.onClicked.addListener(this.onExtensionIconClickHandler),chrome.alarms.onAlarm.addListener(this.onAlarmListener),chrome.storage.onChanged.addListener(this.onStorageChange),chrome.storage.local.get("settings",r=>{typeof r.settings=="object"&&this.setSettings({...this.settings,...r.settings})}),await this.createAlarms(),lr()});v(this,"setSettings",async r=>{this.settings=r,oe.isEnabled=this.settings.helpImprove});v(this,"onStorageChange",r=>{r.settings&&this.setSettings(r.settings.newValue)});v(this,"pmcoreMessageHandler",async r=>{r.method==="refreshToken"&&this.nativeCommunication.fetchAPIAccessToken()});v(this,"onBeforeRequestHandler",async r=>{const t=this.monitoredTabsHandler.getMonitoredTab(r.tabId),e=new URL(r.url);if(!["auth.services.adobe.com/signin/v1/passwords/validity","auth.services.adobe.com/signin/v1/passwords/leak_verification"].includes(`${e.hostname}${e.pathname}`)&&t&&r.method==="POST"&&(r!=null&&r.requestBody)){const n=dr(r.requestBody);if(!n||Object.keys(n).length<2)return;const i=r.tabId,a=await chrome.tabs.get(i);if(!await this.pwmHelper.isUnlocked())return void this.monitoredTabsHandler.removeMonitoredTab(r.tabId);const s=async()=>{var m,S,I,T;const l=rn(),g=(await this.pwmHelper.getWebsiteLogins({tab:a,associatedDomains:l})).domainLoginItems,w={username:((S=(m=t.fields.login)==null?void 0:m.find(P=>P.inputType==="username"))==null?void 0:S.value)??"",password:((T=(I=t.fields.login)==null?void 0:I.find(P=>P.inputType==="password"))==null?void 0:T.value)??""};return[this.everyPostDataMatches(n,w,wr(r.url)),nn(g,w)]},[c,_]=await s();if(!c)return;if(this.monitoredTabsHandler.updateMonitoredTab(r.tabId,{credentialsMatch:_}),_.exactLoginExactPasswordExists||_.missingUserNameOrPassword)return void this.monitoredTabsHandler.removeMonitoredTab(i);en(i,t.frameId)}});v(this,"onUpdated1clickTabHandler",async(r,t,e)=>{if(t.status==="complete"){const n=new Ne,i=await n.readAny("oneClickTabDetails");if(i!=null&&i.tabId&&r===i.tabId){const{l:a}=await this.pwmHelper.clientCall({call:"getLoginBody",args:[i.uuid]}),{code:s}=await this.pwmHelper.clientCall({call:"getLoginTotpCode",args:[i.uuid]});await ur(i,a,s),n.delete("oneClickTabDetails")}}return!0});v(this,"onUpdatedTabHandler",async(r,t,e)=>{var i,a,s,c;const n=this.monitoredTabsHandler.getMonitoredTab(r);if(n&&n.submitted&&t.status==="complete"){if(!await this.pwmHelper.isUnlocked())return void this.monitoredTabsHandler.removeMonitoredTab(r);if(!Fn(e.url,n.url))return void this.monitoredTabsHandler.removeMonitoredTab(r);const _=rn(),l=(await this.pwmHelper.getWebsiteLogins({tab:e,associatedDomains:_})).domainLoginItems,g={username:(a=(i=n.fields.login)==null?void 0:i.find(m=>m.inputType==="username"))==null?void 0:a.value,password:(c=(s=n.fields.login)==null?void 0:s.find(m=>m.inputType==="password"))==null?void 0:c.value},w=nn(l,g);if(this.monitoredTabsHandler.updateMonitoredTab(r,{credentialsMatch:w}),w.exactLoginExactPasswordExists||w.missingUserNameOrPassword)return void this.monitoredTabsHandler.removeMonitoredTab(r);w.exactLoginDifferentPasswordExists,setTimeout(()=>{en(r,n.frameId)},500)}else n&&!n.submitted&&t.status==="complete"&&this.monitoredTabsHandler.removeMonitoredTab(r);return!0});v(this,"onInstalledMessageHandler",r=>{r.reason==="install"&&(this.sessionStorage.writeAny("isNewInstall",!0),this.chromeStorage.writeAny("hasPwmAccessSince",Date.now()))});v(this,"onExtensionIconClickHandler",async()=>{if(!this.openTabOnAppState(this.currentInfo))try{const r=await this.pwmHelper.checkUserExistsAndAuthenticated();await gr(r,"/html/passwordManager.html#/account-verified")}catch(r){if(!Yt(r,"error.not_logged_in"))throw r;this.openTabOnAppState(this.currentInfo)}});v(this,"onAlarmListener",async r=>{switch(r.name){case"FLUSH_TELEMETRY":await(await oe.getSingletonInstance()).flushTelemetry();break;case"CLEAR_CLIPBOARD":bt("clearClipboardOffscreen",void 0,()=>{De("clipboard-cleared",{type:"basic",title:chrome.i18n.getMessage("notification_clipboard_cleared_title"),message:chrome.i18n.getMessage("notification_clipboard_cleared_message"),iconUrl:"/src/images/PWM-Default-128.png"},2e3)});break;case"SHOULD_SHOW_SURVEY":const e=await this.chromeStorage.readAny("hasPwmAccessSince")??0,n=parseInt(e,10)??0,i=await this.chromeStorage.readAny("hasSeenSurvey")??!1,a=Math.floor((Date.now()-n)/864e5);n&&a>=3&&!i&&(De("show-beta-survey",{type:"basic",title:chrome.i18n.getMessage("beta_survey_notification_help_improve_header"),message:chrome.i18n.getMessage("beta_survey_notification_help_improve_text"),iconUrl:"/src/images/PWM-Default-128.png"}),this.chromeStorage.writeAny("hasSeenSurvey",!0),It("pwm_bump_survey_display",this.currentInfo,!0))}});v(this,"onClickedNotificationsHandler",async r=>{switch(r){case"show-beta-survey":{It("pwm_bump_survey_tap",this.currentInfo,!0),chrome.alarms.clear("SHOULD_SHOW_SURVEY"),chrome.tabs.create({url:"https://expressv.typeform.com/to/lrQuSltv#platform=browser"});break}case"show-totp":{const t=await this.sessionStorage.readAny("totp");await this.sessionStorage.delete("totp"),bt("copyToClipboardOffscreen",{text:t},()=>{Qt("CLEAR_CLIPBOARD",{delayInMinutes:.5})});break}}chrome.notifications.clear(r)});v(this,"onClosedNotificationsHandler",async r=>{switch(r){case"show-beta-survey":It("pwm_bump_survey_dismiss",this.currentInfo,!0),await this.chromeStorage.readAny("hasSeenSurveyBump")?chrome.alarms.clear("SHOULD_SHOW_SURVEY"):(this.chromeStorage.writeAny("hasPwmAccessSince",Date.now()),this.chromeStorage.writeAny("hasSeenSurvey",!1),this.chromeStorage.writeAny("hasSeenSurveyBump",!0));break}chrome.notifications.clear(r)});v(this,"createAlarms",async()=>{Qt("FLUSH_TELEMETRY",{periodInMinutes:5},!0),await this.chromeStorage.readAny("hasSeenSurvey")||(chrome.alarms.clear("SHOULD_SHOW_SURVEY"),Qt("SHOULD_SHOW_SURVEY",{periodInMinutes:360,when:Date.now()+1e3},!0))});this.launchDarklyClient=new No(this),this.sessionStorage=new Ne,this.chromeStorage=new Ae,this.uiChromeStorage=new Ae("ui"),this.nativeCommunication=new br((r=>async t=>{var e,n,i,a,s,c,_,l,g,w,m,S,I;switch(t.method){case"connectedToHelper":r.currentInfo.app.version=(e=t.data)==null?void 0:e.app_version,r.currentInfo.isNewProtocol=(n=t.data)==null?void 0:n.isNewProtocol,r.nativeCommunication.getStatus(),r.nativeCommunication.getAPIAccessToken(),bt("connectedToHelper"),r.updatePopupState();break;case"setPwmAccessToken":typeof t.data=="string"&&(await r.pwmHelper.setToken(t.data),r.currentInfo.xvToken=t.data),(i=r.currentInfo.subscription)!=null&&i.subscription_id&&r.currentInfo.subscription.subscription_id!==r.subscriptionId&&(r.subscriptionId=r.currentInfo.subscription.subscription_id,await r.launchDarklyClient.initializeAndConfigureLdClient()),r.onNewInstall();const T=await r.pwmHelper.checkUserExistsAndAuthenticated();fe(((T==null?void 0:T.authenticated)??!1)&&((T==null?void 0:T.exists)??!1)),bt("setPwmAccessToken",T);break;case"currentState":r.currentInfo.state=((a=t.data)==null?void 0:a.state)||((c=(s=t.data)==null?void 0:s.info)==null?void 0:c.state),r.currentInfo.website_url=((_=t.data)==null?void 0:_.website_url)||((g=(l=t.data)==null?void 0:l.info)==null?void 0:g.website_url)||r.currentInfo.website_url,(w=t.data)!=null&&w.networkStatus&&(r.currentInfo.networkStatus=(m=t.data)==null?void 0:m.networkStatus),r.currentInfo.subscription=(S=t.data)==null?void 0:S.subscription,r.updatePopupState();break;case"RequestMfaCode":bt("requestMfaCode",t.data);break;case"ValidateMfaCode":bt("validateMfaCode",t.data);break;case"engineStatusUpdate":if(r.onEngineStatusUpdate(t.name,t.data),(typeof t.data=="string"?t.data:(I=t.data)==null?void 0:I.result)==="no internet")fe(!0);else{try{const P=await r.pwmHelper.checkUserExistsAndAuthenticated();fe(((P==null?void 0:P.authenticated)??!1)&&((P==null?void 0:P.exists)??!1))}catch(P){if(!ir(P))throw P}r.updatePopupState(),r.onNewInstall()}break;case"Unknown":bt("unknown",t)}})(this)),this.pwmHelper=new Sr(this.pmcoreMessageHandler),this.currentInfo=sr,this.settings=cr,this.monitoredTabsHandler=new hr,this.subscriptionId="",chrome.runtime.onInstalled.addListener(this.onInstalledMessageHandler),chrome.idle.onStateChanged.addListener(this.onStateChangedMessageHandler),chrome.tabs.onUpdated.addListener(this.onUpdatedTabHandler),chrome.tabs.onUpdated.addListener(this.onUpdated1clickTabHandler),chrome.notifications.onClicked.addListener(this.onClickedNotificationsHandler),chrome.notifications.onClosed.addListener(this.onClosedNotificationsHandler),chrome.webRequest.onBeforeRequest.addListener(this.onBeforeRequestHandler,{urls:["<all_urls>"],types:["xmlhttprequest"]},["requestBody"])}everyPostDataMatches(r,t,e){const n=e&&["netflix.com","pinterest.com"].includes(e)?(i,a)=>i.includes(a):(i,a)=>i===a;return Object.values(t).every(i=>Object.values(r).some((a=>s=>n(Array.isArray(s)?s.join(""):s,a))(i)))}async onNewInstall(){if(await this.sessionStorage.readAny("isNewInstall")){this.openTabOnAppState(this.currentInfo);const r=await this.pwmHelper.checkUserExistsAndAuthenticated();r!=null&&r.exists?Mn():pe("/html/passwordManager.html#/welcome",!0),await this.sessionStorage.delete("isNewInstall"),setTimeout(()=>{bt("state",this.currentInfo)},2e3)}}openTabOnAppState(r){var e;const t=r==null?void 0:r.state;return t==="not_activated"||t==="NOT_INSTALLED"?(bt("lock_vault"),pe("/html/passwordManager.html#/welcome",!0),!0):((e=r==null?void 0:r.subscription)==null?void 0:e.plan_type)==="business"&&(pe("/html/passwordManager.html#/business-account",!0),!0)}};Oo.start();export{Oo as default};
