var R=Object.defineProperty;var _=(h,e,t)=>e in h?R(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var u=(h,e,t)=>(_(h,typeof e!="symbol"?e+"":e,t),t);import{s as T,w as j,g as C}from"./autofillFunctions-CVxus-se.js";import{c as k,g as N,x as p,i as b,a as g,s as x,f as F,b as q,d as M,e as L,h as H,n as O,j as E,C as G,k as U,l as A,m as P}from"./Settings-Bqkr9m9-.js";import{i as B}from"./isVisible-D3ksDT_w.js";import{A as f}from"./types-DUgExzQo.js";import{a as W}from"./unhandledErrorHandler-Bxfeq5I8.js";const D=[{category:"login",host:"^\\S+.aliexpress.com$",inputs:{username:"input[label='Email']"}},{category:"login",host:"^\\S+.hulu.com$",inputs:{username:"input[data-automationid='email-field']"}},{category:"login",host:"datadoghq\\.com$",ignore:{autofill_fields:["#request_collaborators_"]}},{category:"login",host:"circleci\\.com$",ignore:{autofill_fields:["#request_collaborators_","#environment-value"]}},{category:"login",host:"monday\\.com$",ignore:{autofill_fields:[".person-picker-input"]}},{category:"login",host:"yahoo\\.com$",ignore:{autofill_fields:["#usernamereg-firstName","#usernamereg-lastName"]}},{category:"login",host:"expressvpn\\.com$",ignore:{autofill_fields:[".subscribe-email"]}},{category:"login",host:"airbnb\\.com$",ignore:{autofill_fields:['[name="user[first_name]"]','[name="user[last_name]"]']}},{category:"login",host:"^idmsa\\.apple\\.com$",path:"^/appleauth/auth/",ignore:{autofill:!1,autosave:!1,autofill_fields:[]},inputs:{username:"#account_name_text_field",password:""}},{category:"login",host:"^app\\.coderpad\\.io$",path:"^/",ignore:{autofill:!1,autosave:!1,autofill_fields:[".UserList-selfNameInput"]}},{category:"login",host:"^\\S+.chase.com$",inputs:{username:"input[name='userId']"}},{category:"login",host:"linkedin\\.com$",path:"^/checkpoint/challenge/",inputs:{totp:"input[name='pin']"}},{category:"login",host:"facebook\\.com$",path:"^/checkpoint/",inputs:{totp:"input[id='approvals_code']"}},{category:"login",host:"twitter\\.com$",inputs:{totp:"input[data-testid='ocfEnterTextTextInput']"}},{category:"login",host:"accounts\\.google\\.com$",inputs:{totp:"input[id='totpPin']"}},{category:"login",host:"amazon\\.com$",path:"^/ap/mfa/",inputs:{totp:"input[id='auth-mfa-otpcode']"}},{category:"login",host:"dropbox\\.com$",path:"^/login/",inputs:{totp:"input[name='code']"}},{category:"login",host:"authenticationtest\\.com$",path:"^/totpChallenge/",inputs:{totp:"input[id='totpmfa']"}}];class y{constructor(e){u(this,"rules");this.category=e;const t=y.getAllRules();this.rules=t.filter(s=>s.category===this.category)}static getAllRules(){return D||[]}getCustomRuleSets(e){const{host:t,pathname:s}=e;return this.rules.filter(i=>i.category===this.category&&RegExp(i.host).test(t)&&(!i.path||RegExp(i.path).test(s)))}}class z{constructor(e){u(this,"left");u(this,"iconElement");u(this,"recalculateRequest");u(this,"document");this.input=e,this.document=e.ownerDocument,this.left=0,this.iconElement=this.create(),this.calculateStyles()}create(){const e=this.document.createElement("div");return e.style.all="initial",e.style.backgroundImage=`url(${chrome.runtime.getURL("src/images/logo.svg")})`,e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover",e.style.cursor="pointer",e.style.maxHeight="16px",e.style.maxWidth="16px",e.style.minHeight="12px",e.style.minWidth="12px",e.style.zIndex="2147483647",e.style.position="absolute",e.setAttribute("data-test",this.input.id),e.classList.add("xv-pwm-icon"),e}revealOverlappedElements(){const e=this.input.closest('form[xvpn-watching-form="true"]'),t=e==null?void 0:e.querySelectorAll("a,button,i,span"),s=this.input.nextElementSibling,i=k(this.iconElement,this.input,t,s);this.iconElement.style.left=this.left-i+"px"}calculateStyles(){const{top:e,left:t,width:s,height:i}=N(this.input);this.iconElement.height=16,i<20&&(this.iconElement.height=i-4),this.iconElement.style.height=`${this.iconElement.height}px`,this.iconElement.style.width=`${this.iconElement.height}px`,this.iconElement.style.top=e+i/2-this.iconElement.height/2+"px",this.left=t+s-this.iconElement.height-10,this.iconElement.style.left=`${this.left}px`}append(){var t;(t=this.input.parentElement)==null||t.appendChild(this.iconElement);const e=()=>{this.calculateStyles(),this.revealOverlappedElements(),this.recalculateRequest=window.requestAnimationFrame(e)};return this.recalculateRequest=window.requestAnimationFrame(e),this}remove(){this.iconElement&&(this.recalculateRequest&&window.cancelAnimationFrame(this.recalculateRequest),this.iconElement.remove())}}class V{constructor(e){u(this,"fields");u(this,"customRules");this.handler=e,this.fields=[],this.customRules=new y(this.category).getCustomRuleSets(location)}get category(){return this.handler.category}get suggestionIframe(){return this.handler.parent.suggestionIframe}bootstrapAutosave(e){const t=e.closest("form");t&&!t.getAttribute("xvpn-watching-form")&&(t.setAttribute("xvpn-watching-form",String(!0)),t.addEventListener("submit",()=>{T(!0)}))}bootstrapAutofill(e,t){e.setAttribute("xvpn-watching",String(!0)),e.setAttribute("xvpn-input-type",p(this.category,t));const s=new z(e);s.append();const i={uniqueFieldId:Math.random().toString(),value:e.value,inputType:t};this.fields.push(i),e.addEventListener("input",()=>{i.value=e.value,j({category:this.category,fields:this.fields})}),s.iconElement.addEventListener("click",()=>{this.suggestionIframe.remove();const o=this.fields.map(r=>r.inputType),n=String(this.suggestionIframe.invoke(e,this.category,o));e.dataset.xvpntagged=n,s.iconElement.dataset.xvpntagged=n})}bootstrapInputElement(e,t){const s=this.customRules.filter(l=>{var c;return(c=l.ignore)==null?void 0:c.autofill}),i=this.customRules.filter(l=>{var c;return!((c=l.ignore)!=null&&c.autofill)}),o=s.length>0;o&&i.length;const n=this.customRules.filter(l=>{var c;return(c=l.ignore)==null?void 0:c.autosave}),r=this.customRules.filter(l=>{var c;return!((c=l.ignore)!=null&&c.autosave)}),a=n.length>0;a&&r.length,B(e,document)&&!o&&this.bootstrapAutofill(e,t),a||this.bootstrapAutosave(e)}}class Z{constructor(e,t){this.rootElement=e,this.labelsMap=t}getInputsWithLabels(){const e=[];return Array.from(this.rootElement.querySelectorAll("label[for],label>input:not([xvpn-watching])")).forEach(t=>{const s=t;if(b(s)){if(g(s)){const i=s.closest("label");e.push([s,i])}}else{const i=s.getAttribute("for"),o=document.getElementById(i);o&&g(o)&&!o.hasAttribute("xvpn-watching")&&e.push([o,s])}}),e}getRegexFor(e){var t;return((t=this.labelsMap)==null?void 0:t[e])??{}}getInputElementsForCategory(e){let t={};const s=this.getRegexFor(e);return s&&(t=Object.keys(s).reduce((i,o)=>{const n=s[o],r=this.getInputsWithLabels().filter(a=>n==null?void 0:n.some(c=>{var m;return c.exec((m=a[1])==null?void 0:m.innerText.trim())})).map(a=>a[0]);return r.length&&(i[o]=r),i},t)),t}}const J={login:{username:[/Username/]}};class ${constructor(e,t,s){u(this,"_elementsByInputType");this.category=e,this.rootElement=t,this.parent=s}get elementsByInputType(){return this._elementsByInputType===void 0&&(this._elementsByInputType=this.findInputs(this.rootElement)),this._elementsByInputType}buildSelectorFromRules(e,t,s){const i=[],o=(n,r)=>r!=null&&r.length?`${n}:not(${r.join(",")})`:n;return((t==null?void 0:t.split(","))??[]).forEach(n=>{const r=s.map(a=>{var l;return o(n,(l=a.ignore)==null?void 0:l.autofill_fields)});r.forEach(a=>i.push(a)),r.length===0&&i.push(n)}),s.forEach(n=>{var a;const r=n.inputs??{};if(r[e]){const l=r[e];l&&i.push(o(`${l}:not([xvpn-watching])`,(a=n.ignore)==null?void 0:a.autofill_fields))}}),i.join(",")}findInputs(e){const t=new y(this.category).getCustomRuleSets(location),s=this.findDefaultInputsSelectors();let i={};i=Object.entries(s).reduce((r,[a,l])=>{const c=a,m=this.buildSelectorFromRules(c,l,t);return r[c]=m?Array.from(e.querySelectorAll(m)):[],r},i);const n=new Z(this.rootElement,J).getInputElementsForCategory(this.category);Object.entries(n).forEach(([r,a])=>{i[r]=i[r]||[],a.forEach(l=>{var c;return(c=i[r])==null?void 0:c.push(l)})});for(const r in i)i[r]=[...new Set(i[r])];return i}bootstrapInputs(e){const t=this.findInputs(e),s=Object.entries(t),i=new V(this);s.forEach(([o,n])=>{n.forEach(r=>{i.bootstrapInputElement(r,o)})})}fillPasswordFields(e,t){t.forEach(s=>{const i=document.querySelectorAll(`input[xvpn-input-type="${p(this.category,s)}"]`);Array.from(i).forEach(o=>{o instanceof HTMLInputElement&&x(o,e)})})}async fillInputs(e,t){const s=e.closest("form"),i=Object.keys(this.elementsByInputType);let o={};o=s?i.reduce((n,r)=>{const a=s.querySelector(`input[xvpn-input-type="${p(this.category,r)}"]`);return a&&(n[r]=a),n},o):F(this.category,e,i),Object.entries(o).forEach(([n,r])=>{x(r,String(t[n]))})}}class K extends ${constructor(e,t){super("login",e,t)}generateTotpCodeSelector(){let e=['input[autocomplete="one-time-code"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}generateUsernameSelector(){const e=['[autocomplete*="username" i]','[autocomplete*="email" i]','[placeholder*="email" i]','[placeholder*="e-mail" i]','[placeholder*="username" i]','[title*="email" i]','[title*="e-mail" i]','[title*="username" i]','[aria-label*="email" i]','[aria-label*="e-mail" i]','[aria-label*="username" i]'],t=["username","email","usr","login"],s=Object.values({en:["search","find"],pt:["pesquisar","procurar"]}).flat().reduce((o,n)=>(o.push(`[name*="${n}" i]`,`[id*="${n}" i]`,`[placeholder*="${n}" i]`,`[aria-label*="${n}" i]`),o),[]).join(", ");let i=['input[type="text"]',"input:not([type])"].reduce((o,n)=>{const r=t.map(c=>`${n}[name*="${c}" i]`),a=t.map(c=>`${n}[id*="${c}" i]`),l=e.map(c=>`${n}${c}`);return o.concat(r,a,l)},['input[type*="email" i]']);return i=i.map(o=>`${o}:not([aria-hidden="true"], [xvpn-watching], [type="search"], ${s})`),i.join(",")}generatePasswordSelector(){let e=['input[type="password"]','input[autocomplete="current-password"]'];return e=e.map(t=>`${t}:not([xvpn-watching], [aria-hidden="true"], [maxlength="1"])`),e.join(",")}findDefaultInputsSelectors(){return{username:this.generateUsernameSelector(),password:this.generatePasswordSelector(),totp:this.generateTotpCodeSelector()}}createAutosaveIframe(e,t,s,i){throw new Error("Method not implemented.")}async fillInputs(e,t){super.fillInputs(e,t);const s=await q([t.uuid]);if(s.totpExists){await M({key:"totp",value:s.code});const i=L(t.domain);if(!i)throw new Error("Unexpected state. Domain must exist");const o=H(s.code," ");await O({notificationId:"show-totp",options:{type:"basic",title:chrome.i18n.getMessage("notification_totp_available_title").replaceAll(/\{\s*CODE\s*}/g,o),message:chrome.i18n.getMessage("notification_totp_available_message").replaceAll(/\{\s*DOMAIN\s*}/g,i),iconUrl:"/src/images/PWM-Default-128.png"},clearNotificationAfter:3e4})}}}class Q extends ${constructor(e,t){super("card",e,t)}createAutosaveIframe(e,t,s,i){throw new Error("Method not implemented.")}generateCardNumberSelector(){let e=['input[autocomplete*="cc-number"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}generateNameSelector(){let e=['input[autocomplete*="cc-name"], input[autocomplete*="ccname"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}generateExpirySelector(){let e=['input[autocomplete*="cc-exp"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}generateSecurityCodeSelector(){let e=['input[autocomplete*="cc-csc"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}generateZipCodeSelector(){let e=['input[autocomplete*="postal-code"], input[name="postal_code"], input[id="postal_code"]'];return e=e.map(t=>`${t}:not([xvpn-watching])`),e=e.map(t=>`${t}:not([aria-hidden="true"]):not([maxlength="1"])`),e.join(",")}findDefaultInputsSelectors(){return{name:this.generateNameSelector(),cardNumber:this.generateCardNumberSelector(),zipcode:this.generateZipCodeSelector(),securityCode:this.generateSecurityCodeSelector(),expiry:this.generateExpirySelector()}}async fillInputs(e,t){const s=t;if(/^(www\.)?paypal.com/.test(location.host)){let i=t.expiry;i&&i.length===6&&(i=i.slice(0,2)+i.slice(4,6)),s.expiry=i}super.fillInputs(e,s)}}const S={AF_CAT_REGISTER:{url:["signup","sign-up","register","create-account"],text:["sign up","create account","register","get started"]},AF_CAT_SIGNIN:{url:["signin","sign-in","login"],text:["log in","sign in","login"]}};class X{constructor(e){u(this,"document");u(this,"location");this.rootElement=e,this.document=document,this.location=window.location}queryParent(e,t,s){let i=this.rootElement,o=0;for(;i&&i!==this.document&&o<t;){o+=1;const n=Array.from(i.querySelectorAll(e));if(n.length>0&&s(n))return;i=i.parentNode}}getPageAutofillCategory(){const e=this.rootElement;if(e===null)return;const t={AF_CAT_REGISTER:{total:0,debug:[]},AF_CAT_SIGNIN:{total:0,debug:[]}};for(const i of Object.keys(S)){const o=(a,l)=>{t[i].total+=a,t[i].debug.push(l)},{url:n,text:r}=S[i];if(n.some(a=>RegExp(a,"i").test(this.location.href))&&o(2,"url"),r.some(a=>RegExp(a,"i").test(this.document.title))&&o(1,"title"),this.queryParent('input[type="submit"]',7,a=>{for(const l of a){if(!(l instanceof HTMLInputElement))return!1;if(r.some(c=>RegExp(c,"i").test(l.value)))return o(1,`input[type="submit"]: ${l.value}`),!0}return!1}),this.queryParent("button",7,a=>{for(const l of a){if(!(l instanceof HTMLElement))return!1;if(r.some(c=>RegExp(c,"i").test(l.innerText)))return o(1,`button: ${l.innerText}`),!0}return!1}),e instanceof HTMLInputElement&&e.type){const a=e.closest("form");a&&typeof a.action=="string"&&a.action.replace(/#$/g,"")!==window.location.href&&n.some(l=>RegExp(l,"i").test(a.action))&&o(1,"form")}this.queryParent("h1,h2,h3,h4,h5,h6,div:not(.xv-pwm-icon),p,span,a,b,i,u",7,a=>{for(const l of a){if(!(l instanceof HTMLElement))return!1;if(r.some(c=>RegExp(c,"i").test(l.innerText)))return o(1,`text: ${l.innerText}`),!0}return!1})}let s;return s=t.AF_CAT_REGISTER.total===t.AF_CAT_SIGNIN.total?void 0:t.AF_CAT_REGISTER.total>t.AF_CAT_SIGNIN.total?"AF_CAT_REGISTER":"AF_CAT_SIGNIN",s}}class Y{constructor(e,t){u(this,"iframe");u(this,"clientRect");u(this,"targetElement");u(this,"observer");this.injectedId=e,this.frameId=t}invoke(e,t,s){if(!b(e))return!1;this.targetElement=e,this.clientRect=e.getBoundingClientRect();const i=this.clientRect.y,o=this.clientRect.left;if(document.getElementById(this.injectedId))return!1;const n=new X(e).getPageAutofillCategory(),r=e.getAttribute("xvpn-input-type"),a=chrome.runtime.getURL("/html/autofill.html");let l;if(t==="card"?l=f.CARD_SUGGESTIONS:t==="login"&&(l=r===p(t,"totp")?f.TOTP_SUGGESTIONS:f.LOGIN_SUGGESTIONS),!l)throw new Error("autofill type not recognised");let c={frameId:this.frameId,category:t,type:l};n==="AF_CAT_REGISTER"&&t==="login"&&r===p(t,"password")&&(c={...c,type:f.PASSWORD_GENERATOR});const m=`${a}?${Object.entries(c).map(([I,v])=>`${I}=${encodeURIComponent(v)}`).join("&")}`;this.iframe=E(this.injectedId,m,{top:`${i}px`,left:`${o}px`,width:"310px",visibility:"hidden"});const d=document.getElementById(this.injectedId);if(d){const I={attributes:!0,attributeFilter:["style"]};this.observer=new MutationObserver(v=>{for(const w of v)w.type==="attributes"&&w.attributeName==="style"&&getComputedStyle(d).opacity!=="1"&&(d.style.opacity="1")}),this.observer.observe(d,I)}return!0}remove(){var t;const e=document.getElementById(this.injectedId);this.observer&&this.observer.disconnect(),e&&e.remove(),(t=document.querySelector("input[data-xvpntagged]"))==null||t.removeAttribute("data-xvpntagged"),this.targetElement=null}hide(){this.iframe&&(this.iframe.style.visibility="hidden")}reveal(e){this.iframe&&this.clientRect&&(this.iframe.style.visibility="visible",e?this.setHeight(e):e===0&&this.hide())}getHeight(){if(this.iframe&&this.clientRect){const e=Number(this.iframe.height.match(/\d+/));return isNaN(e)||e===0?void 0:e}}setHeight(e){this.iframe&&this.clientRect&&(this.iframe.style.height=`${e}px`,this.iframe.style.top=`${this.clientRect.y+this.clientRect.height}px`)}getTargetElement(){return this.targetElement}}class ee{constructor(e,t){u(this,"iframe");this.injectedId=e,this.frameId=t}invoke(){if(document.getElementById(this.injectedId))return!1;const e=`${chrome.runtime.getURL("/html/autosave.html")}?frameId=${this.frameId}`;return this.iframe=E(this.injectedId,e,{top:"20px",right:"20px",width:"350px","min-width":"350px",height:"350px"}),!0}remove(){const e=document.getElementById(this.injectedId);e&&e.remove()}setHeight(e){this.iframe&&(this.iframe.style.height=`${e}px`)}}class te{constructor(e,t){u(this,"iframe");this.injectedId=e,this.frameId=t}reveal(e,t){const s=chrome.runtime.getURL("/html/autofillWarning.html");if(document.getElementById(this.injectedId))return!1;let i=`${s}?frameId=${this.frameId}&docUuid=${e.uuid}&isInsecureWarning=${t}`;return e.type==="login"&&(i=`${i}&entryDomain=${e.domain}`),this.iframe=E(this.injectedId,i,{top:"20px",right:"20px",width:"350px",height:t?"338px":"283px"}),!0}remove(){const e=document.getElementById(this.injectedId);e&&e.remove()}}class ie{constructor(e,t){u(this,"handlersMap",{});u(this,"injectedId");u(this,"flags");u(this,"autosaveId");u(this,"suggestionIframe");u(this,"autosaveIframe");u(this,"warningIframe");u(this,"rootElement");u(this,"chromeStorage");u(this,"fillInputs",e=>{var i;const t=p("login","username"),s=this.suggestionIframe.getTargetElement()||document.querySelector(`[xvpn-input-type="${t}"]`);b(s)&&((i=this.handlersMap[e.type])==null||i.fillInputs(s,e),this.suggestionIframe.remove(),this.warningIframe.remove())});u(this,"fillPasswordFields",(e,t)=>{var s;(s=this.handlersMap[e])==null||s.fillPasswordFields(t,["password"]),this.suggestionIframe.remove()});u(this,"runtimeMessageHandler",(e,t,s)=>{const{command:i}=e;if(e.type!=="autofillruntime")return void s({success:!1,error:e.type+" not supported here"});let o;try{switch(i){case"revealAutofill":{const n=e.args;this.suggestionIframe.reveal(n.height)}break;case"setIframeHeight":{const n=e.args;this.suggestionIframe.setHeight(n.height)}break;case"setIframeHeightRelative":{const n=e.args,r=this.suggestionIframe.getHeight();if(r!==void 0){const a=r+n.heightIncrease;this.suggestionIframe.setHeight(a),o=a}}break;case"invokeAutosave":this.autosaveIframe.invoke();break;case"fillInputs":{const n=e.args;this.fillInputs(n.document);break}case"showAutofillWarning":{const n=e.args;this.showAutofillWarning(n.document,n.isInsecureWarning);break}case"removeAutofillWarning":this.warningIframe.remove();break;case"fillPasswordFields":{const n=e.args;this.fillPasswordFields(n.category,n.password);break}case"closeAutofill":this.suggestionIframe.remove();break;case"closeAutosave":this.autosaveIframe.remove();break;case"setAutosaveIframeHeight":{const n=e.args;this.autosaveIframe.setHeight(n.height)}break;default:return void s({success:!1,error:`[Autofill Manager] Unhandled Runtime Message: ${e}`})}s({success:!0,data:o})}catch(n){const r=n;s({success:!1,error:(r==null?void 0:r.message)??String(r)})}return!0});this.frameId=e,this.rootElement=document.body,this.flags=t,this.injectedId="autofill-"+window.crypto.getRandomValues(new Uint32Array(10)).join(""),this.autosaveId="autosave-"+window.crypto.getRandomValues(new Uint32Array(10)).join(""),this.autosaveIframe=new ee(this.autosaveId,e),this.handlersMap.login=new K(this.rootElement,this),this.handlersMap.card=new Q(this.rootElement,this),this.suggestionIframe=new Y(this.injectedId,e),this.warningIframe=new te(`warning-${this.injectedId}`,e),this.chromeStorage=new G}setupIframeRemovalListeners(){document.body.addEventListener("click",t=>{const s=t.target;s.matches("#"+this.injectedId)||s.dataset.xvpntagged||this.suggestionIframe.remove()});let e=!1;document.addEventListener("scroll",()=>{e||(window.requestAnimationFrame(()=>{this.suggestionIframe.remove(),e=!1}),e=!0)}),document.addEventListener("wheel",()=>{e||(window.requestAnimationFrame(()=>{this.suggestionIframe.remove(),e=!1}),e=!0)}),document.addEventListener("keydown",t=>{U(t)&&this.suggestionIframe.remove()}),new ResizeObserver(()=>{this.suggestionIframe.remove()}).observe(document.body)}bootstrapAllHandlers(){Object.values(this.handlersMap).forEach(e=>e.bootstrapInputs(this.rootElement))}observe(){new MutationObserver(e=>{e.filter(t=>A(t.target)).some(t=>{const s=t.target;return t.type==="childList"&&g(s)||t.type==="childList"&&Array.from(t.addedNodes).some(i=>{var o;return A(i)&&(g(i)||!!((o=i.querySelector)!=null&&o.call(i,"input")))})?!0:t.type==="attributes"&&Array.from(s.querySelectorAll("input")).some(i=>g(i))})&&this.bootstrapAllHandlers()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0})}async bootstrap(){const e=await this.chromeStorage.readAny("accountState");e!=null&&e.exists&&(this.setupIframeRemovalListeners(),setTimeout(()=>{this.bootstrapAllHandlers(),this.observe(),chrome.runtime.onMessage.addListener(this.runtimeMessageHandler)},150))}showAutofillWarning(e,t=!1){this.warningIframe.reveal(e,t),this.suggestionIframe.hide()}}W("bootstrapAutofill");const se=async h=>{if(self.origin){const e=await C();new ie(String(e),h).bootstrap()}};P().then(se);export{se as initializeAutofillManager};
